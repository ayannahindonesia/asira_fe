{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\components\\\\pinjaman\\\\pinjamanDetail.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport { getPermintaanPinjamanDetailFunction, patchInstallmentFunction, patchLoanFunction, patchInstallmentBulkFunction } from './saga';\nimport Loading from '../subComponent/Loading';\nimport { checkPermission, handleFormatDate, findAmount, formatMoney, decryptImage } from '../global/globalFunction';\nimport { getTokenAuth, getTokenClient } from '../index/token';\nimport GridDetail from '../subComponent/GridDetail';\nimport TitleBar from '../subComponent/TitleBar';\nimport { Grid } from '@material-ui/core';\nimport ActionComponent from '../subComponent/ActionComponent';\nimport DialogComponent from '../subComponent/DialogComponent';\nimport TableComponent from '../subComponent/TableComponent';\nvar columnDataUser = [{\n  id: 'id',\n  label: 'ID Pinjaman',\n  hidden: true\n}, {\n  id: 'period',\n  label: 'Period'\n}, {\n  id: 'due_date',\n  label: 'Tanggal Jatuh Tempo',\n  type: 'datetime'\n}, {\n  id: 'total',\n  label: 'Total Cicilan'\n}, {\n  id: 'paid_amount_string',\n  label: 'Total Pembayaran'\n}, {\n  id: 'paid_date',\n  label: 'Tanggal Pembayaran',\n  type: 'datetime'\n}, {\n  id: 'paid_status_string',\n  label: 'Status'\n}];\n\nvar Main =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Main, _React$Component);\n\n  function Main() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Main);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Main)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this._isMounted = false;\n    _this.state = {\n      errorMessage: '',\n      endDate: null,\n      diterima: false,\n      dicairkan: false,\n      dipinjam: false,\n      ditolak: false,\n      loading: true,\n      dateApprove: null,\n      reason: '',\n      dialog: false,\n      statusPinjaman: '',\n      status: '',\n      disburse_status: '',\n      payment_status: '',\n      paymentNote: '',\n      paymentStatus: '',\n      title: '',\n      rowsPerPage: 12,\n      page: 1,\n      totalData: 0,\n      paging: true,\n      loadingPage: false,\n      permissionPaidInstallment: false,\n      dataListPaid: [{\n        id: 'processing',\n        label: 'Dalam Proses'\n      }, {\n        id: 'paid',\n        label: 'Telah Lunas'\n      }, {\n        id: 'failed',\n        label: 'Gagal Bayar'\n      }]\n    };\n\n    _this.getDataDetail = function () {\n      _this._isMounted && _this.refresh();\n    };\n\n    _this.permissionBtnPaid = function () {\n      var flag = false;\n\n      if (checkPermission('lender_loan_installment_approve') && _this.state.status && _this.state.status === 'approved' && _this.state.disburse_status && _this.state.disburse_status === 'confirmed' && _this.state.payment_status && _this.state.payment_status === 'processing') {\n        flag = true;\n      }\n\n      return flag;\n    };\n\n    _this.refresh = function _callee(status) {\n      var param, data, rows, pinjamanInfo, detailInfo, feesInfo, formInfo, borrowerInfo, allInstallment;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              param = {};\n              param.idLoan = this.props.match.params.idLoan;\n\n              if (status) {\n                if (status === 'terima') {\n                  param.dateApprove = this.state.dateApprove;\n                } else if (status === 'tolak') {\n                  param.reason = this.state.reason;\n                }\n              }\n\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(getPermintaanPinjamanDetailFunction(param, status));\n\n            case 5:\n              data = _context.sent;\n\n              if (data) {\n                if (!data.error) {\n                  if (status && status === 'terima') {\n                    swal(\"Permintaan Pinjaman\", \"Diterima\", \"success\");\n                    this._isMounted && this.setState({\n                      errorMessage: '',\n                      diterima: true,\n                      loading: false\n                    });\n                  } else if (status && status === 'tolak') {\n                    swal(\"Permintaan Pinjaman\", \"Ditolak\", \"warning\");\n                    this._isMounted && this.setState({\n                      errorMessage: '',\n                      ditolak: true,\n                      loading: false\n                    });\n                  } else {\n                    rows = data.dataLender;\n                    pinjamanInfo = this.getPinjamanInfo(rows);\n                    detailInfo = this.getDetailInfo(rows);\n                    feesInfo = this.getFeesInfo(data.dataLender && data.dataLender.fees, rows && rows.loan_amount);\n                    formInfo = this.getFormInfo(data.dataLender && data.dataLender.form_info && (typeof data.dataLender.form_info !== 'object' ? JSON.parse(data.dataLender.form_info) : data.dataLender.form_info));\n                    borrowerInfo = this.getBorrowerInfo(data.dataLender && data.dataLender.borrower_info);\n                    allInstallment = data.dataLender && data.dataLender.installment_details;\n\n                    if (checkPermission('lender_loan_request_list_installment_list')) {\n                      this.getInstallmentInfo(data.dataLender.installment_details);\n                    }\n\n                    this.setState({\n                      pinjamanInfo: pinjamanInfo,\n                      formInfo: formInfo,\n                      feesInfo: feesInfo,\n                      borrowerInfo: borrowerInfo,\n                      detailInfo: detailInfo,\n                      allInstallment: allInstallment,\n                      status: rows && rows.status,\n                      disburse_status: rows && rows.disburse_status,\n                      payment_status: rows && rows.payment_status,\n                      paymentStatus: rows && rows.payment_status,\n                      paymentNote: rows && rows.payment_note,\n                      loading: false,\n                      loadingPage: false\n                    }, function () {\n                      if (status && status === 'paid') {\n                        swal(\"Perubahan Detail Cicilan\", \"Berhasil\", \"success\");\n                      } else if (status && status === 'paidLoan') {\n                        swal(\"Status Pinjaman diubah\", \"Berhasil\", \"success\");\n                      }\n                    });\n                  }\n                } else {\n                  this.setState({\n                    errorMessage: data.error,\n                    loading: false,\n                    loadingPage: false\n                  });\n                }\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    };\n\n    _this.getInstallmentInfo = function (installmentParam) {\n      var installment = installmentParam || _this.state.allInstallment;\n      var installmentInfo = [];\n      var page = _this.state.page;\n      var rowsPerPage = _this.state.rowsPerPage;\n      var totalData = 0;\n\n      if (installment) {\n        for (var key in installment) {\n          if (parseInt(key) >= rowsPerPage * (page - 1) && parseInt(key) < rowsPerPage * page) {\n            var newInstallment = installment[key];\n            newInstallment.paid_status_string = newInstallment.paid_status ? 'Sudah Bayar' : 'Belum Bayar';\n            newInstallment.paid_amount_string = formatMoney(parseInt(newInstallment.paid_amount || 0));\n            newInstallment.total = formatMoney(Math.ceil(parseFloat(newInstallment.loan_payment + newInstallment.interest_payment + newInstallment.penalty)));\n            installmentInfo.push(installment[key]);\n          }\n\n          totalData += 1;\n        }\n      }\n\n      _this.setState({\n        totalData: totalData,\n        loadingPage: false,\n        installmentInfo: installmentInfo\n      });\n    };\n\n    _this.getDetailInfo = function (rows) {\n      var pinjamanInfo = null;\n\n      if (rows) {\n        pinjamanInfo = {\n          title: [['ID Pinjaman', 'Nasabah', 'Rekening'], ['Status Pinjaman', 'Kategori', 'Agen/ AE']],\n          value: [[rows.id, \"\".concat(rows.borrower_name || '-', \" ( \").concat(rows.borrower || '-', \" )\"), rows.bank_account], [rows.status && rows.status === \"processing\" ? {\n            value: \"Dalam Proses\",\n            color: 'blue'\n          } : rows.status === \"approved\" && rows.disburse_status === \"confirmed\" ? {\n            value: \"Telah Dicairkan\",\n            color: 'blue'\n          } : rows.status === 'rejected' ? {\n            value: \"Ditolak\",\n            color: 'red'\n          } : rows.status === 'approved' ? {\n            value: \"Diterima\",\n            color: 'green'\n          } : null, rows.category === \"\" ? \"Personal\" : rows.category === \"account_executive\" ? \"Account Executive\" : \"Agent\", \"\".concat(rows.agent_name ? rows.agent_name : \"-\", \" (\").concat(rows.agent_provider_name ? rows.agent_provider_name : \"-\", \")\")]]\n        };\n\n        if (rows.status === 'approved' && rows.disburse_status === 'confirmed') {\n          pinjamanInfo.title[0].push('Status Pembayaran');\n          pinjamanInfo.value[0].push(rows.payment_status && (rows.payment_status === 'processing' ? {\n            value: \"Dalam Proses\",\n            color: 'blue'\n          } : rows.payment_status === 'paid' ? {\n            value: \"Telah Lunas\",\n            color: 'green'\n          } : rows.payment_status === 'failed' ? {\n            value: \"Gagal Bayar\",\n            color: 'red'\n          } : '-'));\n          pinjamanInfo.title[1].push('Catatan Pembayaran');\n          pinjamanInfo.value[1].push(rows.payment_note);\n        }\n      }\n\n      return pinjamanInfo;\n    };\n\n    _this.getBorrowerInfo = function (borrower) {\n      var borrowerInfo = null;\n\n      if (borrower) {\n        borrowerInfo = {\n          title: [['Tanggal lahir', 'Nomor Telepon', 'Nomor KTP', 'Nomor NPWP'], ['Pendapatan', 'Sumber Pendapatan', 'Pendapatan Lainnya', 'Sumber Pendapatan Lainnya']],\n          value: [[handleFormatDate(borrower.birthday), borrower.phone, borrower.idcard_number, borrower.taxid_number], [formatMoney(borrower.monthly_income), borrower.occupation, formatMoney(borrower.other_income), borrower.other_incomesource]]\n        };\n      }\n\n      return borrowerInfo;\n    };\n\n    _this.getPinjamanInfo = function (rows) {\n      var pinjamanInfo = null;\n\n      if (rows) {\n        pinjamanInfo = {\n          title: [['Total Pinjaman', 'Pinjaman Pokok', 'Tenor'], ['Produk', 'Bunga', 'Tujuan Pinjaman', 'Keterangan'], ['Tanggal Pengajuan']],\n          value: [[formatMoney(rows.total_loan), formatMoney(rows.loan_amount), rows.installment], [rows.product, \"\".concat(rows.interest, \"%\"), rows.loan_intention, rows.intention_details], [handleFormatDate(rows.created_at)]]\n        };\n\n        if (rows.status === 'approved') {\n          pinjamanInfo.title[0].push('Total Pencairan');\n          pinjamanInfo.value[0].push(formatMoney(rows.disburse_amount));\n          pinjamanInfo.title[2].push('Tanggal Penerimaan');\n          pinjamanInfo.value[2].push(handleFormatDate(rows.approval_date));\n          pinjamanInfo.title[2].push('Tanggal Pencairan');\n          pinjamanInfo.value[2].push(\"\".concat(handleFormatDate(rows.disburse_date), \" \").concat(rows.disburse_date_changed ? '(Telah Diubah)' : ''));\n        } else if (rows.status === 'rejected') {\n          pinjamanInfo.title[2].push('Tanggal Penolakan');\n          pinjamanInfo.value[2].push(handleFormatDate(rows.approval_date));\n          pinjamanInfo.title[2].push('Alasan Penolakan');\n          pinjamanInfo.value[2].push(rows.reject_reason);\n        }\n      }\n\n      return pinjamanInfo;\n    };\n\n    _this.getFeesInfo = function (fees, loanAmount) {\n      var feesInfo = null;\n\n      if (fees) {\n        feesInfo = {\n          title: [],\n          value: []\n        };\n        var arrayFee = 0;\n\n        for (var key in fees) {\n          if (arrayFee === 2) {\n            arrayFee = 0;\n          }\n\n          if (!feesInfo.title[arrayFee]) {\n            feesInfo.title[arrayFee] = [];\n          }\n\n          ;\n          feesInfo.title[arrayFee].push(fees[key].description);\n\n          if (!feesInfo.value[arrayFee]) {\n            feesInfo.value[arrayFee] = [];\n          }\n\n          ;\n          feesInfo.value[arrayFee].push(findAmount(fees[key] && fees[key].amount, loanAmount));\n          arrayFee += 1;\n        }\n      }\n\n      return feesInfo;\n    };\n\n    _this.getFormInfo = function (form) {\n      var formInfo = null;\n\n      if (form) {\n        formInfo = {\n          title: [],\n          value: []\n        };\n        var arrayForm = 0;\n\n        for (var key in form) {\n          if (arrayForm === 3) {\n            arrayForm = 0;\n          }\n\n          if (!formInfo.title[arrayForm]) {\n            formInfo.title[arrayForm] = [];\n          }\n\n          ;\n          formInfo.title[arrayForm].push(form[key].label);\n\n          if (!formInfo.value[arrayForm]) {\n            formInfo.value[arrayForm] = [];\n          }\n\n          ;\n\n          if (form[key].type === 'image') {\n            formInfo.value[arrayForm].push({\n              type: 'image',\n              value: form[key].answers && decryptImage(form[key].answers)\n            });\n          } else {\n            formInfo.value[arrayForm].push(form[key].answers);\n          }\n\n          arrayForm += 1;\n        }\n      }\n\n      return formInfo;\n    };\n\n    _this.btnTerimaPinjaman = function () {\n      var endDate = _this.state.endDate;\n\n      if (endDate === null || endDate && endDate.toString() === 'Invalid Date') {\n        _this.setState({\n          errorMessage: \"Harap Masukkan Tanggal Pencairan dengan benar\"\n        });\n      } else {\n        _this.setState({\n          dateApprove: _this.constructDate(endDate),\n          loading: true\n        }, function () {\n          _this.refresh('terima');\n        });\n      }\n    };\n\n    _this.btnTolakPinjaman = function () {\n      var reject = _this.state.reason;\n\n      if (!reject || reject.trim() === '') {\n        _this.setState({\n          errorMessage: \"Alasan Penolakan Kosong - Harap Cek Ulang\"\n        });\n      } else {\n        _this.setState({\n          loading: true\n        });\n\n        _this.refresh('tolak');\n      }\n    };\n\n    _this.btnPaidInstallment = function () {\n      _this.setState({\n        loading: true\n      }, function () {\n        _this.patchInstallment();\n      });\n    };\n\n    _this.patchInstallment = function _callee2() {\n      var dataDetail, param, data;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              dataDetail = this.state.detailPaid;\n              param = {\n                idLoan: this.props.match.params.idLoan,\n                idInstallment: dataDetail && dataDetail.id,\n                newData: {\n                  paid_status: dataDetail && dataDetail.paid_status,\n                  paid_amount: parseFloat(dataDetail && dataDetail.paid_amount || 0),\n                  underpayment: dataDetail && dataDetail.paid_amount && dataDetail.loan_payment && dataDetail.interest_payment && dataDetail.penalty && parseFloat(dataDetail.loan_payment + dataDetail.interest_payment + dataDetail.penalty - dataDetail.paid_amount || 0),\n                  penalty: parseFloat(dataDetail && dataDetail.penalty || 0),\n                  due_date: dataDetail && dataDetail.due_date && this.constructDate(dataDetail.due_date),\n                  note: dataDetail && dataDetail.note\n                }\n              };\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(patchInstallmentFunction(param));\n\n            case 4:\n              data = _context2.sent;\n\n              if (data) {\n                if (!data.error) {\n                  this.refresh('paid');\n                } else {\n                  this.setState({\n                    errorMessage: data.error,\n                    loading: false,\n                    loadingPage: false\n                  });\n                }\n              }\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    };\n\n    _this.btnPaidAll = function () {\n      _this.setState({\n        loading: true\n      }, function () {\n        _this.patchLoan();\n      });\n    };\n\n    _this.patchLoan = function _callee3() {\n      var param, data;\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              param = {\n                idLoan: this.props.match.params.idLoan,\n                newData: {\n                  payment_status: this.state.paymentStatus,\n                  payment_note: this.state.paymentNote\n                }\n              };\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(patchLoanFunction(param));\n\n            case 3:\n              data = _context3.sent;\n\n              if (data) {\n                if (!data.error) {\n                  this.refresh('paidLoan');\n                } else {\n                  this.setState({\n                    errorMessage: data.error,\n                    loading: false,\n                    loadingPage: false\n                  });\n                }\n              }\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this);\n    };\n\n    _this.patchInstallmentBulk = function _callee4() {\n      var param, allInstallment, key, data;\n      return _regeneratorRuntime.async(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              this.setState({\n                loading: true\n              });\n              param = {\n                idLoan: this.props.match.params.idLoan,\n                newData: []\n              };\n              allInstallment = this.state.allInstallment;\n\n              for (key in allInstallment) {\n                if (!allInstallment[key].paid_status || allInstallment[key].paid_status && allInstallment[key].paid_status === false) {\n                  param.newData.push({\n                    id: allInstallment[key].id,\n                    paid_status: true,\n                    paid_amount: allInstallment[key].loan_payment + allInstallment[key].interest_payment + allInstallment[key].penalty,\n                    underpayment: allInstallment[key].underpayment,\n                    penalty: allInstallment[key].penalty,\n                    due_date: this.constructDate(allInstallment[key].due_date),\n                    note: allInstallment[key].note\n                  });\n                }\n              }\n\n              _context4.next = 6;\n              return _regeneratorRuntime.awrap(patchInstallmentBulkFunction(param));\n\n            case 6:\n              data = _context4.sent;\n\n              if (data) {\n                if (!data.error) {\n                  this.patchLoan();\n                } else {\n                  this.setState({\n                    errorMessage: data.error,\n                    loading: false,\n                    loadingPage: false\n                  });\n                }\n              }\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this);\n    };\n\n    _this.btnBack = function () {\n      if (_this.props.history && _this.props.history.action && _this.props.history.action !== 'POP') {\n        _this.props.history.goBack();\n      } else if (_this.state.status === 'processing') {\n        _this.setState({\n          dipinjam: true\n        });\n      } else if (_this.state.status === 'approved' && _this.state.disburse_status === 'confirmed') {\n        _this.setState({\n          dicairkan: true\n        });\n      } else if (_this.state.status === 'approved' && _this.state.disburse_status === 'processing') {\n        _this.setState({\n          diterima: true\n        });\n      } else if (_this.state.status === 'rejected') {\n        _this.setState({\n          ditolak: true\n        });\n      } else {\n        window.history.back();\n      }\n    };\n\n    _this.handleEndChange = function (date) {\n      _this.setState({\n        endDate: date\n      }, function () {\n        _this.settingMessage();\n      });\n    };\n\n    _this.onChangeTextField = function (e, labelData, number) {\n      var dataText = e.target.value;\n\n      if (number && isNaN(dataText)) {\n        dataText = _this.state[labelData];\n      }\n\n      _this.setState(_defineProperty({}, labelData, dataText), function () {\n        _this.settingMessage();\n      });\n    };\n\n    _this.onChangeTextFieldForm = function (e, labelData, number, dateParam) {\n      var detailPaid = _this.state.detailPaid;\n\n      if (dateParam) {\n        detailPaid[labelData] = e;\n      } else {\n        if (!number || number && !isNaN(e.target.value)) {\n          detailPaid[labelData] = e.target.value;\n        }\n      }\n\n      _this.setState({\n        detailPaid: detailPaid\n      }, function () {\n        _this.settingMessage();\n      });\n    };\n\n    _this.onChangeCheckbox = function (e, labelData) {\n      var detailPaid = _this.state.detailPaid;\n      detailPaid[labelData] = !detailPaid[labelData];\n\n      _this.setState({\n        detailPaid: detailPaid\n      }, function () {\n        _this.settingMessage();\n      });\n    };\n\n    _this.onChangeDropDown = function (e, labelData) {\n      _this.setState(_defineProperty({}, labelData, e.target.value), function () {\n        _this.settingMessage();\n      });\n    };\n\n    _this.btnPaidAndDetail = function (e, idPaid) {\n      var newPaid = _this.state.allInstallment;\n      var detailPaid = _this.state.detailPaid;\n\n      if (idPaid) {\n        for (var key in newPaid) {\n          if (newPaid[key].id.toString() === idPaid.toString()) {\n            detailPaid = newPaid[key];\n            break;\n          }\n        }\n      }\n\n      _this.setState({\n        detailPaid: detailPaid\n      }, function () {\n        _this.btnConfirmationDialog(e, false, 'paidInstallment');\n      });\n    };\n\n    _this.constructDate = function (date) {\n      var newDate = date;\n\n      if (typeof date === 'object') {\n        newDate = \"\".concat(date.getFullYear(), \"-\").concat(date.getMonth() + 1 < 10 ? \"0\".concat(date.getMonth() + 1) : date.getMonth() + 1, \"-\").concat(date.getDate() < 10 ? \"0\".concat(date.getDate()) : date.getDate());\n      }\n\n      return newDate;\n    };\n\n    _this.settingMessage = function (statusPinjamanParam) {\n      var message = _this.state.message;\n      var title = _this.state.title;\n      var permissionPaidInstallment = _this.state.permissionPaidInstallment;\n      var statusPinjaman = statusPinjamanParam || _this.state.statusPinjaman;\n\n      if (statusPinjaman && statusPinjaman === 'terima') {\n        title = 'Persetujuan Pinjaman';\n        message = [{\n          id: 'endDate',\n          title: 'Mohon isi Tanggal Pencairan',\n          type: 'date',\n          value: _this.state.endDate,\n          function: _this.handleEndChange\n        }];\n        permissionPaidInstallment = false;\n      } else if (statusPinjaman && statusPinjaman === 'tolak') {\n        title = 'Penolakan Pinjaman';\n        message = [{\n          id: 'reason',\n          title: 'Mohon isi Alasan Penolakan',\n          type: 'textfield',\n          value: _this.state.reason,\n          function: _this.onChangeTextField\n        }];\n        permissionPaidInstallment = false;\n      } else if (statusPinjaman && statusPinjaman === 'paidInstallment') {\n        title = 'Pembayaran Cicilan';\n        var detailPaid = _this.state.detailPaid;\n\n        if (detailPaid) {\n          permissionPaidInstallment = detailPaid.paid_status_string === 'Sudah Bayar' || !_this.permissionBtnPaid();\n          message = [{\n            id: 'period',\n            title: 'Period',\n            type: 'textfield',\n            value: detailPaid.period || 0,\n            disabled: true\n          }, {\n            id: 'due_date',\n            title: 'Tanggal Jatuh Tempo',\n            type: 'date',\n            value: detailPaid.due_date || '',\n            function: _this.onChangeTextFieldForm,\n            disabled: permissionPaidInstallment\n          }, {\n            id: 'loan_payment',\n            title: 'Cicilan Pokok',\n            type: 'textfield',\n            value: formatMoney(detailPaid.loan_payment || 0),\n            disabled: true\n          }, {\n            id: 'interest_payment',\n            title: 'Cicilan Bunga',\n            type: 'textfield',\n            value: formatMoney(detailPaid.interest_payment || 0),\n            disabled: true\n          }, {\n            id: 'penalty',\n            title: 'Denda',\n            type: 'textfield',\n            numeric: permissionPaidInstallment ? false : true,\n            value: permissionPaidInstallment ? formatMoney(parseFloat(detailPaid.penalty || 0)) : detailPaid.penalty,\n            function: _this.onChangeTextFieldForm,\n            disabled: permissionPaidInstallment\n          }, {\n            id: 'total',\n            title: 'Total harus Bayar',\n            type: 'textfield',\n            value: formatMoney(Math.ceil(parseFloat(detailPaid.penalty || 0) + parseFloat(detailPaid.interest_payment) + parseFloat(detailPaid.loan_payment))),\n            function: _this.onChangeTextFieldForm,\n            disabled: true\n          }, {\n            id: 'paid_amount',\n            title: 'Total Pembayaran',\n            type: 'textfield',\n            numeric: permissionPaidInstallment ? false : true,\n            value: permissionPaidInstallment ? formatMoney(Math.ceil(parseFloat(detailPaid.paid_amount || 0))) : detailPaid.paid_amount,\n            function: _this.onChangeTextFieldForm,\n            disabled: permissionPaidInstallment\n          }, {\n            id: 'paid_date',\n            title: 'Tanggal Pembayaran',\n            type: 'textfield',\n            value: handleFormatDate(detailPaid.paid_date || ''),\n            disabled: true\n          }, {\n            id: 'paid_status',\n            title: 'Status Pembayaran',\n            label: 'Terbayar',\n            type: 'checkbox',\n            value: detailPaid.paid_status || false,\n            function: _this.onChangeCheckbox,\n            disabled: permissionPaidInstallment\n          }, {\n            id: 'note',\n            title: 'Keterangan',\n            type: 'textfield',\n            value: detailPaid.note || '',\n            function: _this.onChangeTextFieldForm,\n            disabled: permissionPaidInstallment\n          }];\n        }\n      } else if (statusPinjaman && statusPinjaman === 'paidAll') {\n        title = 'Perubahan Status Pembayaran';\n        message = [{\n          id: 'paymentStatus',\n          title: 'Status Pembayaran',\n          type: 'dropdown',\n          data: _this.state.dataListPaid,\n          value: _this.state.paymentStatus,\n          function: _this.onChangeDropDown\n        }, {\n          id: 'paymentNote',\n          title: 'Catatan Pembayaran',\n          type: 'textfield',\n          value: _this.state.paymentNote,\n          function: _this.onChangeTextField\n        }];\n        permissionPaidInstallment = false;\n      }\n\n      _this.setState({\n        title: title,\n        message: message,\n        permissionPaidInstallment: !permissionPaidInstallment\n      });\n    };\n\n    _this.btnConfirmationDialog = function (e, nextStep, statusPinjaman) {\n      _this.settingMessage(statusPinjaman);\n\n      _this.setState({\n        dialog: !_this.state.dialog,\n        statusPinjaman: statusPinjaman\n      });\n\n      if (nextStep) {\n        if (_this.state.statusPinjaman === 'terima') {\n          _this.btnTerimaPinjaman();\n        } else if (_this.state.statusPinjaman === 'tolak') {\n          _this.btnTolakPinjaman();\n        } else if (_this.state.statusPinjaman === 'paidInstallment') {\n          _this.btnPaidInstallment();\n        } else if (_this.state.statusPinjaman === 'paidAll') {\n          if (_this.state.paymentStatus && _this.state.paymentStatus !== 'paid') {\n            _this.btnPaidAll();\n          } else if (_this.state.paymentStatus && _this.state.paymentStatus === 'paid') {\n            _this.patchInstallmentBulk();\n          }\n        }\n      }\n    };\n\n    _this.onChangePage = function (current) {\n      _this.setState({\n        loadingPage: true,\n        page: current\n      }, function () {\n        _this.getInstallmentInfo(_this.state.allInstallment);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Main, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this.getDataDetail();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.loading) {\n        return React.createElement(Loading, {\n          title: 'Pinjaman - Detail',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 784\n          },\n          __self: this\n        });\n      } else if (this.state.dipinjam) {\n        return React.createElement(Redirect, {\n          to: \"/permintaanPinjaman\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 790\n          },\n          __self: this\n        });\n      } else if (this.state.dicairkan) {\n        return React.createElement(Redirect, {\n          to: \"/pencairanList\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 794\n          },\n          __self: this\n        });\n      } else if (this.state.diterima) {\n        return React.createElement(Redirect, {\n          to: \"/pinjamanSetuju\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 798\n          },\n          __self: this\n        });\n      } else if (this.state.ditolak) {\n        return React.createElement(Redirect, {\n          to: \"/pinjamanTolak\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 802\n          },\n          __self: this\n        });\n      } else if (getTokenAuth() && getTokenClient()) {\n        return React.createElement(Grid, {\n          container: true,\n          className: \"containerDetail\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 806\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          item: true,\n          sm: 12,\n          xs: 12,\n          style: {\n            maxHeight: 50\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 808\n          },\n          __self: this\n        }, React.createElement(TitleBar, {\n          title: 'Pinjaman - Detail',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 810\n          },\n          __self: this\n        })), React.createElement(Grid, {\n          item: true,\n          sm: 12,\n          xs: 12,\n          style: {\n            padding: 10,\n            marginBottom: 20,\n            boxShadow: '0px -3px 25px rgba(99,167,181,0.24)',\n            WebkitBoxShadow: '0px -3px 25px rgba(99,167,181,0.24)',\n            borderRadius: '15px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 816\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          container: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 822\n          },\n          __self: this\n        }, React.createElement(DialogComponent, {\n          title: \"Konfirmasi \".concat(this.state.title),\n          openDialog: this.state.dialog,\n          message: this.state.message,\n          type: \"form\",\n          onClose: this.btnConfirmationDialog,\n          noNextStep: !this.state.permissionPaidInstallment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 824\n          },\n          __self: this\n        }), React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          sm: 12,\n          style: {\n            display: 'flex',\n            justifyContent: 'flex-end'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 833\n          },\n          __self: this\n        }, React.createElement(ActionComponent, {\n          permissionApprove: checkPermission(\"lender_loan_approve_reject\") && this.state.status === 'processing' ? function (e, nextStep) {\n            return _this2.btnConfirmationDialog(e, nextStep, 'terima');\n          } : null,\n          permissionReject: checkPermission(\"lender_loan_approve_reject\") && this.state.status === 'processing' ? function (e, nextStep) {\n            return _this2.btnConfirmationDialog(e, nextStep, 'tolak');\n          } : null,\n          permissionPaid: checkPermission(\"lender_loan_patch_payment_status\") && this.state.status === 'approved' && this.state.disburse_status === 'confirmed' && this.state.payment_status !== 'paid' ? function (e, nextStep) {\n            return _this2.btnConfirmationDialog(e, nextStep, 'paidAll');\n          } : null,\n          onCancel: this.btnBack,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 834\n          },\n          __self: this\n        })), React.createElement(Grid, {\n          item: true,\n          sm: 12,\n          xs: 12,\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 842\n          },\n          __self: this\n        }, this.state.errorMessage), this.state.detailInfo && React.createElement(GridDetail, {\n          gridLabel: [4, 5],\n          noTitleLine: true,\n          background: true,\n          label: this.state.detailInfo.title,\n          data: this.state.detailInfo.value,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 848\n          },\n          __self: this\n        }), this.state.pinjamanInfo && React.createElement(GridDetail, {\n          title: 'Informasi Pinjaman',\n          gridLabel: [5, 5],\n          label: this.state.pinjamanInfo.title,\n          data: this.state.pinjamanInfo.value,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 860\n          },\n          __self: this\n        }), this.state.borrowerInfo && React.createElement(GridDetail, {\n          title: 'Informasi Nasabah',\n          gridLabel: [4, 6],\n          label: this.state.borrowerInfo.title,\n          data: this.state.borrowerInfo.value,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 870\n          },\n          __self: this\n        }), this.state.feesInfo && React.createElement(GridDetail, {\n          gridLabel: [4, 4],\n          title: 'Informasi Biaya',\n          label: this.state.feesInfo.title,\n          data: this.state.feesInfo.value,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 881\n          },\n          __self: this\n        }), this.state.formInfo && React.createElement(GridDetail, {\n          gridLabel: [4, 4],\n          title: 'Informasi Form',\n          label: this.state.formInfo.title,\n          data: this.state.formInfo.value,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 892\n          },\n          __self: this\n        }), this.state.installmentInfo && React.createElement(GridDetail, {\n          gridLabel: [4, 4],\n          title: 'Informasi Cicilan',\n          label: [],\n          data: [],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 901\n          },\n          __self: this\n        }), this.state.installmentInfo && React.createElement(TableComponent, {\n          id: 'id',\n          paging: this.state.paging,\n          loading: this.state.loadingPage,\n          columnData: columnDataUser,\n          data: this.state.installmentInfo,\n          page: this.state.page,\n          rowsPerPage: this.state.rowsPerPage,\n          totalData: this.state.totalData,\n          onChangePage: this.onChangePage,\n          permissionPaid: function permissionPaid(e, id) {\n            return _this2.btnPaidAndDetail(e, id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 910\n          },\n          __self: this\n        }))));\n      } else {\n        return React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 930\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return Main;\n}(React.Component);\n\nexport default Main;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_fe/src/components/pinjaman/pinjamanDetail.js"],"names":["React","Redirect","swal","getPermintaanPinjamanDetailFunction","patchInstallmentFunction","patchLoanFunction","patchInstallmentBulkFunction","Loading","checkPermission","handleFormatDate","findAmount","formatMoney","decryptImage","getTokenAuth","getTokenClient","GridDetail","TitleBar","Grid","ActionComponent","DialogComponent","TableComponent","columnDataUser","id","label","hidden","type","Main","_isMounted","state","errorMessage","endDate","diterima","dicairkan","dipinjam","ditolak","loading","dateApprove","reason","dialog","statusPinjaman","status","disburse_status","payment_status","paymentNote","paymentStatus","title","rowsPerPage","page","totalData","paging","loadingPage","permissionPaidInstallment","dataListPaid","getDataDetail","refresh","permissionBtnPaid","flag","param","idLoan","props","match","params","data","error","setState","rows","dataLender","pinjamanInfo","getPinjamanInfo","detailInfo","getDetailInfo","feesInfo","getFeesInfo","fees","loan_amount","formInfo","getFormInfo","form_info","JSON","parse","borrowerInfo","getBorrowerInfo","borrower_info","allInstallment","installment_details","getInstallmentInfo","payment_note","installmentParam","installment","installmentInfo","key","parseInt","newInstallment","paid_status_string","paid_status","paid_amount_string","paid_amount","total","Math","ceil","parseFloat","loan_payment","interest_payment","penalty","push","value","borrower_name","borrower","bank_account","color","category","agent_name","agent_provider_name","birthday","phone","idcard_number","taxid_number","monthly_income","occupation","other_income","other_incomesource","total_loan","product","interest","loan_intention","intention_details","created_at","disburse_amount","approval_date","disburse_date","disburse_date_changed","reject_reason","loanAmount","arrayFee","description","amount","form","arrayForm","answers","btnTerimaPinjaman","toString","constructDate","btnTolakPinjaman","reject","trim","btnPaidInstallment","patchInstallment","dataDetail","detailPaid","idInstallment","newData","underpayment","due_date","note","btnPaidAll","patchLoan","patchInstallmentBulk","btnBack","history","action","goBack","window","back","handleEndChange","date","settingMessage","onChangeTextField","e","labelData","number","dataText","target","isNaN","onChangeTextFieldForm","dateParam","onChangeCheckbox","onChangeDropDown","btnPaidAndDetail","idPaid","newPaid","btnConfirmationDialog","newDate","getFullYear","getMonth","getDate","statusPinjamanParam","message","function","period","disabled","numeric","paid_date","nextStep","onChangePage","current","maxHeight","padding","marginBottom","boxShadow","WebkitBoxShadow","borderRadius","display","justifyContent","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport swal from 'sweetalert';\r\nimport { getPermintaanPinjamanDetailFunction, patchInstallmentFunction, patchLoanFunction, patchInstallmentBulkFunction } from './saga';\r\nimport Loading from '../subComponent/Loading';\r\nimport { checkPermission, handleFormatDate, findAmount, formatMoney, decryptImage } from '../global/globalFunction'\r\nimport { getTokenAuth, getTokenClient } from '../index/token';\r\nimport GridDetail from '../subComponent/GridDetail'\r\nimport TitleBar from '../subComponent/TitleBar';\r\nimport { Grid } from '@material-ui/core';\r\nimport ActionComponent from '../subComponent/ActionComponent';\r\nimport DialogComponent from '../subComponent/DialogComponent';\r\nimport TableComponent from '../subComponent/TableComponent';\r\n\r\nconst columnDataUser = [\r\n    {\r\n        id: 'id',\r\n        label: 'ID Pinjaman',\r\n        hidden: true,\r\n    },\r\n    {\r\n        id: 'period',\r\n        label: 'Period',\r\n    },\r\n    {\r\n        id: 'due_date',\r\n        label: 'Tanggal Jatuh Tempo',\r\n        type:'datetime'\r\n    },\r\n    {\r\n        id: 'total',\r\n        label: 'Total Cicilan',\r\n    },\r\n    {\r\n        id: 'paid_amount_string',\r\n        label: 'Total Pembayaran',\r\n    },\r\n    {\r\n        id: 'paid_date',\r\n        label: 'Tanggal Pembayaran',\r\n        type:'datetime'\r\n    },\r\n    {\r\n        id: 'paid_status_string',\r\n        label: 'Status',\r\n    },\r\n  \r\n]\r\n\r\nclass Main extends React.Component{\r\n    _isMounted=false\r\n\r\n    state = {\r\n        errorMessage:'',\r\n        endDate:null,\r\n        diterima:false,\r\n        dicairkan: false,\r\n        dipinjam:false,\r\n        ditolak:false,\r\n        loading:true,\r\n        dateApprove:null,\r\n        reason:'',\r\n        dialog: false,\r\n        statusPinjaman: '',\r\n        status:'',\r\n        disburse_status: '',\r\n        payment_status: '',\r\n        paymentNote: '',\r\n        paymentStatus: '',\r\n        title:'',\r\n        rowsPerPage: 12,\r\n        page: 1,\r\n        totalData: 0,\r\n        paging: true,\r\n        loadingPage: false,\r\n        permissionPaidInstallment: false,\r\n        dataListPaid: [\r\n            {\r\n                id: 'processing',\r\n                label: 'Dalam Proses'\r\n            },\r\n            {\r\n                id: 'paid',\r\n                label: 'Telah Lunas'\r\n            },\r\n            {\r\n                id: 'failed',\r\n                label: 'Gagal Bayar'\r\n            },\r\n        ]\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted=true\r\n        this.getDataDetail()\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this._isMounted=false\r\n    }\r\n\r\n    getDataDetail =()=>{\r\n        this._isMounted && this.refresh()\r\n    }\r\n\r\n    permissionBtnPaid = () => {\r\n        let flag = false;\r\n\r\n        if(\r\n            checkPermission('lender_loan_installment_approve') &&\r\n            this.state.status && this.state.status === 'approved' &&\r\n            this.state.disburse_status && this.state.disburse_status === 'confirmed' &&\r\n            this.state.payment_status && this.state.payment_status === 'processing'\r\n        ) {\r\n            flag = true;\r\n        }\r\n\r\n        return flag\r\n    }\r\n\r\n    refresh = async function(status){\r\n        const param = {}\r\n        param.idLoan = this.props.match.params.idLoan \r\n\r\n        if(status) {\r\n            if(status === 'terima') {\r\n                param.dateApprove = this.state.dateApprove\r\n            } else if(status === 'tolak') {\r\n                param.reason = this.state.reason\r\n            }\r\n        }\r\n\r\n        const data = await getPermintaanPinjamanDetailFunction (param,status)\r\n\r\n        if(data){\r\n            if(!data.error){\r\n                if(status && status === 'terima'){\r\n                    swal(\"Permintaan Pinjaman\",\"Diterima\",\"success\")\r\n                    this._isMounted && this.setState({errorMessage:'',diterima:true, loading:false})\r\n                } else if(status && status === 'tolak'){\r\n                    swal(\"Permintaan Pinjaman\",\"Ditolak\",\"warning\")\r\n                    this._isMounted && this.setState({errorMessage:'',ditolak:true , loading:false})\r\n                } else {                 \r\n                    const rows = data.dataLender;\r\n\r\n                    const pinjamanInfo = this.getPinjamanInfo(rows);\r\n                    const detailInfo = this.getDetailInfo(rows);\r\n                    const feesInfo = this.getFeesInfo(data.dataLender && data.dataLender.fees, rows && rows.loan_amount)\r\n                    const formInfo = this.getFormInfo(data.dataLender && data.dataLender.form_info && (typeof(data.dataLender.form_info) !== 'object' ? JSON.parse(data.dataLender.form_info) : data.dataLender.form_info))\r\n                    const borrowerInfo = this.getBorrowerInfo(data.dataLender && data.dataLender.borrower_info);                 \r\n                    const allInstallment = data.dataLender && data.dataLender.installment_details;\r\n\r\n                    if(checkPermission('lender_loan_request_list_installment_list')) {\r\n                        this.getInstallmentInfo(data.dataLender.installment_details);\r\n                    }\r\n                    \r\n                    this.setState({\r\n                        pinjamanInfo,\r\n                        formInfo,\r\n                        feesInfo,\r\n                        borrowerInfo,\r\n                        detailInfo,\r\n                        allInstallment,\r\n                        status: rows && rows.status,\r\n                        disburse_status: rows && rows.disburse_status,\r\n                        payment_status: rows && rows.payment_status,\r\n                        paymentStatus: rows && rows.payment_status,\r\n                        paymentNote: rows && rows.payment_note,\r\n                        loading:false,\r\n                        loadingPage: false,\r\n                    }, () => {\r\n                        if(status && status === 'paid') {\r\n                            swal(\"Perubahan Detail Cicilan\",\"Berhasil\",\"success\")\r\n                        } else if(status && status === 'paidLoan') {\r\n                            swal(\"Status Pinjaman diubah\",\"Berhasil\",\"success\")\r\n                        }\r\n                    })\r\n                    \r\n                }\r\n                \r\n            }else{\r\n                this.setState({errorMessage:data.error, loading:false, loadingPage: false,})\r\n            }\r\n        }\r\n    }\r\n\r\n    getInstallmentInfo = (installmentParam) => {\r\n        const installment = installmentParam || this.state.allInstallment;\r\n        const installmentInfo = [];\r\n        const page = this.state.page;\r\n        const rowsPerPage = this.state.rowsPerPage;\r\n        let totalData = 0;\r\n        \r\n        if(installment) {\r\n            for(const key in installment) {\r\n                if(parseInt(key) >= (rowsPerPage * (page-1)) && parseInt(key) < (rowsPerPage * page)) {\r\n                    const newInstallment = installment[key];\r\n\r\n                    newInstallment.paid_status_string = newInstallment.paid_status ? 'Sudah Bayar' : 'Belum Bayar';\r\n                    newInstallment.paid_amount_string = formatMoney(parseInt(newInstallment.paid_amount || 0))\r\n                    newInstallment.total = formatMoney(Math.ceil(parseFloat(newInstallment.loan_payment + newInstallment.interest_payment + newInstallment.penalty)))\r\n                    installmentInfo.push(installment[key])\r\n                }\r\n                totalData += 1;\r\n            }\r\n        }\r\n        \r\n        this.setState({totalData, loadingPage: false, installmentInfo})\r\n        \r\n    }\r\n\r\n    getDetailInfo = (rows) => {\r\n        let pinjamanInfo = null;\r\n\r\n        if(rows) {\r\n            pinjamanInfo = {\r\n                title: [\r\n                    ['ID Pinjaman','Nasabah', 'Rekening'],\r\n                    ['Status Pinjaman','Kategori', 'Agen/ AE'],\r\n                ],\r\n                value: [\r\n                    [\r\n                        rows.id,\r\n                        `${rows.borrower_name || '-'} ( ${rows.borrower || '-'} )`,\r\n                        rows.bank_account,\r\n                    ],\r\n                    [\r\n                        rows.status &&   rows.status === \"processing\" ? {value:\"Dalam Proses\", color:'blue'} : \r\n                        rows.status === \"approved\" && rows.disburse_status ===\"confirmed\" ? {value:\"Telah Dicairkan\", color:'blue'} :\r\n                        rows.status ==='rejected'? {value:\"Ditolak\", color:'red'} :\r\n                        rows.status === 'approved'? {value:\"Diterima\", color:'green'} : null,\r\n                        rows.category === \"\"? \"Personal\":\r\n                        rows.category===\"account_executive\"?\"Account Executive\":\"Agent\",\r\n                        `${rows.agent_name?rows.agent_name:\"-\"} (${rows.agent_provider_name?rows.agent_provider_name:\"-\"})`\r\n                    ],\r\n                ],\r\n            }\r\n\r\n            if(rows.status === 'approved' && rows.disburse_status === 'confirmed') {\r\n                pinjamanInfo.title[0].push('Status Pembayaran')\r\n                pinjamanInfo.value[0].push(rows.payment_status && (rows.payment_status === 'processing' ? {value:\"Dalam Proses\", color:'blue'}  : rows.payment_status === 'paid' ? {value:\"Telah Lunas\", color:'green'}  : rows.payment_status === 'failed' ? {value:\"Gagal Bayar\", color:'red'} : '-'))\r\n                pinjamanInfo.title[1].push('Catatan Pembayaran')\r\n                pinjamanInfo.value[1].push(rows.payment_note)\r\n            }\r\n        }\r\n        \r\n\r\n        return pinjamanInfo;\r\n    }\r\n\r\n    getBorrowerInfo = (borrower) => {\r\n        let borrowerInfo = null;\r\n\r\n        if(borrower) {\r\n            borrowerInfo = {\r\n                title: [\r\n                    ['Tanggal lahir','Nomor Telepon', 'Nomor KTP', 'Nomor NPWP'],\r\n                    ['Pendapatan', 'Sumber Pendapatan', 'Pendapatan Lainnya','Sumber Pendapatan Lainnya'],\r\n                ],\r\n                value: [\r\n                    [handleFormatDate(borrower.birthday), borrower.phone, borrower.idcard_number, borrower.taxid_number ],\r\n                    [formatMoney(borrower.monthly_income), borrower.occupation, formatMoney(borrower.other_income), borrower.other_incomesource]\r\n                ],\r\n            }\r\n        }\r\n\r\n        return borrowerInfo;\r\n    }\r\n\r\n    getPinjamanInfo = (rows) => {\r\n        let pinjamanInfo = null;\r\n\r\n        if(rows) {\r\n            pinjamanInfo = {\r\n                title: [\r\n                    ['Total Pinjaman','Pinjaman Pokok', 'Tenor'],\r\n                    ['Produk', 'Bunga', 'Tujuan Pinjaman','Keterangan'],\r\n                    ['Tanggal Pengajuan']\r\n                ],\r\n                value: [\r\n                    [formatMoney(rows.total_loan),formatMoney(rows.loan_amount), rows.installment],\r\n                    [rows.product,`${rows.interest}%`, rows.loan_intention, rows.intention_details],\r\n                    [handleFormatDate(rows.created_at)]\r\n                ],\r\n            }\r\n    \r\n            if(rows.status === 'approved') {\r\n                pinjamanInfo.title[0].push('Total Pencairan')\r\n                pinjamanInfo.value[0].push(formatMoney(rows.disburse_amount))\r\n                pinjamanInfo.title[2].push('Tanggal Penerimaan')\r\n                pinjamanInfo.value[2].push(handleFormatDate(rows.approval_date))\r\n                pinjamanInfo.title[2].push('Tanggal Pencairan')\r\n                pinjamanInfo.value[2].push(`${handleFormatDate(rows.disburse_date)} ${rows.disburse_date_changed ? '(Telah Diubah)' : ''}`)\r\n            } else if(rows.status === 'rejected') {\r\n                pinjamanInfo.title[2].push('Tanggal Penolakan')\r\n                pinjamanInfo.value[2].push(handleFormatDate(rows.approval_date))\r\n                pinjamanInfo.title[2].push('Alasan Penolakan')\r\n                pinjamanInfo.value[2].push(rows.reject_reason)\r\n            }\r\n        }\r\n        \r\n\r\n        return pinjamanInfo;\r\n    }\r\n\r\n    getFeesInfo = (fees, loanAmount) => {\r\n        let feesInfo = null\r\n        \r\n        if(fees) {\r\n            feesInfo = {\r\n                title: [],\r\n                value: [],\r\n            }\r\n\r\n            let arrayFee = 0;\r\n\r\n            for(const key in fees) {\r\n                if(arrayFee === 2) {\r\n                    arrayFee = 0;\r\n                }\r\n\r\n                if(!feesInfo.title[arrayFee]) {\r\n                    feesInfo.title[arrayFee] = []\r\n                };\r\n                feesInfo.title[arrayFee].push(fees[key].description)\r\n\r\n                if(!feesInfo.value[arrayFee]) {\r\n                    feesInfo.value[arrayFee] = []\r\n                };\r\n                feesInfo.value[arrayFee].push(findAmount(fees[key] && fees[key].amount, loanAmount))\r\n\r\n                arrayFee += 1;\r\n            }\r\n        }\r\n\r\n        return feesInfo;\r\n    }\r\n\r\n    getFormInfo = (form) => {\r\n        let formInfo = null;\r\n        \r\n        if(form) { \r\n            formInfo = {\r\n                title: [],\r\n                value: [],\r\n            }\r\n\r\n            let arrayForm = 0;\r\n\r\n            for(const key in form) {\r\n                if(arrayForm === 3) {\r\n                    arrayForm = 0\r\n                }\r\n\r\n                if(!formInfo.title[arrayForm]) {\r\n                    formInfo.title[arrayForm] = []\r\n                };\r\n                formInfo.title[arrayForm].push(form[key].label)\r\n\r\n                if(!formInfo.value[arrayForm]) {\r\n                    formInfo.value[arrayForm] = []\r\n                };\r\n\r\n                if(form[key].type === 'image') {\r\n                    formInfo.value[arrayForm].push({\r\n                        type:'image',\r\n                        value: form[key].answers && decryptImage(form[key].answers),\r\n                    })\r\n                } else {\r\n                    formInfo.value[arrayForm].push(form[key].answers)\r\n                }\r\n\r\n                arrayForm += 1;\r\n            }\r\n        }\r\n        \r\n        return formInfo;\r\n    }\r\n    \r\n    btnTerimaPinjaman = ()=>{\r\n        const {endDate} = this.state;\r\n        \r\n        if (endDate === null || (endDate && endDate.toString() === 'Invalid Date')){\r\n            this.setState({errorMessage:\"Harap Masukkan Tanggal Pencairan dengan benar\"})\r\n        }else{\r\n            this.setState({dateApprove: this.constructDate(endDate), loading: true},()=>{\r\n                this.refresh('terima')\r\n            });\r\n        }\r\n    }\r\n\r\n    btnTolakPinjaman = ()=>{\r\n        const reject = this.state.reason\r\n\r\n        if(!reject || reject.trim()===''){\r\n            this.setState({errorMessage:\"Alasan Penolakan Kosong - Harap Cek Ulang\"})\r\n        }else{\r\n            this.setState({loading: true})\r\n            this.refresh('tolak')\r\n        }\r\n      \r\n    }\r\n\r\n    btnPaidInstallment = () => {\r\n        this.setState({loading: true}, () => {\r\n            this.patchInstallment()\r\n        });\r\n    }\r\n\r\n    patchInstallment = async function() {\r\n        const dataDetail = this.state.detailPaid;\r\n\r\n        const param = {\r\n            idLoan: this.props.match.params.idLoan,\r\n            idInstallment: dataDetail && dataDetail.id,\r\n            newData : {\r\n                paid_status: dataDetail && dataDetail.paid_status,\r\n                paid_amount: parseFloat((dataDetail && dataDetail.paid_amount) || 0),\r\n                underpayment: dataDetail && dataDetail.paid_amount && dataDetail.loan_payment && dataDetail.interest_payment && dataDetail.penalty &&\r\n                parseFloat((dataDetail.loan_payment + dataDetail.interest_payment + dataDetail.penalty - dataDetail.paid_amount) || 0),\r\n                penalty: parseFloat((dataDetail && dataDetail.penalty) || 0),\r\n                due_date: dataDetail && dataDetail.due_date && this.constructDate(dataDetail.due_date),\r\n                note: dataDetail && dataDetail.note\r\n            }\r\n            \r\n        }\r\n\r\n        const data = await patchInstallmentFunction(param);\r\n\r\n        if(data) {\r\n            if(!data.error) {\r\n                this.refresh('paid')\r\n            } else {\r\n                this.setState({errorMessage:data.error, loading:false, loadingPage: false,})\r\n            }\r\n        }\r\n    }\r\n\r\n    btnPaidAll = () => {\r\n        this.setState({loading: true}, () => {\r\n            this.patchLoan()\r\n        });\r\n    }\r\n\r\n    patchLoan = async function() {\r\n        const param = {\r\n            idLoan: this.props.match.params.idLoan,\r\n            newData : {\r\n                payment_status: this.state.paymentStatus,\r\n                payment_note: this.state.paymentNote,\r\n            }\r\n            \r\n        }\r\n\r\n        const data = await patchLoanFunction(param);\r\n\r\n        if(data) {\r\n            if(!data.error) {\r\n                this.refresh('paidLoan')\r\n            } else {\r\n                this.setState({errorMessage:data.error, loading:false, loadingPage: false,})\r\n            }\r\n        }\r\n    }\r\n\r\n    patchInstallmentBulk = async function() {\r\n        this.setState({loading: true})\r\n        const param = {\r\n            idLoan: this.props.match.params.idLoan,\r\n            newData: [],\r\n        }\r\n\r\n        const allInstallment = this.state.allInstallment;\r\n\r\n        for(const key in allInstallment) {\r\n            if(!allInstallment[key].paid_status || (allInstallment[key].paid_status && allInstallment[key].paid_status === false)) {\r\n                param.newData.push(\r\n                    {\r\n                        id: allInstallment[key].id,\r\n                        paid_status: true,\r\n                        paid_amount: allInstallment[key].loan_payment + allInstallment[key].interest_payment + allInstallment[key].penalty,\r\n                        underpayment: allInstallment[key].underpayment,\r\n                        penalty: allInstallment[key].penalty,\r\n                        due_date: this.constructDate(allInstallment[key].due_date),\r\n                        note: allInstallment[key].note,\r\n                    }\r\n                )\r\n            }\r\n        }\r\n        \r\n\r\n        const data = await patchInstallmentBulkFunction(param);\r\n\r\n        if(data) {\r\n            if(!data.error) {\r\n                this.patchLoan()\r\n            } else {\r\n                this.setState({errorMessage:data.error, loading:false, loadingPage: false})\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    btnBack = ()=>{\r\n        \r\n        if(this.props.history && this.props.history.action && this.props.history.action !== 'POP') {\r\n            this.props.history.goBack()\r\n        } else if(this.state.status === 'processing') {\r\n            this.setState({dipinjam: true})\r\n        } else if(this.state.status === 'approved' && this.state.disburse_status === 'confirmed') {\r\n            this.setState({dicairkan: true})\r\n        } else if(this.state.status === 'approved' && this.state.disburse_status === 'processing') {\r\n            this.setState({diterima: true})\r\n        } else if(this.state.status === 'rejected') {\r\n            this.setState({ditolak: true})\r\n        } else {\r\n            window.history.back()\r\n        }\r\n        \r\n    }\r\n\r\n    handleEndChange = (date)=> {\r\n        this.setState({\r\n          endDate: date\r\n        },() => {\r\n            this.settingMessage()\r\n        });\r\n    }\r\n\r\n    onChangeTextField = (e, labelData, number) => {\r\n        let dataText = e.target.value;\r\n\r\n        if(number && isNaN(dataText)) {           \r\n            dataText = this.state[labelData];          \r\n        }\r\n        \r\n        this.setState({[labelData]:dataText}, () => {          \r\n            this.settingMessage()            \r\n        })\r\n    }\r\n\r\n    onChangeTextFieldForm = (e, labelData, number, dateParam) => {\r\n        let detailPaid = this.state.detailPaid;\r\n        \r\n        if(dateParam) {\r\n            detailPaid[labelData] = e\r\n        } else {\r\n            if(!number || (number && !isNaN(e.target.value))) {           \r\n                detailPaid[labelData] = e.target.value         \r\n            }             \r\n        }\r\n        \r\n        this.setState({detailPaid}, () => {\r\n            this.settingMessage()\r\n        })\r\n    }\r\n    \r\n    onChangeCheckbox = (e, labelData) => {\r\n        let detailPaid = this.state.detailPaid;\r\n\r\n        detailPaid[labelData] = !detailPaid[labelData];\r\n\r\n        this.setState({detailPaid}, () => {\r\n            this.settingMessage();\r\n        })\r\n    }\r\n\r\n    onChangeDropDown = (e, labelData) => {\r\n        this.setState({[labelData]:e.target.value}, () => {\r\n            this.settingMessage()\r\n        })\r\n    }\r\n\r\n    btnPaidAndDetail = (e, idPaid) => {\r\n        const newPaid = this.state.allInstallment;\r\n            \r\n        let detailPaid = this.state.detailPaid;\r\n        \r\n        if(idPaid) {\r\n            for(const key in newPaid) {\r\n                if(newPaid[key].id.toString() === idPaid.toString()) {\r\n                    detailPaid = newPaid[key];\r\n                    break;\r\n                }\r\n            }\r\n\r\n            \r\n        }\r\n\r\n        this.setState({detailPaid}, () => {\r\n            this.btnConfirmationDialog(e, false, 'paidInstallment')\r\n        })\r\n    }\r\n\r\n    constructDate = (date) => {\r\n        let newDate = date;\r\n\r\n        if(typeof(date) === 'object') {\r\n            newDate = `${date.getFullYear()}-${date.getMonth() + 1 < 10 ? `0${date.getMonth() + 1}`: date.getMonth() + 1}-${date.getDate() < 10 ? `0${date.getDate()}` : date.getDate()}`\r\n        } \r\n\r\n        return newDate;\r\n    }\r\n\r\n    settingMessage = (statusPinjamanParam) => {\r\n        let message = this.state.message;\r\n        let title = this.state.title;\r\n        let permissionPaidInstallment = this.state.permissionPaidInstallment;\r\n        let statusPinjaman = statusPinjamanParam || this.state.statusPinjaman;\r\n\r\n        if(statusPinjaman && statusPinjaman === 'terima') {\r\n            title = 'Persetujuan Pinjaman';\r\n            message = [\r\n                {\r\n                    id: 'endDate',\r\n                    title: 'Mohon isi Tanggal Pencairan',\r\n                    type:'date',\r\n                    value:this.state.endDate,\r\n                    function:this.handleEndChange,\r\n                }\r\n            ]\r\n            permissionPaidInstallment = false;\r\n        } else if(statusPinjaman && statusPinjaman === 'tolak') {\r\n            title = 'Penolakan Pinjaman'\r\n            message = [\r\n                {\r\n                    id: 'reason',\r\n                    title: 'Mohon isi Alasan Penolakan',\r\n                    type: 'textfield',\r\n                    value: this.state.reason,\r\n                    function: this.onChangeTextField,\r\n                }\r\n            ]\r\n            permissionPaidInstallment = false;\r\n        } else if(statusPinjaman && statusPinjaman === 'paidInstallment') {\r\n            title = 'Pembayaran Cicilan'          \r\n            let detailPaid = this.state.detailPaid;\r\n\r\n            if(detailPaid) {\r\n\r\n                permissionPaidInstallment =  detailPaid.paid_status_string === 'Sudah Bayar' || !this.permissionBtnPaid(); \r\n                \r\n                message = [\r\n                    {\r\n                        id: 'period',\r\n                        title: 'Period',\r\n                        type: 'textfield',\r\n                        value: detailPaid.period || 0,\r\n                        disabled: true,\r\n                    },\r\n                    {\r\n                        id: 'due_date',\r\n                        title: 'Tanggal Jatuh Tempo',\r\n                        type: 'date',\r\n                        value: detailPaid.due_date || '',\r\n                        function: this.onChangeTextFieldForm,\r\n                        disabled: permissionPaidInstallment\r\n                    },\r\n                    {\r\n                        id: 'loan_payment',\r\n                        title: 'Cicilan Pokok',\r\n                        type: 'textfield',\r\n                        value: formatMoney(detailPaid.loan_payment || 0) ,\r\n                        disabled: true,\r\n                    },\r\n                    {\r\n                        id: 'interest_payment',\r\n                        title: 'Cicilan Bunga',\r\n                        type: 'textfield',\r\n                        value: formatMoney(detailPaid.interest_payment || 0) ,\r\n                        disabled: true,\r\n                    },\r\n                    {\r\n                        id: 'penalty',\r\n                        title: 'Denda',\r\n                        type: 'textfield',\r\n                        numeric: permissionPaidInstallment ? false : true,\r\n                        value: permissionPaidInstallment ? formatMoney(parseFloat(detailPaid.penalty || 0)) : detailPaid.penalty,\r\n                        function: this.onChangeTextFieldForm,\r\n                        disabled: permissionPaidInstallment\r\n                    },\r\n                    {\r\n                        id: 'total',\r\n                        title: 'Total harus Bayar',\r\n                        type: 'textfield',\r\n                        value: formatMoney(Math.ceil(parseFloat(detailPaid.penalty || 0) + parseFloat(detailPaid.interest_payment) + parseFloat(detailPaid.loan_payment))),\r\n                        function: this.onChangeTextFieldForm,\r\n                        disabled: true\r\n                    },\r\n                    {\r\n                        id: 'paid_amount',\r\n                        title: 'Total Pembayaran',\r\n                        type: 'textfield',\r\n                        numeric: permissionPaidInstallment ? false : true,\r\n                        value: permissionPaidInstallment ? formatMoney(Math.ceil(parseFloat(detailPaid.paid_amount || 0))) : detailPaid.paid_amount,\r\n                        function: this.onChangeTextFieldForm,\r\n                        disabled: permissionPaidInstallment\r\n                    },\r\n                    {\r\n                        id: 'paid_date',\r\n                        title: 'Tanggal Pembayaran',\r\n                        type: 'textfield',\r\n                        value: handleFormatDate(detailPaid.paid_date || ''),\r\n                        disabled: true,\r\n                    },\r\n                    {\r\n                        id: 'paid_status',\r\n                        title: 'Status Pembayaran',\r\n                        label: 'Terbayar',\r\n                        type: 'checkbox',\r\n                        value: detailPaid.paid_status || false,\r\n                        function: this.onChangeCheckbox,\r\n                        disabled: permissionPaidInstallment\r\n                    },\r\n                    {\r\n                        id: 'note',\r\n                        title: 'Keterangan',\r\n                        type: 'textfield',\r\n                        value: detailPaid.note || '',\r\n                        function: this.onChangeTextFieldForm,\r\n                        disabled: permissionPaidInstallment\r\n                    }\r\n                ]\r\n                \r\n            }\r\n        } else if(statusPinjaman && statusPinjaman === 'paidAll') {\r\n            title = 'Perubahan Status Pembayaran'\r\n            message = [\r\n                {\r\n                    id: 'paymentStatus',\r\n                    title: 'Status Pembayaran',\r\n                    type: 'dropdown',\r\n                    data: this.state.dataListPaid,\r\n                    value: this.state.paymentStatus,\r\n                    function: this.onChangeDropDown,\r\n                },\r\n                {\r\n                    id: 'paymentNote',\r\n                    title: 'Catatan Pembayaran',\r\n                    type: 'textfield',\r\n                    value: this.state.paymentNote,\r\n                    function: this.onChangeTextField,\r\n                }\r\n            ]\r\n            permissionPaidInstallment = false;\r\n        }\r\n        \r\n        this.setState({title, message, permissionPaidInstallment: !permissionPaidInstallment})\r\n        \r\n    }\r\n\r\n    btnConfirmationDialog = (e, nextStep, statusPinjaman) => {\r\n\r\n        this.settingMessage(statusPinjaman)\r\n        this.setState({dialog: !this.state.dialog, statusPinjaman});\r\n  \r\n        if(nextStep) {\r\n            if(this.state.statusPinjaman === 'terima') {\r\n                this.btnTerimaPinjaman()\r\n            } else if (this.state.statusPinjaman === 'tolak') {\r\n                this.btnTolakPinjaman()\r\n            } else if (this.state.statusPinjaman === 'paidInstallment') {\r\n                this.btnPaidInstallment()\r\n            } else if (this.state.statusPinjaman === 'paidAll') {\r\n                if(this.state.paymentStatus && this.state.paymentStatus !== 'paid') {\r\n                    this.btnPaidAll()\r\n                } else if(this.state.paymentStatus && this.state.paymentStatus === 'paid') {\r\n                    this.patchInstallmentBulk()\r\n                }\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\n    onChangePage = (current) => {\r\n        this.setState({loadingPage:true,page:current},()=>{\r\n            this.getInstallmentInfo(this.state.allInstallment)\r\n        })\r\n      }\r\n\r\n    render(){\r\n        if(this.state.loading){\r\n            return(\r\n                <Loading\r\n                    title={'Pinjaman - Detail'}\r\n                /> \r\n            )\r\n        } else if(this.state.dipinjam){\r\n            return (\r\n                <Redirect to='/permintaanPinjaman' />\r\n            )   \r\n        } else if(this.state.dicairkan){\r\n            return (\r\n                <Redirect to='/pencairanList' />\r\n            )   \r\n        } else if(this.state.diterima){\r\n            return (\r\n                <Redirect to='/pinjamanSetuju' />\r\n            )   \r\n        } else if(this.state.ditolak){\r\n            return (\r\n                <Redirect to='/pinjamanTolak' />\r\n            )   \r\n        } else if(getTokenAuth() && getTokenClient()){\r\n            return(\r\n              <Grid container className=\"containerDetail\">\r\n                      \r\n                <Grid item sm={12} xs={12} style={{maxHeight:50}}>\r\n                    \r\n                    <TitleBar\r\n                        title={'Pinjaman - Detail'}\r\n                    />\r\n\r\n                </Grid>\r\n\r\n                <Grid\r\n                    item\r\n                    sm={12} xs={12}\r\n                    style={{padding:10, marginBottom:20, boxShadow:'0px -3px 25px rgba(99,167,181,0.24)', WebkitBoxShadow:'0px -3px 25px rgba(99,167,181,0.24)', borderRadius:'15px'}}                  \r\n                >\r\n                    \r\n                    <Grid container>\r\n\r\n                        <DialogComponent\r\n                            title={`Konfirmasi ${this.state.title}`}\r\n                            openDialog={this.state.dialog}\r\n                            message={this.state.message}\r\n                            type='form'\r\n                            onClose={this.btnConfirmationDialog}\r\n                            noNextStep={!this.state.permissionPaidInstallment}\r\n                        />\r\n\r\n                        <Grid item xs={12} sm={12} style={{display:'flex', justifyContent:'flex-end'}}>\r\n                            <ActionComponent\r\n                                permissionApprove={checkPermission(\"lender_loan_approve_reject\") && this.state.status === 'processing' ? (e, nextStep) => this.btnConfirmationDialog(e, nextStep,'terima') : null}\r\n                                permissionReject={checkPermission(\"lender_loan_approve_reject\") && this.state.status === 'processing' ? (e, nextStep) => this.btnConfirmationDialog(e, nextStep, 'tolak') : null}\r\n                                permissionPaid={checkPermission(\"lender_loan_patch_payment_status\") && this.state.status === 'approved' && this.state.disburse_status === 'confirmed' && this.state.payment_status !== 'paid' ? (e, nextStep) => this.btnConfirmationDialog(e, nextStep, 'paidAll') : null}\r\n                                onCancel={this.btnBack}\r\n                            />\r\n                        </Grid> \r\n\r\n                        <Grid item sm={12} xs={12} style={{color:'red'}}>\r\n                            {this.state.errorMessage}\r\n                        </Grid>\r\n\r\n                        {/* Detail Pinjaman */}\r\n                        {   this.state.detailInfo && \r\n                            <GridDetail\r\n                                gridLabel={[4,5]}\r\n                                noTitleLine\r\n                                background\r\n                                label={this.state.detailInfo.title}\r\n                                data={this.state.detailInfo.value}                 \r\n                            />\r\n                        }\r\n                        \r\n\r\n                        {/* Pinjaman Section */}\r\n                        {   this.state.pinjamanInfo &&\r\n                            <GridDetail\r\n                                title={'Informasi Pinjaman'}\r\n                                gridLabel={[5,5]}\r\n                                label={ this.state.pinjamanInfo.title }\r\n                                data={ this.state.pinjamanInfo.value }                 \r\n                            />\r\n                        }\r\n\r\n                        {/* Nasabah Section */}\r\n                        {   this.state.borrowerInfo &&\r\n                            <GridDetail\r\n                                title={'Informasi Nasabah'}\r\n                                gridLabel={[4,6]}\r\n                                label={this.state.borrowerInfo.title}\r\n                                data={this.state.borrowerInfo.value}                 \r\n                            />\r\n                        }\r\n\r\n                        {/* Fee Section */}\r\n                        {\r\n                            this.state.feesInfo &&\r\n                            <GridDetail\r\n                                gridLabel={[4,4]}\r\n                                title={'Informasi Biaya'}\r\n                                label={this.state.feesInfo.title}\r\n                                data={this.state.feesInfo.value}   \r\n                            />\r\n                        }\r\n                        \r\n                        \r\n                        {/* Form Section */}\r\n                        {   this.state.formInfo && \r\n                            <GridDetail\r\n                                gridLabel={[4,4]}\r\n                                title={'Informasi Form'}\r\n                                label={this.state.formInfo.title}\r\n                                data={this.state.formInfo.value}   \r\n                            />\r\n                        }\r\n\r\n                        {   this.state.installmentInfo &&\r\n                            <GridDetail\r\n                                gridLabel={[4,4]}\r\n                                title={'Informasi Cicilan'}\r\n                                label={[]}\r\n                                data={[]}   \r\n                            />\r\n                        }\r\n\r\n                        {   this.state.installmentInfo &&\r\n                            < TableComponent\r\n                                id={'id'}\r\n                                paging={this.state.paging}\r\n                                loading={this.state.loadingPage}\r\n                                columnData={columnDataUser}\r\n                                data={this.state.installmentInfo}\r\n                                page={this.state.page}\r\n                                rowsPerPage={this.state.rowsPerPage}\r\n                                totalData={this.state.totalData}\r\n                                onChangePage={this.onChangePage}  \r\n                                permissionPaid={(e, id) => this.btnPaidAndDetail(e, id)}        \r\n                            /> \r\n                        }\r\n                                \r\n\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n        )} else {\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport default Main;"]},"metadata":{},"sourceType":"module"}