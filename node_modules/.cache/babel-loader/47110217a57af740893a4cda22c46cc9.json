{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\components\\\\subComponent\\\\Drawer.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/styles\";\nimport classNames from \"classnames\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport List from \"@material-ui/core//List\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { ListItem, ListItemIcon, ListItemText } from \"@material-ui/core/\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport globalConstant from './../global/globalConstant';\nimport LoginBg from \"./../../icons/asira.png\";\nconst drawerWidth = 260;\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    height: \"100%\",\n    zIndex: 1,\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\"\n  },\n  drawerPaper: {\n    position: \"relative\",\n    whiteSpace: \"nowrap\",\n    width: drawerWidth,\n    // transition: theme.transitions.create(\"width\", {\n    //   easing: theme.transitions.easing.sharp,\n    //   duration: theme.transitions.duration.enteringScreen\n    // }),\n    overflowY: \"auto\"\n  },\n  drawerPaperClose: {\n    overflowX: \"hidden\",\n    // transition: theme.transitions.create(\"width\", {\n    //   easing: theme.transitions.easing.sharp,\n    //   duration: theme.transitions.duration.leavingScreen\n    // }),\n    width: \"0px\" // [theme.breakpoints.up(\"sm\")]: {\n    //   width: \"0px\"\n    // }\n\n  },\n  loggedContent: {\n    flexGrow: 1,\n    // backgroundColor: theme.palette.background.default,\n    // paddingLeft: theme.spacing.unit * 3,\n    // paddingRight: theme.spacing.unit * 3,\n    // paddingBottom: theme.spacing.unit * 3,\n    overflowX: \"auto\",\n    height: \"100vh\"\n  },\n  content: {\n    flexGrow: 1,\n    // backgroundColor: theme.palette.background.default,\n    // paddingLeft: theme.spacing.unit * 3,\n    // paddingRight: theme.spacing.unit * 3,\n    // paddingBottom: theme.spacing.unit * 3,\n    overflowX: \"auto\",\n    height: \"100vh\",\n    backgroundImage: \"url(\".concat(LoginBg, \")\"),\n    backgroundSize: \"100% 100%\"\n  },\n  nested: {// paddingLeft: theme.spacing.unit * 9\n  },\n  nestedWithWhiteSpace: {\n    // paddingLeft: theme.spacing.unit * 9,\n    whiteSpace: \"normal\"\n  },\n  nestedChild: {// paddingLeft: theme.spacing.unit * 12\n  },\n  nestedChildWithWhiteSpace: {\n    // paddingLeft: theme.spacing.unit * 12,\n    whiteSpace: \"normal\"\n  },\n  normalWhiteSpace: {\n    whiteSpace: \"normal\"\n  }\n});\n\nclass Draw extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDrawerOpen = () => {\n      this.setState({\n        open: true\n      });\n    };\n\n    this.handleDrawerClose = () => {\n      this.setState({\n        open: false\n      });\n    };\n\n    this.handleOnClick = menu => {\n      // if (menu.name === 'Feedback Corner'){\n      //   if(this.props.user.idBidang === 10) {\n      //     this.props.handleRoute('/Feedback')\n      //   }\n      //   else{\n      //     this.props.handleRoute('/Feedback/Create')\n      //   }\n      // }\n      // else\n      if (this.state[menu.name] !== undefined) {\n        this.setState({\n          [menu.name]: !this.state[menu.name]\n        });\n      } else {\n        this.props.handleRoute(menu.route);\n      }\n    };\n\n    this.filterMenu = () => {\n      const _this$props = this.props,\n            menu = _this$props.menu,\n            user = _this$props.user;\n\n      if (user && menu) {\n        const access = this.props.user.roleAccess; // Get user menu\n\n        const userMenu = [];\n\n        for (let i = 0; i < menu.length; i++) {\n          for (let j = 0; j < access.length; j++) {\n            if (menu[i].id === access[j].idMenu) {\n              menu[i].access = access[j].access;\n              userMenu.push(menu[i]);\n            }\n          }\n        }\n\n        localStorage.setItem(\"menuAll\", JSON.stringify(menu)); // Sort menu\n\n        const userMenuSorted = userMenu.sort((a, b) => a.parentId - b.parentId);\n        const fixedMenu = {};\n        userMenuSorted.forEach(data => {\n          if (data.parentId === 0) {\n            fixedMenu[data.id] = data;\n          } else {\n            for (const key in fixedMenu) {\n              if (fixedMenu[key].id === data.parentId) {\n                fixedMenu[key].toggle = false;\n\n                if (!fixedMenu[key].child) {\n                  fixedMenu[key].child = {};\n                }\n\n                fixedMenu[key].child[data.id] = data;\n              } else {\n                for (const childKey in fixedMenu[key].child) {\n                  const child = fixedMenu[key].child[childKey];\n\n                  if (child.id === data.parentId) {\n                    child.toggle = false;\n\n                    if (!child.child) {\n                      child.child = {};\n                    }\n\n                    child.child[data.id] = data;\n                  }\n                }\n              }\n            }\n          }\n        });\n        return fixedMenu;\n      }\n\n      return null;\n    };\n\n    this.renderCollapse = child => {\n      if (child) {\n        return React.createElement(ExpandLess, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233\n          },\n          __self: this\n        });\n      } else if (child === undefined) {\n        return null;\n      } else if (!child) {\n        return React.createElement(ExpandMore, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.getImage = userMenu => \"data:image/\".concat(userMenu.extension, \";base64,\").concat(userMenu.imagePath);\n\n    this.state = {\n      fetch: false,\n      menu: globalConstant.dataMenu\n    };\n  }\n\n  componentWillReceiveProps() {\n    if (!this.state.fetch && this.props.user) {\n      const userMenu = this.filterMenu();\n      const collapse = {};\n      const countPromises = [];\n\n      for (const key in userMenu) {\n        if (userMenu[key].imagePath && userMenu[key].imagePath !== \"-\") {\n          countPromises.push();\n        } else {\n          countPromises.push();\n        }\n\n        if (userMenu[key].child) {\n          collapse[userMenu[key].name] = false;\n\n          for (const childKey in userMenu[key].child) {\n            const childMenu = userMenu[key].child[childKey];\n\n            if (childMenu.child) {\n              collapse[childMenu.name] = false;\n            }\n          }\n        }\n      }\n\n      Promise.all(countPromises).then(value => {\n        let defaultImage = \"\";\n        value.forEach(data => {\n          const image = JSON.parse(data.config.data).image;\n          const imageName = image;\n          const extension = image.substring(image.lastIndexOf(\".\") + 1, image.length);\n\n          if (!defaultImage && imageName === \"default-image.png\") {\n            defaultImage = data.data;\n          }\n\n          for (const key in userMenu) {\n            if (userMenu[key].imagePath && userMenu[key].imagePath === imageName) {\n              userMenu[key].imagePath = data.data;\n              userMenu[key].extension = extension;\n            } else if (!userMenu[key].imagePath || userMenu[key].imagePath === \"-\") {\n              userMenu[key].imagePath = defaultImage;\n              userMenu[key].extension = extension;\n            }\n          }\n        });\n        this.setState(_objectSpread({}, collapse, {\n          userMenu,\n          fetch: true\n        }));\n      });\n    }\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          classes = _this$props2.classes,\n          open = _this$props2.open;\n    const userMenu = this.state.userMenu;\n    return React.createElement(\"div\", {\n      className: classes.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, this.props.user && React.createElement(Drawer, {\n      variant: \"permanent\",\n      classes: {\n        paper: classNames(classes.drawerPaper, !open && classes.drawerPaperClose)\n      },\n      className: classes.loggedContainer,\n      open: this.props.open // onMouseOver={this.handleDrawerOpen}\n      // onMouseLeave={this.handleDrawerClose}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }), React.createElement(List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, this.state.menu && this.state.menu.map(menuParent => {\n      return React.createElement(ListItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, \" \", React.createElement(\"img\", {\n        src: require(\"./../../icons/\".concat(menuParent.logo)),\n        alt: \"\",\n        width: \"50%\",\n        height: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \" \", menuParent.label));\n    }, this)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    })), React.createElement(\"main\", {\n      className: !this.props.user ? classes.content : classes.loggedContent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, this.props.children, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    })));\n  }\n\n}\n\nDraw.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n  open: PropTypes.bool.isRequired\n};\nexport default withStyles(styles, {\n  withTheme: true\n})(Draw);","map":{"version":3,"sources":["C:\\Users\\pc\\Desktop\\asira_fe\\src\\components\\subComponent\\Drawer.js"],"names":["React","PropTypes","withStyles","classNames","Drawer","List","Divider","ListItem","ListItemIcon","ListItemText","ExpandLess","ExpandMore","Collapse","globalConstant","LoginBg","drawerWidth","styles","theme","root","flexGrow","height","zIndex","overflow","position","display","drawerPaper","whiteSpace","width","overflowY","drawerPaperClose","overflowX","loggedContent","content","backgroundImage","backgroundSize","nested","nestedWithWhiteSpace","nestedChild","nestedChildWithWhiteSpace","normalWhiteSpace","Draw","Component","constructor","props","handleDrawerOpen","setState","open","handleDrawerClose","handleOnClick","menu","state","name","undefined","handleRoute","route","filterMenu","user","access","roleAccess","userMenu","i","length","j","id","idMenu","push","localStorage","setItem","JSON","stringify","userMenuSorted","sort","a","b","parentId","fixedMenu","forEach","data","key","toggle","child","childKey","renderCollapse","getImage","extension","imagePath","fetch","dataMenu","componentWillReceiveProps","collapse","countPromises","childMenu","Promise","all","then","value","defaultImage","image","parse","config","imageName","substring","lastIndexOf","render","classes","paper","loggedContainer","map","menuParent","require","logo","label","children","propTypes","object","isRequired","history","bool","withTheme"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/styles\";\nimport classNames from \"classnames\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport List from \"@material-ui/core//List\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { ListItem, ListItemIcon, ListItemText } from \"@material-ui/core/\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport globalConstant from './../global/globalConstant'\nimport LoginBg from \"./../../icons/asira.png\";\n\nconst drawerWidth = 260;\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    height: \"100%\",\n    zIndex: 1,\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\"\n  },\n  drawerPaper: {\n    position: \"relative\",\n    whiteSpace: \"nowrap\",\n    width: drawerWidth, \n    // transition: theme.transitions.create(\"width\", {\n    //   easing: theme.transitions.easing.sharp,\n    //   duration: theme.transitions.duration.enteringScreen\n    // }),\n    overflowY: \"auto\"\n  },\n  drawerPaperClose: {\n    overflowX: \"hidden\",\n    // transition: theme.transitions.create(\"width\", {\n    //   easing: theme.transitions.easing.sharp,\n    //   duration: theme.transitions.duration.leavingScreen\n    // }),\n    width: \"0px\",\n    // [theme.breakpoints.up(\"sm\")]: {\n    //   width: \"0px\"\n    // }\n  },\n  loggedContent: {\n    flexGrow: 1,\n    // backgroundColor: theme.palette.background.default,\n    // paddingLeft: theme.spacing.unit * 3,\n    // paddingRight: theme.spacing.unit * 3,\n    // paddingBottom: theme.spacing.unit * 3,\n    overflowX: \"auto\",\n    height: \"100vh\"\n  },\n  content: {\n    flexGrow: 1,\n    // backgroundColor: theme.palette.background.default,\n    // paddingLeft: theme.spacing.unit * 3,\n    // paddingRight: theme.spacing.unit * 3,\n    // paddingBottom: theme.spacing.unit * 3,\n    overflowX: \"auto\",\n    height: \"100vh\",\n    backgroundImage: `url(${LoginBg})`,\n    backgroundSize: \"100% 100%\"\n  },\n  nested: {\n    // paddingLeft: theme.spacing.unit * 9\n  },\n  nestedWithWhiteSpace: {\n    // paddingLeft: theme.spacing.unit * 9,\n    whiteSpace: \"normal\"\n  },\n  nestedChild: {\n    // paddingLeft: theme.spacing.unit * 12\n  },\n  nestedChildWithWhiteSpace: {\n    // paddingLeft: theme.spacing.unit * 12,\n    whiteSpace: \"normal\"\n  },\n  normalWhiteSpace: {\n    whiteSpace: \"normal\"\n  }\n});\n\nclass Draw extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fetch: false,\n      menu:globalConstant.dataMenu,\n    };\n  }\n\n  componentWillReceiveProps() {\n    if (!this.state.fetch && this.props.user) {\n      const userMenu = this.filterMenu();\n      const collapse = {};\n      const countPromises = [];\n      for (const key in userMenu) {\n        if (userMenu[key].imagePath && userMenu[key].imagePath !== \"-\") {\n          countPromises.push();\n        } else {\n          countPromises.push();\n        }\n        if (userMenu[key].child) {\n          collapse[userMenu[key].name] = false;\n          for (const childKey in userMenu[key].child) {\n            const childMenu = userMenu[key].child[childKey];\n            if (childMenu.child) {\n              collapse[childMenu.name] = false;\n            }\n          }\n        }\n      }\n      Promise.all(countPromises).then(value => {\n        let defaultImage = \"\";\n        value.forEach(data => {\n          const image = JSON.parse(data.config.data).image;\n          const imageName = image;\n          const extension = image.substring(\n            image.lastIndexOf(\".\") + 1,\n            image.length\n          );\n          if (!defaultImage && imageName === \"default-image.png\") {\n            defaultImage = data.data;\n          }\n          for (const key in userMenu) {\n            if (\n              userMenu[key].imagePath &&\n              userMenu[key].imagePath === imageName\n            ) {\n              userMenu[key].imagePath = data.data;\n              userMenu[key].extension = extension;\n            } else if (\n              !userMenu[key].imagePath ||\n              userMenu[key].imagePath === \"-\"\n            ) {\n              userMenu[key].imagePath = defaultImage;\n              userMenu[key].extension = extension;\n            }\n          }\n        });\n        this.setState({\n          ...collapse,\n          userMenu,\n          fetch: true\n        });\n      });\n    }\n  }\n\n  handleDrawerOpen = () => {\n    this.setState({ open: true });\n  };\n\n  handleDrawerClose = () => {\n    this.setState({ open: false });\n  };\n\n  handleOnClick = menu => {\n    // if (menu.name === 'Feedback Corner'){\n    //   if(this.props.user.idBidang === 10) {\n    //     this.props.handleRoute('/Feedback')\n    //   }\n    //   else{\n    //     this.props.handleRoute('/Feedback/Create')\n    //   }\n    // }\n    // else\n    if (this.state[menu.name] !== undefined) {\n      this.setState({\n        [menu.name]: !this.state[menu.name]\n      });\n    } else {\n      this.props.handleRoute(menu.route);\n    }\n  };\n\n  filterMenu = () => {\n    const { menu, user } = this.props;\n    if (user && menu) {\n      const access = this.props.user.roleAccess;\n\n      // Get user menu\n      const userMenu = [];\n      for (let i = 0; i < menu.length; i++) {\n        for (let j = 0; j < access.length; j++) {\n          if (menu[i].id === access[j].idMenu) {\n            menu[i].access = access[j].access;\n            userMenu.push(menu[i]);\n          }\n        }\n      }\n\n      localStorage.setItem(\"menuAll\", JSON.stringify(menu));\n      // Sort menu\n      const userMenuSorted = userMenu.sort((a, b) => a.parentId - b.parentId);\n      const fixedMenu = {};\n      userMenuSorted.forEach(data => {\n        if (data.parentId === 0) {\n          fixedMenu[data.id] = data;\n        } else {\n          for (const key in fixedMenu) {\n            if (fixedMenu[key].id === data.parentId) {\n              fixedMenu[key].toggle = false;\n              if (!fixedMenu[key].child) {\n                fixedMenu[key].child = {};\n              }\n              fixedMenu[key].child[data.id] = data;\n            } else {\n              for (const childKey in fixedMenu[key].child) {\n                const child = fixedMenu[key].child[childKey];\n                if (child.id === data.parentId) {\n                  child.toggle = false;\n                  if (!child.child) {\n                    child.child = {};\n                  }\n                  child.child[data.id] = data;\n                }\n              }\n            }\n          }\n        }\n      });\n      return fixedMenu;\n    }\n    return null;\n  };\n\n  renderCollapse = child => {\n    if (child) {\n      return <ExpandLess />;\n    } else if (child === undefined) {\n      return null;\n    } else if (!child) {\n      return <ExpandMore />;\n    }\n  };\n\n  // Get image by file name\n  getImage = userMenu =>\n    `data:image/${userMenu.extension};base64,${userMenu.imagePath}`;\n\n  render() {\n    const { classes, open } = this.props;\n    const userMenu = this.state.userMenu;\n    return (\n      <div className={classes.root}>\n        {this.props.user && (\n          <Drawer\n            variant=\"permanent\"\n            classes={{\n              paper: classNames(\n                classes.drawerPaper,\n                !open && classes.drawerPaperClose\n              )\n            }}\n            className={classes.loggedContainer}\n            open={this.props.open}\n            // onMouseOver={this.handleDrawerOpen}\n            // onMouseLeave={this.handleDrawerClose}\n          >\n            <Divider />\n            <List>\n              {\n                this.state.menu && this.state.menu.map((menuParent) => {\n                  return (\n                    <ListItem>\n                      <ListItemIcon> <img src={require(`./../../icons/${menuParent.logo}`)} alt='' width='50%' height='auto'/></ListItemIcon>\n                      <ListItemText> {menuParent.label}</ListItemText>\n                    </ListItem>\n                  );\n                }, this)\n              }\n              \n\n\n\n            </List>\n            <br />\n            <br />\n            <br />\n          </Drawer>\n        )}\n        <main\n          className={!this.props.user ? classes.content : classes.loggedContent}\n        >\n          {this.props.children}\n          <br />\n          <br />\n          <br />\n        </main>\n      </div>\n    );\n  }\n}\n\nDraw.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n  open: PropTypes.bool.isRequired\n};\n\nexport default withStyles(styles, { withTheme: true })(Draw);\n"]},"metadata":{},"sourceType":"module"}