{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\components\\\\calonNasabah\\\\calonNasabahList.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { getAllBorrowerFunction } from './saga';\nimport { checkPermission, handleFormatDate } from '../global/globalFunction';\nimport { getToken } from '../index/token';\nimport TableComponent from '../subComponent/TableComponent';\nimport SearchBar from '../subComponent/SearchBar';\nconst columnDataUser = [{\n  id: 'id',\n  numeric: false,\n  label: 'ID Nasabah'\n}, {\n  id: 'fullname',\n  numeric: false,\n  label: 'Nama Nasabah'\n}, {\n  id: 'category',\n  numeric: false,\n  label: 'Kategori'\n}, {\n  id: 'bank_name',\n  numeric: false,\n  label: 'Bank Akun'\n}, {\n  id: 'created_time',\n  numeric: false,\n  label: 'Tanggal Registrasi'\n}];\n\nclass CalonNasabahList extends React.Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.refresh = async function () {\n      const param = {};\n      param.rows = this.state.rowsPerPage;\n      param.page = this.state.page;\n      const data = await getAllBorrowerFunction(param);\n\n      if (data) {\n        if (!data.error) {\n          console.log(data);\n          const dataListUser = data.dataUser || [];\n\n          if (dataListUser.length !== 0) {\n            for (const key in dataListUser) {\n              dataListUser[key].created_time = dataListUser[key].created_time && handleFormatDate(dataListUser[key].created_time);\n              dataListUser[key].category = this.isCategoryExist(dataListUser[key].category);\n              dataListUser[key].bank_name = dataListUser[key].agent_provider_name && dataListUser[key].agent_provider_name.length !== 0 ? dataListUser[key].agent_provider_name : dataListUser[key].bank_name;\n            }\n          }\n\n          this.setState({\n            listUser: dataListUser,\n            totalData: data.totalData,\n            loading: false\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error,\n            loading: false\n          });\n        }\n      }\n    };\n\n    this.isCategoryExist = category => {\n      if (category && category.toString().toLowerCase() === 'agent') {\n        return 'Agen';\n      } else if (category && category.toString().toLowerCase() === 'acount_executive') {\n        return 'Account Executive';\n      }\n\n      return 'Personal';\n    };\n\n    this.onChangePage = current => {\n      this.setState({\n        loading: true,\n        page: current\n      }, () => {\n        if (this.state.paging) {\n          this.refresh();\n        }\n\n        ;\n      });\n    };\n\n    this.changeSearch = e => {\n      this.setState({\n        loading: true,\n        page: 1,\n        search: e.target.value\n      }, () => {\n        this.refresh();\n      });\n    };\n\n    this.state = {\n      paging: true,\n      loading: true,\n      listUser: [],\n      page: 1,\n      rowsPerPage: 10,\n      totalData: 0\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.refresh();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    if (getToken()) {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Calon Nasabah - List\")), React.createElement(\"div\", {\n        className: \"col-8\",\n        style: {\n          color: \"red\",\n          fontSize: \"15px\",\n          textAlign: 'left'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, this.state.errorMessage), React.createElement(\"div\", {\n        className: \"col-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        id: \"search\",\n        hiddenLabel: true,\n        value: this.state.search,\n        placeholder: \"Search\",\n        onChange: this.changeSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(TableComponent, {\n        id: \"id\",\n        paging: this.state.paging,\n        loading: this.state.loading,\n        columnData: columnDataUser,\n        data: this.state.listUser,\n        page: this.state.page,\n        rowsPerPage: this.state.rowsPerPage,\n        totalData: this.state.totalData,\n        onChangePage: this.onChangePage,\n        permissionDetail: checkPermission('core_user_details') ? '/detailCalonNasabah/' : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }));\n    }\n\n    if (!getToken()) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default CalonNasabahList;","map":{"version":3,"sources":["C:\\Users\\pc\\Desktop\\asira_fe\\src\\components\\calonNasabah\\calonNasabahList.js"],"names":["React","Redirect","getAllBorrowerFunction","checkPermission","handleFormatDate","getToken","TableComponent","SearchBar","columnDataUser","id","numeric","label","CalonNasabahList","Component","constructor","props","_isMounted","refresh","param","rows","state","rowsPerPage","page","data","error","console","log","dataListUser","dataUser","length","key","created_time","category","isCategoryExist","bank_name","agent_provider_name","setState","listUser","totalData","loading","errorMessage","toString","toLowerCase","onChangePage","current","paging","changeSearch","e","search","target","value","componentDidMount","componentWillUnmount","render","color","fontSize","textAlign"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport {getAllBorrowerFunction} from './saga'\r\nimport { checkPermission, handleFormatDate } from '../global/globalFunction';\r\nimport { getToken } from '../index/token'\r\nimport TableComponent from '../subComponent/TableComponent'\r\nimport SearchBar from '../subComponent/SearchBar';\r\n\r\n\r\nconst columnDataUser = [\r\n    {\r\n        id: 'id',\r\n        numeric: false,\r\n        label: 'ID Nasabah',\r\n    },\r\n    {\r\n        id: 'fullname',\r\n        numeric: false,\r\n        label: 'Nama Nasabah',\r\n    },\r\n    {\r\n        id: 'category',\r\n        numeric: false,\r\n        label: 'Kategori',\r\n    },\r\n    {\r\n        id: 'bank_name',\r\n        numeric: false,\r\n        label: 'Bank Akun',\r\n    },\r\n    { id: 'created_time', numeric: false, label: 'Tanggal Registrasi'},\r\n]\r\n\r\nclass CalonNasabahList extends React.Component{\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            paging:true,\r\n            loading:true, \r\n            listUser: [],\r\n            page: 1,\r\n            rowsPerPage: 10,\r\n            totalData: 0,\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted = true;\r\n        this.refresh()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    refresh = async function(){\r\n        const param = {};\r\n        param.rows = this.state.rowsPerPage;\r\n        param.page = this.state.page;\r\n\r\n        const data = await getAllBorrowerFunction(param);\r\n\r\n        if(data) {\r\n            if(!data.error) {\r\n                console.log(data)\r\n                const dataListUser = data.dataUser || [];\r\n\r\n                if(dataListUser.length !== 0) {\r\n                    for(const key in dataListUser) {\r\n                        dataListUser[key].created_time = dataListUser[key].created_time && handleFormatDate(dataListUser[key].created_time)\r\n                        dataListUser[key].category = this.isCategoryExist(dataListUser[key].category) \r\n                        dataListUser[key].bank_name = dataListUser[key].agent_provider_name && dataListUser[key].agent_provider_name.length !== 0 ? dataListUser[key].agent_provider_name : dataListUser[key].bank_name\r\n                    }\r\n                }\r\n\r\n                this.setState({\r\n                    listUser: dataListUser,\r\n                    totalData: data.totalData,\r\n                    loading: false,\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    errorMessage: data.error,\r\n                    loading: false,\r\n                })\r\n            }      \r\n        }\r\n    }\r\n\r\n    isCategoryExist = (category) => {\r\n        if(category && category.toString().toLowerCase() === 'agent') {\r\n          return 'Agen'\r\n        } else if(category && category.toString().toLowerCase() === 'acount_executive') {\r\n          return 'Account Executive'\r\n        } \r\n  \r\n        return 'Personal';\r\n    }\r\n\r\n    onChangePage = (current) => {\r\n        this.setState({\r\n            loading:true,\r\n            page:current,\r\n        }, () => {\r\n            if(this.state.paging) {\r\n                this.refresh()\r\n            };\r\n        })\r\n    }\r\n\r\n    changeSearch = (e) => {\r\n        this.setState({\r\n            loading:true,\r\n            page: 1,\r\n            search: e.target.value,\r\n        }, () => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    render(){\r\n\r\n        if(getToken()){\r\n            return(\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <h2 className=\"mt-3\">Calon Nasabah - List</h2>\r\n                        </div>\r\n                        <div className=\"col-8\" style={{color:\"red\",fontSize:\"15px\",textAlign:'left'}}>\r\n                            {this.state.errorMessage}\r\n                        </div>  \r\n                        <div className=\"col-4\">\r\n                            <SearchBar\r\n                                id=\"search\"\r\n                                hiddenLabel\r\n                                value={this.state.search}\r\n                                placeholder=\"Search\"\r\n                                onChange={this.changeSearch} \r\n                            />\r\n                        </div>  \r\n                    </div>\r\n                   <hr/>\r\n\r\n                   < TableComponent\r\n                        id={\"id\"}\r\n                        paging={this.state.paging}\r\n                        loading={this.state.loading}\r\n                        columnData={columnDataUser}\r\n                        data={this.state.listUser}\r\n                        page={this.state.page}\r\n                        rowsPerPage={this.state.rowsPerPage}\r\n                        totalData={this.state.totalData}\r\n                        onChangePage={this.onChangePage}             \r\n                        permissionDetail={ checkPermission('core_user_details') ? '/detailCalonNasabah/' : null}\r\n                    />\r\n\r\n                  \r\n                </div>\r\n            )\r\n        }\r\n        if(!getToken()){\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport default CalonNasabahList;"]},"metadata":{},"sourceType":"module"}