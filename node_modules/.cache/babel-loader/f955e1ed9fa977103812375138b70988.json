{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\components\\\\pencairan\\\\pencairanList.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { getPermintaanPinjamanFunction } from '../permintaanPinjaman/saga';\nimport { handleFormatDate, checkPermission } from '../global/globalFunction';\nimport { getTokenClient } from '../index/token';\nimport TableComponent from '../subComponent/TableComponent';\nvar columnDataPencairan = [{\n  id: 'id',\n  numeric: false,\n  label: 'ID Pinjaman'\n}, {\n  id: 'borrower_name',\n  numeric: false,\n  label: 'Nama Nasabah'\n}, {\n  id: 'disburse_date',\n  numeric: false,\n  label: 'Tanggal Pencairan'\n}, {\n  id: 'status',\n  numeric: false,\n  label: 'Status'\n}];\n\nvar PencairanList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PencairanList, _React$Component);\n\n  function PencairanList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PencairanList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PencairanList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this._isMounted = false;\n    _this.state = {\n      loading: true,\n      listPencairan: [],\n      paging: true,\n      page: 1,\n      rowsPerPage: 10,\n      totalData: 0,\n      search: ''\n    };\n\n    _this.refresh = function _callee() {\n      var param, data, listPencairan, key;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              param = {\n                disburse_status: 'confirmed',\n                status: 'approved'\n              };\n              param.search_all = this.state.search;\n              param.rows = this.state.rowsPerPage;\n              param.page = this.state.page;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(getPermintaanPinjamanFunction(param));\n\n            case 6:\n              data = _context.sent;\n\n              if (data) {\n                console.log(data);\n\n                if (!data.error) {\n                  listPencairan = data.loanRequest.data;\n\n                  for (key in listPencairan) {\n                    listPencairan[key].disburse_date = handleFormatDate(new Date(listPencairan[key].disburse_date));\n\n                    if (listPencairan[key].status === 'approved') {\n                      listPencairan[key].status = 'Telah Dicairkan';\n                    } else {\n                      listPencairan[key].status = 'Belum Dicairkan';\n                    }\n                  }\n\n                  this._isMounted && this.setState({\n                    listPencairan: data.loanRequest.data,\n                    totalData: data.loanRequest.total_data,\n                    loading: false\n                  });\n                } else {\n                  this._isMounted && this.setState({\n                    errorMessage: data.error,\n                    loading: false\n                  });\n                }\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    };\n\n    _this.onChangePage = function (current, pageSize) {\n      _this.setState({\n        loading: true,\n        page: current\n      }, function () {\n        _this.refresh();\n      });\n    };\n\n    _this.changeSearch = function (e) {\n      _this.setState({\n        loading: true,\n        page: 1,\n        search: e.target.value\n      }, function () {\n        _this.refresh();\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(PencairanList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this._isMounted && this.refresh();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (getTokenClient()) {\n        return React.createElement(\"div\", {\n          style: {\n            padding: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(TableComponent, {\n          id: \"id\",\n          title: 'Pencairan - Loan',\n          errorMessage: this.state.errorMessage,\n          search: {\n            value: this.state.search,\n            label: 'Search ID Pinjaman, Nama Nasabah',\n            function: this.changeSearch\n          },\n          paging: this.state.paging,\n          loading: this.state.loading,\n          columnData: columnDataPencairan,\n          data: this.state.listPencairan,\n          page: this.state.page,\n          rowsPerPage: this.state.rowsPerPage,\n          totalData: this.state.totalData,\n          onChangePage: this.onChangePage,\n          permissionDetail: checkPermission('lender_loan_request_detail') ? '/pencairanDetail/' : null,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }));\n      }\n\n      if (!getTokenClient()) {\n        return React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return PencairanList;\n}(React.Component);\n\nexport default PencairanList;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_fe/src/components/pencairan/pencairanList.js"],"names":["React","Redirect","getPermintaanPinjamanFunction","handleFormatDate","checkPermission","getTokenClient","TableComponent","columnDataPencairan","id","numeric","label","PencairanList","_isMounted","state","loading","listPencairan","paging","page","rowsPerPage","totalData","search","refresh","param","disburse_status","status","search_all","rows","data","console","log","error","loanRequest","key","disburse_date","Date","setState","total_data","errorMessage","onChangePage","current","pageSize","changeSearch","e","target","value","padding","function","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { getPermintaanPinjamanFunction } from '../permintaanPinjaman/saga';\r\nimport { handleFormatDate, checkPermission } from '../global/globalFunction';\r\nimport { getTokenClient } from '../index/token';\r\nimport TableComponent from '../subComponent/TableComponent'\r\n\r\nconst columnDataPencairan = [\r\n    {\r\n        id: 'id',\r\n        numeric: false,\r\n        label: 'ID Pinjaman',\r\n    },\r\n    {\r\n        id: 'borrower_name',\r\n        numeric: false,\r\n        label: 'Nama Nasabah',\r\n    },\r\n    {\r\n        id: 'disburse_date',\r\n        numeric: false,\r\n        label: 'Tanggal Pencairan',\r\n    },\r\n    {\r\n        id: 'status',\r\n        numeric: false,\r\n        label: 'Status',\r\n    },\r\n]\r\n\r\nclass PencairanList extends React.Component{\r\n    _isMounted = false;\r\n\r\n    state = {\r\n        loading:true, \r\n        listPencairan: [],\r\n        paging: true,\r\n        page: 1,\r\n        rowsPerPage: 10,\r\n        totalData: 0,\r\n        search: '',\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted = true;\r\n        this._isMounted && this.refresh()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    refresh = async function(){\r\n        const param = {\r\n            disburse_status: 'confirmed',\r\n            status: 'approved',\r\n        };\r\n\r\n        param.search_all = this.state.search;\r\n        param.rows = this.state.rowsPerPage;\r\n        param.page = this.state.page;\r\n\r\n        const data = await getPermintaanPinjamanFunction(param);\r\n\r\n        if(data) {\r\n            console.log(data)\r\n            if(!data.error) {\r\n                const listPencairan = data.loanRequest.data;\r\n\r\n                for(const key in listPencairan) {\r\n                    listPencairan[key].disburse_date = handleFormatDate(new Date(listPencairan[key].disburse_date))\r\n                    if(listPencairan[key].status === 'approved') {\r\n                        listPencairan[key].status = 'Telah Dicairkan'\r\n                    } else {\r\n                        listPencairan[key].status = 'Belum Dicairkan'\r\n                    }\r\n                }\r\n\r\n                this._isMounted && this.setState({\r\n                    listPencairan: data.loanRequest.data ,\r\n                    totalData: data.loanRequest.total_data,\r\n                    loading: false,\r\n                })\r\n            } else {\r\n                this._isMounted && this.setState({\r\n                    errorMessage: data.error,\r\n                    loading: false,\r\n                })\r\n            }      \r\n        }\r\n    }\r\n\r\n    onChangePage = (current, pageSize) => {\r\n        this.setState({\r\n            loading:true,\r\n            page:current,\r\n        }, () => {\r\n            this.refresh();\r\n        })\r\n    }\r\n    \r\n    changeSearch = (e) => {\r\n        this.setState({\r\n            loading:true,\r\n            page: 1,\r\n            search: e.target.value,\r\n        }, () => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    render(){\r\n        \r\n        \r\n        if(getTokenClient()){\r\n            return(\r\n                <div style={{padding:0}}>\r\n\r\n                   < TableComponent\r\n                        id={\"id\"}\r\n                        title={'Pencairan - Loan'}\r\n                        errorMessage={this.state.errorMessage}\r\n                        search={\r\n                            {\r\n                              value: this.state.search,\r\n                              label: 'Search ID Pinjaman, Nama Nasabah',\r\n                              function: this.changeSearch,\r\n                            }\r\n                        }\r\n                        paging={this.state.paging}\r\n                        loading={this.state.loading}\r\n                        columnData={columnDataPencairan}\r\n                        data={this.state.listPencairan}\r\n                        page={this.state.page}\r\n                        rowsPerPage={this.state.rowsPerPage}\r\n                        totalData={this.state.totalData}\r\n                        onChangePage={this.onChangePage}             \r\n                        permissionDetail={ checkPermission('lender_loan_request_detail') ? '/pencairanDetail/' : null}\r\n                    />\r\n\r\n                  \r\n                </div>\r\n            )\r\n        }\r\n        if(!getTokenClient()){\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport default PencairanList;"]},"metadata":{},"sourceType":"module"}