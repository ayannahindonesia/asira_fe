{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\components\\\\product\\\\product.js\";\nimport React from 'react';\nimport { listProductFunction } from './saga';\nimport { checkPermission, formatNumber } from './../global/globalFunction';\nimport { Redirect } from 'react-router-dom';\nimport { getTokenClient, getTokenAuth } from '../index/token';\nimport TableComponent from './../subComponent/TableComponent';\nvar columnDataUser = [{\n  id: 'id',\n  numeric: false,\n  label: 'ID Produk'\n}, {\n  id: 'name',\n  numeric: false,\n  label: 'Nama Produk'\n}, {\n  id: 'tenor',\n  numeric: false,\n  label: 'Tenor'\n}, {\n  id: 'rentangPengajuan',\n  numeric: false,\n  label: 'Rentang Pengajuan (Rp)'\n}, {\n  id: 'interest',\n  numeric: false,\n  label: 'Bunga (%)'\n}, {\n  id: 'status',\n  numeric: false,\n  label: 'Status Produk'\n}];\n\nvar ProductList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ProductList, _React$Component);\n\n  function ProductList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProductList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProductList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this._isMounted = false;\n    _this.state = {\n      loading: true,\n      paging: true,\n      search: '',\n      rows: [],\n      total_data: 10,\n      page: 1,\n      from: 1,\n      to: 3,\n      last_page: 1,\n      rowsPerPage: 10,\n      dataPerhalaman: 5,\n      errorMessage: null\n    };\n\n    _this.getAllProduct = function _callee() {\n      var params, hasil, data, dataProduct, key;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              params = {\n                page: this.state.page,\n                rows: 10\n              };\n              hasil = this.state.search;\n\n              if (hasil.toString().trim().length !== 0) {\n                params.search_all = hasil;\n              }\n\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(listProductFunction(params));\n\n            case 5:\n              data = _context.sent;\n\n              if (data) {\n                dataProduct = data.productList && data.productList.data;\n\n                for (key in dataProduct) {\n                  dataProduct[key].status = dataProduct[key].status && dataProduct[key].status === 'active' ? 'Aktif' : 'Tidak Aktif';\n                  dataProduct[key].tenor = \"\".concat(dataProduct[key].min_timespan || '0', \" - \").concat(dataProduct[key].max_timespan || 0, \" Bulan\");\n                  dataProduct[key].rentangPengajuan = \"Rp \".concat(dataProduct[key].min_loan && formatNumber(dataProduct[key].min_loan) || '0', \" - Rp \").concat(dataProduct[key].max_loan && formatNumber(dataProduct[key].max_loan) || '0');\n                }\n\n                if (!data.error) {\n                  this.setState({\n                    loading: false,\n                    rows: data.productList.data,\n                    total_data: data.productList.total_data,\n                    page: data.productList.current_page,\n                    from: data.productList.from,\n                    to: data.productList.to,\n                    last_page: data.productList.last_page,\n                    rowsPerPage: data.productList.rows\n                  });\n                } else {\n                  this.setState({\n                    errorMessage: data.error\n                  });\n                }\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    };\n\n    _this.onChangePage = function (current) {\n      _this.setState({\n        loading: true,\n        page: current\n      }, function () {\n        if (_this.state.paging) {\n          _this.getAllProduct();\n        }\n      });\n    };\n\n    _this.onBtnSearch = function (e) {\n      _this.setState({\n        loading: true,\n        page: 1,\n        search: e.target.value\n      }, function () {\n        _this.getAllProduct();\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ProductList, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this.getAllProduct();\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(newProps) {\n      this.setState({\n        errorMessage: newProps.error\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (getTokenClient() && getTokenAuth()) {\n        return React.createElement(\"div\", {\n          style: {\n            padding: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(TableComponent, {\n          search: {\n            value: this.state.search,\n            label: 'Search Nama Produk, ID Produk..',\n            function: this.onBtnSearch\n          },\n          id: \"id\",\n          title: 'Produk - List',\n          paging: this.state.paging,\n          loading: this.state.loading,\n          columnData: columnDataUser,\n          data: this.state.rows,\n          page: this.state.page,\n          rowsPerPage: this.state.rowsPerPage,\n          totalData: this.state.total_data,\n          onChangePage: this.onChangePage,\n          permissionDetail: checkPermission('lender_product_list') ? '/produkDetail/' : null,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }));\n      }\n\n      if (getTokenAuth()) {\n        return React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return ProductList;\n}(React.Component);\n\nexport default ProductList;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_fe/src/components/product/product.js"],"names":["React","listProductFunction","checkPermission","formatNumber","Redirect","getTokenClient","getTokenAuth","TableComponent","columnDataUser","id","numeric","label","ProductList","_isMounted","state","loading","paging","search","rows","total_data","page","from","to","last_page","rowsPerPage","dataPerhalaman","errorMessage","getAllProduct","params","hasil","toString","trim","length","search_all","data","dataProduct","productList","key","status","tenor","min_timespan","max_timespan","rentangPengajuan","min_loan","max_loan","error","setState","current_page","onChangePage","current","onBtnSearch","e","target","value","newProps","padding","function","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { listProductFunction } from './saga';\r\nimport {checkPermission, formatNumber} from './../global/globalFunction'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { getTokenClient,getTokenAuth } from '../index/token'\r\nimport TableComponent from './../subComponent/TableComponent'\r\n\r\nconst columnDataUser = [\r\n    {\r\n        id: 'id',\r\n        numeric: false,\r\n        label: 'ID Produk',\r\n    },\r\n    {\r\n        id: 'name',\r\n        numeric: false,\r\n        label: 'Nama Produk',\r\n    },\r\n    {\r\n        id: 'tenor',\r\n        numeric: false,\r\n        label: 'Tenor',\r\n    },\r\n    {\r\n        id: 'rentangPengajuan',\r\n        numeric: false,\r\n        label: 'Rentang Pengajuan (Rp)',\r\n    },\r\n    {\r\n        id: 'interest',\r\n        numeric: false,\r\n        label: 'Bunga (%)',\r\n    },\r\n    {\r\n        id: 'status',\r\n        numeric: false,\r\n        label: 'Status Produk',\r\n    }\r\n]\r\nclass ProductList extends React.Component{\r\n    _isMounted = false;\r\n    state={\r\n        loading:true,paging:true,search:'',\r\n        rows:[],total_data:10,page:1,from:1,to:3,last_page:1,rowsPerPage:10,dataPerhalaman:5,errorMessage:null\r\n    }\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n      }\r\n    componentDidMount (){\r\n        this._isMounted = true;\r\n        this.getAllProduct()\r\n    }\r\n    getAllProduct = async function () {\r\n        const params ={\r\n            page:this.state.page,\r\n            rows:10\r\n        }\r\n        var hasil = this.state.search;\r\n\r\n        if(hasil.toString().trim().length !== 0) {\r\n          params.search_all = hasil\r\n        }\r\n        \r\n        const data = await listProductFunction (params)\r\n        \r\n        if(data){\r\n            const dataProduct = data.productList && data.productList.data;\r\n        \r\n            for(const key in dataProduct) {\r\n                dataProduct[key].status = dataProduct[key].status && dataProduct[key].status === 'active' ? 'Aktif' : 'Tidak Aktif'\r\n                dataProduct[key].tenor = `${dataProduct[key].min_timespan || '0'} - ${dataProduct[key].max_timespan || 0} Bulan`\r\n                dataProduct[key].rentangPengajuan = `Rp ${(dataProduct[key].min_loan && formatNumber(dataProduct[key].min_loan)) || '0'} - Rp ${(dataProduct[key].max_loan && formatNumber(dataProduct[key].max_loan)) || '0'}`\r\n            }\r\n\r\n            if(!data.error){\r\n                this.setState({loading:false,rows:data.productList.data,\r\n                    total_data:data.productList.total_data,\r\n                    page:data.productList.current_page,\r\n                    from:data.productList.from,\r\n                    to:data.productList.to,\r\n                    last_page:data.productList.last_page,\r\n                    rowsPerPage:data.productList.rows,\r\n                })\r\n            }else{\r\n                this.setState({errorMessage:data.error})\r\n            }\r\n        }\r\n    }\r\n    UNSAFE_componentWillReceiveProps(newProps){\r\n        this.setState({errorMessage:newProps.error})\r\n    }\r\n    onChangePage = (current) => {\r\n        this.setState({loading:true, page : current}, () => {\r\n            if(this.state.paging){\r\n                this.getAllProduct()\r\n            }\r\n        })\r\n    }\r\n\r\n    onBtnSearch = (e)=>{\r\n        this.setState({loading : true, page:1,search:e.target.value},()=>{\r\n                this.getAllProduct()\r\n        })\r\n      }\r\n  \r\n    render(){\r\n    if(getTokenClient()&&getTokenAuth()){\r\n            return(\r\n                <div style={{padding:0}}>\r\n                    < TableComponent\r\n                        search={\r\n                            {\r\n                                value: this.state.search,\r\n                                label: 'Search Nama Produk, ID Produk..',\r\n                                function: this.onBtnSearch,\r\n                            }\r\n                        }\r\n                        id={\"id\"}\r\n                        title={'Produk - List'}\r\n                        paging={this.state.paging}\r\n                        loading={this.state.loading}\r\n                        columnData={columnDataUser}\r\n                        data={this.state.rows}\r\n                        page={this.state.page}\r\n                        rowsPerPage={this.state.rowsPerPage}\r\n                        totalData={this.state.total_data}\r\n                        onChangePage={this.onChangePage}         \r\n                        permissionDetail={ checkPermission('lender_product_list') ? '/produkDetail/' : null}\r\n                    /> \r\n\r\n                </div>\r\n            )\r\n        }\r\n        if(getTokenAuth()){\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport default ProductList;"]},"metadata":{},"sourceType":"module"}