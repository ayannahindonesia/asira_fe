{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\fe_testing\\\\src\\\\components\\\\permintaanPinjaman\\\\pinjamanSetuju.js\";\nimport React from 'react';\nimport DatePicker from \"react-date-picker\";\nimport swal from 'sweetalert';\nimport { CSVLink } from \"react-csv\";\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Loader from 'react-loader-spinner';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport './../../support/css/pagination.css';\nimport { getPermintaanPinjamanFunction, CSVDownloadFunction, confirmDisburseFunction, changeDisburseDateFunction } from './saga';\nimport 'moment/locale/id';\nimport { getTokenClient, getTokenAuth } from '../index/token';\nimport { checkPermission, formatNumber } from './../global/globalFunction';\nimport './../../support/css/table.css';\nimport TableComponent from './../subComponent/TableComponent';\nimport { Button } from '@material-ui/core';\nconst columnDataUser = [{\n  id: 'id',\n  label: 'ID Pinjaman'\n}, {\n  id: 'borrower_name',\n  label: 'Nama Nasabah'\n}, {\n  id: 'service',\n  label: 'Layanan'\n}, {\n  id: 'product',\n  label: 'Produk'\n}, {\n  id: 'created_at',\n  label: 'Tanggal Pengajuan',\n  type: 'datetime'\n}, {\n  id: 'approval_date',\n  label: 'Tanggal Approval',\n  type: 'datetime'\n}, {\n  id: 'disburse_date',\n  label: 'Tanggal Pencairan',\n  type: 'datetime'\n}, {\n  id: 'Konfirmasi',\n  type: 'button',\n  conditions: {\n    disburse_status: 'processing',\n    status: 'approved',\n    disburse_date: '<date'\n  },\n  function: '',\n  permission: '',\n  label: 'Telah Dicairkan'\n}, {\n  id: 'Ubah',\n  type: 'button',\n  conditions: {\n    disburse_date_changed: false,\n    disburse_status: 'processing'\n  },\n  label: 'Ubah Tanggal Pencairan',\n  permission: '',\n  function: ''\n}];\nconst headerCsv = [{\n  label: 'ID Pinjaman',\n  key: 'id'\n}, {\n  label: 'Nama Nasabah',\n  key: 'borrower_name'\n}, {\n  label: 'Bank',\n  key: 'bank_name'\n}, {\n  label: 'Pinjaman Pokok',\n  key: 'loan_amount'\n}, {\n  label: 'Lama Cicilan',\n  key: 'installment'\n}, {\n  label: 'Admin Fee',\n  key: 'fees.admin_fee'\n}, {\n  label: 'Convenience Fee',\n  key: 'fees.convenience_fee'\n}, {\n  label: 'Bunga (%)',\n  key: 'interest'\n}, {\n  label: 'Total Pinjaman',\n  key: 'total_loan'\n}, {\n  label: 'Due Date',\n  key: 'due_date'\n}, {\n  label: 'Cicilan',\n  key: 'layaway_plan'\n}, {\n  label: 'Tujuan Pinjaman',\n  key: 'loan_intention'\n}, {\n  label: 'Tujuan Pinjaman Detail',\n  key: 'intention_details'\n}, {\n  label: 'Penghasilan Bulanan',\n  key: 'monthly_income'\n}, {\n  label: 'Penghasilan Lain-lain',\n  key: 'other_income'\n}, {\n  label: 'Sumber Penghasilan Lain-lain',\n  key: 'other_incomesource'\n}, {\n  label: 'Rekening Bank',\n  key: 'bank_account'\n}];\n\nclass PinjamanSetuju extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this.state = {\n      checkedData: [],\n      rows: [],\n      page: 1,\n      last_page: 1,\n      rowsPerPage: 10,\n      isEdit: false,\n      editIndex: Number,\n      udahdiklik: false,\n      startDate: new Date(),\n      endDate: new Date(),\n      downloadDataCSV: [],\n      downloadModal: false,\n      total_data: 0,\n      loading: true,\n      loadingBtn: false,\n      searching: false,\n      errorMessage: '',\n      modal: false,\n      idPinjaman: null,\n      ubahTanggalPencairan: new Date(),\n      disburse: false,\n      telahDicairkan: 'Dikonfirmasi',\n      statusTanggalDisburse: 'Diubah'\n    };\n\n    this.checkPermissionChangeDisburseDate = () => {\n      return checkPermission('lender_loan_change_disburse_date');\n    };\n\n    this.checkPermissionConfirmDisburse = () => {\n      return checkPermission('lender_loan_confirm_disburse');\n    };\n\n    this.getAllData = async function () {\n      const param = {\n        status: \"approved\",\n        rows: \"10\",\n        page: this.state.page\n      };\n\n      if (this.state.searching) {\n        param.start_approval_date = this.formatSearchingDate(this.state.startDate);\n        param.end_approval_date = this.formatSearchingDate(this.state.endDate, true);\n      }\n\n      const data = await getPermintaanPinjamanFunction(param);\n\n      if (data) {\n        if (!data.error) {\n          this._isMounted && this.setState({\n            loading: false,\n            rows: data.loanRequest.data,\n            rowsPerPage: data.loanRequest.rows,\n            page: data.loanRequest.current_page,\n            last_page: data.loanRequest.last_page,\n            total_data: data.loanRequest.total_data\n          });\n        } else {\n          this._isMounted && this.setState({\n            errorMessage: data.error\n          });\n        }\n      }\n    };\n\n    this.handleStartChange = date => {\n      this.setState({\n        startDate: date\n      });\n    };\n\n    this.handleEndChange = date => {\n      this.setState({\n        endDate: date\n      });\n    };\n\n    this.formatSearchingDate = (dateData, endSearch) => {\n      const startDate = dateData || new Date();\n      let startMonth = '' + (startDate.getMonth() + 1),\n          startDay = '' + startDate.getDate(),\n          startYear = startDate.getFullYear();\n      if (startMonth.length < 2) startMonth = '0' + startMonth;\n      if (startDay.length < 2) startDay = '0' + startDay;\n      let newFormatStartDate = startYear + \"-\" + startMonth + \"-\" + startDay;\n      newFormatStartDate += endSearch ? \"T23:59:59.999Z\" : \"T00:00:00.000Z\";\n      return newFormatStartDate;\n    };\n\n    this.onBtnSearch = () => {\n      this.setState({\n        loading: true,\n        searchModal: true,\n        searching: true,\n        checkedData: []\n      });\n\n      if (this.state.endDate.getTime() < this.state.startDate.getTime()) {\n        alert(\"Please input correct month range\");\n        this.setState({\n          loading: false\n        });\n      } else {\n        this.setState({\n          page: 1\n        }, () => {\n          this.getAllData();\n        });\n      }\n    };\n\n    this.onBtnReset = () => {\n      this.setState({\n        loading: true,\n        searching: false,\n        page: 1\n      }, () => {\n        this.getAllData();\n      });\n    };\n\n    this.btnDownloadCsv = () => {\n      this.setState({\n        loadingBtn: true\n      });\n      const arr = this.state.checkedData;\n\n      if (arr.length === 0) {\n        swal(\"Info\", \"Silahkan Pilih Data yang ingin di download\", \"info\");\n        this.setState({\n          loadingBtn: false\n        });\n      } else {\n        var id = [];\n\n        for (var j = 0; j < arr.length; j++) {\n          id.push(arr[j]);\n        }\n\n        const param = {\n          id: id.toString(),\n          status: 'approved'\n        };\n\n        if (param.id === 'all') {\n          delete param.id;\n        }\n\n        if (this.state.searching) {\n          param.start_approval_date = this.formatSearchingDate(this.state.startDate);\n          param.end_approval_date = this.formatSearchingDate(this.state.endDate, true);\n        }\n\n        this.btnCSVDownload(param);\n      }\n    };\n\n    this.btnCSVDownload = async function (param) {\n      this.setState({\n        loading: true\n      });\n      const data = await CSVDownloadFunction(param);\n\n      if (data) {\n        if (!data.error) {\n          let dataCsv = data.data || [];\n\n          if (dataCsv) {\n            for (const key in dataCsv) {\n              let feesData = {};\n              dataCsv[key].bank_account = `'${dataCsv[key].bank_account.toString()}`;\n              const loan_amount_float = dataCsv[key].loan_amount.toString().split('.')[1] && dataCsv[key].loan_amount.toString().split('.')[1].substring(0, 2);\n              dataCsv[key].loan_amount = `${formatNumber(parseInt(dataCsv[key].loan_amount))},${loan_amount_float || '00'}`;\n              const total_loan_float = dataCsv[key].total_loan.toString().split('.')[1] && dataCsv[key].total_loan.toString().split('.')[1].substring(0, 2);\n              dataCsv[key].total_loan = `${formatNumber(parseInt(dataCsv[key].total_loan))},${total_loan_float || '00'}`;\n              const monthly_income_float = dataCsv[key].monthly_income.toString().split('.')[1] && dataCsv[key].monthly_income.toString().split('.')[1].substring(0, 2);\n              dataCsv[key].monthly_income = `${formatNumber(parseInt(dataCsv[key].monthly_income))},${monthly_income_float || '00'}`;\n              const layaway_plan_float = dataCsv[key].layaway_plan.toString().split('.')[1] && dataCsv[key].layaway_plan.toString().split('.')[1].substring(0, 2);\n              dataCsv[key].layaway_plan = `${formatNumber(parseInt(dataCsv[key].layaway_plan))},${layaway_plan_float || '00'}`;\n              const fees = dataCsv[key].fees;\n\n              for (const keyFee in fees) {\n                let desc = fees[keyFee] && fees[keyFee].description && fees[keyFee].description.toString().toLowerCase();\n\n                while (desc && desc.includes(' ')) {\n                  desc = desc.replace(' ', '_');\n                }\n\n                if (!feesData[desc] && fees[keyFee] && fees[keyFee].amount) {\n                  feesData[desc] = '';\n                  const fees_float = fees[keyFee] && fees[keyFee].amount && fees[keyFee].amount.toString().split('.')[1] && fees[keyFee].amount.toString().split('.')[1].substring(0, 2);\n                  feesData[desc] = desc && fees[keyFee] && fees[keyFee].amount && `${formatNumber(parseInt(fees[keyFee].amount))},${fees_float || '00'}`;\n                }\n              }\n\n              dataCsv[key].fees = feesData;\n            }\n          }\n\n          this.setState({\n            loading: false,\n            loadingBtn: false,\n            downloadModal: true,\n            downloadDataCSV: dataCsv\n          });\n        } else {\n          this.setState({\n            loading: false,\n            loadingBtn: false,\n            downloadModal: false,\n            errorMessage: data.error\n          });\n        }\n      }\n    };\n\n    this.onChangePage = current => {\n      this.setState({\n        loading: true,\n        page: current\n      }, () => {\n        this.getAllData();\n      });\n    };\n\n    this.btnKonfirmasi = (e, id) => {\n      this.confirmDisburse({\n        id\n      });\n    };\n\n    this.confirmDisburse = async function (param) {\n      const data = await confirmDisburseFunction(param);\n\n      if (data) {\n        if (!data.error) {\n          this.setState({\n            telahDicairkan: 'Dikonfirmasi'\n          }, () => {\n            this.getAllData();\n          });\n          swal(\"Success\", \"Dana telah dicairkan\", \"success\");\n        } else {\n          swal(\"Fail\", \"Konfirmasi Gagal\", \"error\");\n        }\n      }\n    };\n\n    this.handleTanggalPencairan = e => {\n      this.setState({\n        ubahTanggalPencairan: e\n      });\n    };\n\n    this.toggleChangeDisburseDate = (e, id) => {\n      this.setState({\n        modal: true,\n        idPinjaman: id\n      });\n    };\n\n    this.handleCheckBox = e => {\n      let checkedData = this.state.checkedData;\n\n      if (e.target.checked) {\n        if (e.target.value.toString() === 'all') {\n          checkedData = ['all'];\n        } else {\n          checkedData.push(parseInt(e.target.value));\n        }\n      } else {\n        checkedData.splice(checkedData.indexOf(parseInt(e.target.value)), 1);\n      }\n\n      this.setState({\n        checkedData\n      });\n    };\n\n    this.ubahTanggalPencairanBtn = () => {\n      this.setState({\n        disburse: true\n      });\n      const _this$state = this.state,\n            ubahTanggalPencairan = _this$state.ubahTanggalPencairan,\n            idPinjaman = _this$state.idPinjaman;\n      let startMonth = '' + (ubahTanggalPencairan.getMonth() + 1),\n          startDay = '' + ubahTanggalPencairan.getDate(),\n          startYear = ubahTanggalPencairan.getFullYear();\n      if (startMonth.length < 2) startMonth = '0' + startMonth;\n      if (startDay.length < 2) startDay = '0' + startDay;\n      const changeDate = startYear + \"-\" + startMonth + \"-\" + startDay;\n      const param = {\n        id: idPinjaman,\n        date: changeDate\n      };\n      this.disburseDate(param);\n    };\n\n    this.disburseDate = async function (param) {\n      const data = await changeDisburseDateFunction(param);\n\n      if (data) {\n        if (!data.error) {\n          swal(\"Success\", \"Tanggal pencairan berhasil diubah\", \"success\");\n          this.setState({\n            modal: false,\n            disburse: false,\n            statusTanggalDisburse: 'Diubah'\n          }, () => {\n            this.getAllData();\n          });\n        } else {\n          swal(\"Fail\", \"Tanggal pencairan gagal diubah\", \"error\");\n          this.setState({\n            disburse: false\n          });\n        }\n      }\n    };\n\n    this.btnCancelModalDownload = () => {\n      this.setState({\n        downloadModal: false,\n        downloadDataCSV: [],\n        searchModal: false\n      });\n      var checkboxes = document.querySelectorAll('input[type=checkbox]:checked');\n\n      for (var i = 0; i < checkboxes.length; i++) {\n        checkboxes[i].checked = false;\n      }\n\n      this.setState({\n        checkedData: []\n      });\n    };\n\n    this.renderBtnOrLoading = () => {\n      if (this.state.loadingBtn) {\n        return React.createElement(Loader, {\n          type: \"ThreeDots\",\n          color: \"#00BFFF\",\n          height: \"30\",\n          width: \"30\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 404\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"input\", {\n          type: \"button\",\n          className: \"btn btn-primary ml-3\",\n          onClick: this.btnDownloadCsv,\n          value: \"CSV Download\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 414\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.renderBtnDisburseDate = () => {\n      if (this.state.disburse) {\n        return React.createElement(Button, {\n          disableElevation: true,\n          color: \"primary\",\n          onClick: this.ubahTanggalPencairanBtn,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422\n          },\n          __self: this\n        }, React.createElement(Loader, {\n          type: \"ThreeDots\",\n          color: \"#00BFFF\",\n          height: \"30\",\n          width: \"30\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 423\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(Button, {\n          disableElevation: true,\n          color: \"primary\",\n          onClick: this.ubahTanggalPencairanBtn,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 433\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 433\n          },\n          __self: this\n        }, \"Simpan\"));\n      }\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this._isMounted && this.getAllData();\n    columnDataUser[7].function = this.btnKonfirmasi;\n    columnDataUser[7].permission = this.checkPermissionConfirmDisburse;\n    columnDataUser[8].function = this.toggleChangeDisburseDate;\n    columnDataUser[8].permission = this.checkPermissionChangeDisburseDate;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    if (getTokenClient() && getTokenAuth()) {\n      return React.createElement(\"div\", {\n        style: {\n          padding: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        isOpen: this.state.downloadModal,\n        className: this.props.className,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446\n        },\n        __self: this\n      }, \"Jumlah Download CSV: \", this.state.checkedData && this.state.checkedData[0] && this.state.checkedData[0] === 'all' ? this.state.total_data : this.state.checkedData.length, \" item(s)\"), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447\n        },\n        __self: this\n      }, React.createElement(CSVLink, {\n        headers: headerCsv,\n        data: this.state.downloadDataCSV,\n        filename: `Report Loan Telah Disetujui_${this.formatSearchingDate(new Date()).substring(0, 10)}.csv`,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448\n        },\n        __self: this\n      }, \"Click Here to Download CSV\")), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456\n        },\n        __self: this\n      }, React.createElement(Button, {\n        disableElevation: true,\n        color: \"secondary\",\n        onClick: this.btnCancelModalDownload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      }, \"Close\")))), React.createElement(Modal, {\n        isOpen: this.state.modal,\n        className: this.props.className,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462\n        },\n        __self: this\n      }, \"Ubah Tanggal Pencairan\"), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463\n        },\n        __self: this\n      }, React.createElement(DatePicker, {\n        className: \"ml-3\",\n        format: \"yyyy-MM-dd\",\n        onChange: this.handleTanggalPencairan,\n        value: this.state.ubahTanggalPencairan,\n        clearIcon: null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465\n        },\n        __self: this\n      })), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476\n        },\n        __self: this\n      }, this.renderBtnDisburseDate(), React.createElement(Button, {\n        disableElevation: true,\n        color: \"secondary\",\n        onClick: () => this.setState({\n          modal: false\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479\n        },\n        __self: this\n      }, \"Tutup\")))), React.createElement(TableComponent, {\n        id: \"id\",\n        title: 'Pinjaman Disetujui - List',\n        errorMessage: this.state.errorMessage,\n        checkBoxAction: this.handleCheckBox,\n        searchDate: {\n          value: [this.state.startDate, this.state.endDate],\n          label: 'Tanggal Approval',\n          function: [this.handleStartChange, this.handleEndChange],\n          button: [{\n            label: 'Cari',\n            color: '#20B889',\n            function: this.onBtnSearch\n          }, {\n            label: 'Reset',\n            color: '#EE6969',\n            function: this.onBtnReset\n          }]\n        },\n        arrayCheckBox: this.state.checkedData,\n        paging: this.state.paging,\n        loading: this.state.loading,\n        columnData: columnDataUser,\n        data: this.state.rows,\n        page: this.state.page,\n        rowsPerPage: this.state.rowsPerPage,\n        totalData: this.state.total_data,\n        onChangePage: this.onChangePage,\n        button: [{\n          label: 'Download CSV',\n          color: '#20B889',\n          function: this.btnDownloadCsv\n        }],\n        permissionDetail: checkPermission('lender_loan_request_detail') ? '/permintaanpinjamanDetail/' : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484\n        },\n        __self: this\n      }));\n    } else if (getTokenAuth()) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nconst mapStateToProp = state => {\n  return {\n    role: state.user.role,\n    id: state.user.id\n  };\n};\n\nexport default connect(mapStateToProp)(PinjamanSetuju);","map":{"version":3,"sources":["C:/Users/pc/Desktop/fe_testing/src/components/permintaanPinjaman/pinjamanSetuju.js"],"names":["React","DatePicker","swal","CSVLink","Modal","ModalHeader","ModalBody","ModalFooter","Loader","connect","Redirect","getPermintaanPinjamanFunction","CSVDownloadFunction","confirmDisburseFunction","changeDisburseDateFunction","getTokenClient","getTokenAuth","checkPermission","formatNumber","TableComponent","Button","columnDataUser","id","label","type","conditions","disburse_status","status","disburse_date","function","permission","disburse_date_changed","headerCsv","key","PinjamanSetuju","Component","_isMounted","state","checkedData","rows","page","last_page","rowsPerPage","isEdit","editIndex","Number","udahdiklik","startDate","Date","endDate","downloadDataCSV","downloadModal","total_data","loading","loadingBtn","searching","errorMessage","modal","idPinjaman","ubahTanggalPencairan","disburse","telahDicairkan","statusTanggalDisburse","checkPermissionChangeDisburseDate","checkPermissionConfirmDisburse","getAllData","param","start_approval_date","formatSearchingDate","end_approval_date","data","error","setState","loanRequest","current_page","handleStartChange","date","handleEndChange","dateData","endSearch","startMonth","getMonth","startDay","getDate","startYear","getFullYear","length","newFormatStartDate","onBtnSearch","searchModal","getTime","alert","onBtnReset","btnDownloadCsv","arr","j","push","toString","btnCSVDownload","dataCsv","feesData","bank_account","loan_amount_float","loan_amount","split","substring","parseInt","total_loan_float","total_loan","monthly_income_float","monthly_income","layaway_plan_float","layaway_plan","fees","keyFee","desc","description","toLowerCase","includes","replace","amount","fees_float","onChangePage","current","btnKonfirmasi","e","confirmDisburse","handleTanggalPencairan","toggleChangeDisburseDate","handleCheckBox","target","checked","value","splice","indexOf","ubahTanggalPencairanBtn","changeDate","disburseDate","btnCancelModalDownload","checkboxes","document","querySelectorAll","i","renderBtnOrLoading","renderBtnDisburseDate","componentDidMount","componentWillUnmount","render","padding","props","className","toggle","button","color","paging","mapStateToProp","role","user"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport DatePicker from \"react-date-picker\";\r\nimport swal from 'sweetalert'\r\nimport { CSVLink } from \"react-csv\";\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport Loader from 'react-loader-spinner'\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport {connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\nimport './../../support/css/pagination.css'\r\nimport { getPermintaanPinjamanFunction, CSVDownloadFunction, confirmDisburseFunction, changeDisburseDateFunction } from './saga';\r\nimport 'moment/locale/id'\r\nimport { getTokenClient, getTokenAuth } from '../index/token';\r\nimport {checkPermission, formatNumber} from './../global/globalFunction'\r\nimport './../../support/css/table.css'\r\nimport TableComponent from './../subComponent/TableComponent'\r\nimport { Button } from '@material-ui/core';\r\n\r\nconst columnDataUser = [\r\n  {\r\n      id: 'id',\r\n      label: 'ID Pinjaman',\r\n  },\r\n  {\r\n      id: 'borrower_name',\r\n      label: 'Nama Nasabah',\r\n  },\r\n  {\r\n      id: 'service',\r\n      label: 'Layanan',\r\n  },\r\n  {\r\n    id: 'product',\r\n    label: 'Produk',\r\n  },\r\n  {\r\n    id: 'created_at',\r\n    label: 'Tanggal Pengajuan',\r\n    type:'datetime'\r\n  },\r\n  {\r\n    id: 'approval_date',\r\n    label: 'Tanggal Approval',\r\n    type:'datetime'\r\n  },\r\n  {\r\n    id: 'disburse_date',\r\n    label: 'Tanggal Pencairan',\r\n    type:'datetime'\r\n  },\r\n  {\r\n    id: 'Konfirmasi',\r\n    type: 'button',\r\n    conditions: {\r\n      disburse_status : 'processing',\r\n      status : 'approved',\r\n      disburse_date: '<date',\r\n    },\r\n    function: '',\r\n    permission: '',\r\n    label: 'Telah Dicairkan',\r\n  },\r\n  {\r\n    id: 'Ubah',\r\n    type: 'button',\r\n    conditions: {\r\n      disburse_date_changed : false,\r\n      disburse_status : 'processing',\r\n    },\r\n    label: 'Ubah Tanggal Pencairan',\r\n    permission: '',\r\n    function: '',\r\n  },\r\n\r\n]\r\n\r\nconst headerCsv = [\r\n  { label:'ID Pinjaman', key:'id'},\r\n  { label:'Nama Nasabah', key:'borrower_name'},\r\n  { label:'Bank', key:'bank_name'},\r\n  { label:'Pinjaman Pokok', key:'loan_amount'},\r\n  { label:'Lama Cicilan', key:'installment'},\r\n  { label:'Admin Fee', key:'fees.admin_fee'},\r\n  { label:'Convenience Fee', key:'fees.convenience_fee'},\r\n  { label:'Bunga (%)', key:'interest'},\r\n  { label:'Total Pinjaman', key:'total_loan'},\r\n  { label:'Due Date', key:'due_date'},\r\n  { label:'Cicilan', key:'layaway_plan'},\r\n  { label:'Tujuan Pinjaman', key:'loan_intention'},\r\n  { label:'Tujuan Pinjaman Detail', key:'intention_details'},\r\n  { label:'Penghasilan Bulanan', key:'monthly_income'},\r\n  { label:'Penghasilan Lain-lain', key:'other_income'},\r\n  { label:'Sumber Penghasilan Lain-lain', key:'other_incomesource'},\r\n  { label:'Rekening Bank', key:'bank_account'},\r\n]\r\n\r\nclass PinjamanSetuju extends React.Component {\r\n  _isMounted = false;\r\n\r\n  state = {\r\n    checkedData:[],\r\n    rows: [],\r\n    page: 1,last_page:1,\r\n    rowsPerPage: 10,\r\n    isEdit: false,\r\n    editIndex:Number,\r\n    udahdiklik : false,\r\n    startDate: new Date() ,\r\n    endDate: new Date(),\r\n    downloadDataCSV: [],downloadModal:false,\r\n    total_data:0,\r\n    loading:true,loadingBtn:false,\r\n    searching:false,errorMessage:'',\r\n    modal:false,idPinjaman:null,ubahTanggalPencairan:new Date(),disburse:false,telahDicairkan:'Dikonfirmasi',statusTanggalDisburse:'Diubah'\r\n  };\r\n\r\n  componentDidMount(){\r\n    this._isMounted=true;\r\n    this._isMounted && this.getAllData();\r\n\r\n    columnDataUser[7].function = this.btnKonfirmasi;\r\n    columnDataUser[7].permission = this.checkPermissionConfirmDisburse;\r\n    columnDataUser[8].function = this.toggleChangeDisburseDate;\r\n    columnDataUser[8].permission = this.checkPermissionChangeDisburseDate;\r\n  }\r\n\r\n\r\n  checkPermissionChangeDisburseDate = () => {\r\n    return checkPermission('lender_loan_change_disburse_date')\r\n  }\r\n\r\n  checkPermissionConfirmDisburse = () => {\r\n    return checkPermission('lender_loan_confirm_disburse')\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    this._isMounted=false\r\n  }\r\n\r\n  getAllData = async function (){\r\n    const param ={\r\n      status:\"approved\",\r\n      rows:\"10\",\r\n      page: this.state.page,\r\n    }\r\n    if(this.state.searching){\r\n      param.start_approval_date = this.formatSearchingDate(this.state.startDate);\r\n      param.end_approval_date = this.formatSearchingDate(this.state.endDate, true);\r\n    }\r\n\r\n\r\n    const data = await getPermintaanPinjamanFunction(param)\r\n\r\n    if(data){\r\n      if(!data.error){\r\n        this._isMounted && this.setState({loading:false,rows:data.loanRequest.data,rowsPerPage:data.loanRequest.rows,page:data.loanRequest.current_page,last_page:data.loanRequest.last_page,total_data:data.loanRequest.total_data})        \r\n      }else{\r\n        this._isMounted && this.setState({errorMessage:data.error})\r\n      }\r\n    }\r\n  }\r\n\r\n  //UNTUK TANGGAL \r\n  handleStartChange = (date)=> {\r\n    this.setState({\r\n      startDate: date\r\n    });\r\n  }\r\n\r\n  handleEndChange = (date)=> {\r\n    this.setState({\r\n      endDate: date\r\n    });\r\n  }\r\n\r\n  formatSearchingDate = (dateData, endSearch) => {\r\n    const startDate = dateData || new Date();\r\n\r\n    let startMonth =''+ (startDate.getMonth()+1),\r\n    startDay = '' + startDate.getDate(),\r\n    startYear = startDate.getFullYear();\r\n\r\n    if (startMonth.length < 2) startMonth = '0' + startMonth;\r\n    if (startDay.length < 2) startDay = '0' + startDay;\r\n\r\n    let newFormatStartDate = startYear+\"-\"+startMonth+\"-\"+startDay;\r\n    newFormatStartDate += endSearch ? \"T23:59:59.999Z\" : \"T00:00:00.000Z\"\r\n\r\n    return newFormatStartDate;\r\n  }\r\n  \r\n  onBtnSearch = ()=>{\r\n    this.setState({loading:true,searchModal:true,searching:true, checkedData:[]})\r\n    \r\n    \r\n      if(this.state.endDate.getTime() < this.state.startDate.getTime() ){\r\n        alert(\"Please input correct month range\")\r\n        this.setState({loading:false})\r\n      } else{\r\n        this.setState({page:1},()=>{\r\n            this.getAllData()\r\n        })\r\n      }\r\n  }\r\n\r\n  onBtnReset =()=>{\r\n    this.setState({loading:true,searching:false,page:1},()=>{\r\n      this.getAllData()\r\n\r\n    })\r\n\r\n  }\r\n\r\n//BUAT DOWNLOAD CSV\r\n  \r\n\r\n  btnDownloadCsv = ()=>{\r\n    this.setState({loadingBtn:true})\r\n\r\n    const arr = this.state.checkedData;\r\n  \r\n    if (arr.length===0){\r\n      swal(\"Info\",\"Silahkan Pilih Data yang ingin di download\",\"info\")\r\n      this.setState({loadingBtn:false})\r\n    }else{\r\n      var id=[];\r\n\r\n      for (var j=0;j<arr.length;j++){\r\n        id.push(arr[j])\r\n      }\r\n\r\n      const param = {\r\n        id: id.toString(),\r\n        status: 'approved',\r\n      }\r\n\r\n      if(param.id === 'all') {\r\n        delete param.id;\r\n      }\r\n\r\n      if(this.state.searching) {\r\n        param.start_approval_date = this.formatSearchingDate(this.state.startDate);\r\n        param.end_approval_date = this.formatSearchingDate(this.state.endDate, true);\r\n      }\r\n\r\n      this.btnCSVDownload(param)\r\n\r\n    }    \r\n  }\r\n\r\n  btnCSVDownload = async function (param){\r\n    this.setState({loading:true});\r\n\r\n    const data = await CSVDownloadFunction(param)\r\n\r\n    if(data){\r\n      \r\n      if(!data.error){\r\n        let dataCsv = data.data || [];\r\n      \r\n        if(dataCsv) {\r\n\r\n          for(const key in dataCsv) {\r\n\r\n            let feesData = {};\r\n\r\n            dataCsv[key].bank_account = `'${dataCsv[key].bank_account.toString()}`;\r\n            const loan_amount_float = dataCsv[key].loan_amount.toString().split('.')[1] && dataCsv[key].loan_amount.toString().split('.')[1].substring(0,2);\r\n            dataCsv[key].loan_amount = `${formatNumber(parseInt(dataCsv[key].loan_amount))},${loan_amount_float || '00'}`;\r\n            const total_loan_float = dataCsv[key].total_loan.toString().split('.')[1] && dataCsv[key].total_loan.toString().split('.')[1].substring(0,2);\r\n            dataCsv[key].total_loan = `${formatNumber(parseInt(dataCsv[key].total_loan))},${total_loan_float || '00'}`;\r\n            const monthly_income_float = dataCsv[key].monthly_income.toString().split('.')[1] && dataCsv[key].monthly_income.toString().split('.')[1].substring(0,2);\r\n            dataCsv[key].monthly_income = `${formatNumber(parseInt(dataCsv[key].monthly_income))},${monthly_income_float || '00'}`;\r\n            const layaway_plan_float = dataCsv[key].layaway_plan.toString().split('.')[1] && dataCsv[key].layaway_plan.toString().split('.')[1].substring(0,2);\r\n            dataCsv[key].layaway_plan = `${formatNumber(parseInt(dataCsv[key].layaway_plan))},${layaway_plan_float || '00'}`;\r\n\r\n            const fees = dataCsv[key].fees;\r\n\r\n            for(const keyFee in fees) {\r\n              let desc = fees[keyFee] && fees[keyFee].description && fees[keyFee].description.toString().toLowerCase();\r\n\r\n              while(desc && desc.includes(' ')) {\r\n                desc = desc.replace(' ','_')\r\n              }\r\n              \r\n              if(!feesData[desc] && fees[keyFee] && fees[keyFee].amount) {\r\n                feesData[desc] = '';\r\n                const fees_float = fees[keyFee] && fees[keyFee].amount && fees[keyFee].amount.toString().split('.')[1] && fees[keyFee].amount.toString().split('.')[1].substring(0,2);        \r\n                feesData[desc] = desc && fees[keyFee] && fees[keyFee].amount && `${formatNumber(parseInt(fees[keyFee].amount))},${fees_float || '00'}`\r\n                \r\n              }\r\n            }\r\n            \r\n            dataCsv[key].fees = feesData;\r\n          }\r\n\r\n        }\r\n\r\n        this.setState({loading:false,loadingBtn:false,downloadModal:true,downloadDataCSV:dataCsv})\r\n      } else{\r\n        this.setState({loading:false,loadingBtn:false,downloadModal:false,errorMessage:data.error})\r\n      }\r\n    }\r\n  }\r\n\r\n  onChangePage = (current) => {\r\n    this.setState({loading:true,page:current},()=>{\r\n        this.getAllData()\r\n    })\r\n  }\r\n\r\n  btnKonfirmasi = (e ,id)=>{\r\n    this.confirmDisburse({id})\r\n  } \r\n\r\n  confirmDisburse = async function (param){\r\n    const data = await confirmDisburseFunction (param)\r\n\r\n    if(data){\r\n      if(!data.error){\r\n          this.setState({telahDicairkan:'Dikonfirmasi'}, () => { this.getAllData()})\r\n          swal(\"Success\",\"Dana telah dicairkan\",\"success\")\r\n      }else{\r\n          swal(\"Fail\",\"Konfirmasi Gagal\",\"error\")\r\n      }\r\n    }\r\n  }\r\n\r\n  handleTanggalPencairan =(e)=>{\r\n    this.setState({ubahTanggalPencairan:e})\r\n  }\r\n  \r\n  toggleChangeDisburseDate = (e, id) => {\r\n    \r\n    this.setState({modal: true, idPinjaman: id});\r\n  }\r\n  \r\n  handleCheckBox =(e)=>{\r\n    let checkedData = this.state.checkedData;\r\n    if(e.target.checked){\r\n      if(e.target.value.toString() === 'all') {\r\n        checkedData = ['all']\r\n      } else {\r\n        checkedData.push(parseInt(e.target.value))\r\n      }\r\n    }else{\r\n      checkedData.splice(checkedData.indexOf(parseInt(e.target.value)),1)\r\n    }\r\n\r\n    this.setState({checkedData});\r\n    \r\n  }\r\n\r\n  ubahTanggalPencairanBtn = ()=>{\r\n    this.setState({disburse:true})\r\n    const {ubahTanggalPencairan,idPinjaman} = this.state\r\n\r\n    let startMonth =''+ (ubahTanggalPencairan.getMonth()+1),\r\n    startDay = '' + ubahTanggalPencairan.getDate(),\r\n    startYear = ubahTanggalPencairan.getFullYear();\r\n\r\n    if (startMonth.length < 2) startMonth = '0' + startMonth;\r\n    if (startDay.length < 2) startDay = '0' + startDay;\r\n\r\n    const changeDate = startYear+\"-\"+startMonth+\"-\"+startDay\r\n    const param ={\r\n      id:idPinjaman,\r\n      date:changeDate\r\n    }\r\n    \r\n    this.disburseDate(param)\r\n  }\r\n\r\n  disburseDate = async function (param){\r\n    const data = await changeDisburseDateFunction(param)\r\n\r\n    if(data){\r\n      if(!data.error){\r\n        swal(\"Success\",\"Tanggal pencairan berhasil diubah\",\"success\")\r\n        this.setState({modal:false,disburse:false,statusTanggalDisburse:'Diubah'},()=>{\r\n          this.getAllData()\r\n        })\r\n      }else{\r\n        swal(\"Fail\",\"Tanggal pencairan gagal diubah\",\"error\")\r\n        this.setState({disburse:false})\r\n\r\n      }\r\n    }\r\n  } \r\n\r\n  //FUNCTION BUAT MODAL\r\n \r\n  btnCancelModalDownload = ()=>{\r\n    this.setState({downloadModal:false,downloadDataCSV:[],searchModal:false})\r\n    var checkboxes = document.querySelectorAll('input[type=checkbox]:checked')\r\n    for (var i = 0; i < checkboxes.length; i++) {\r\n      checkboxes[i].checked = false;\r\n    }\r\n      this.setState({checkedData: []})\r\n  }\r\n\r\n  renderBtnOrLoading =()=>{\r\n    if (this.state.loadingBtn){\r\n        return  <Loader \r\n        type=\"ThreeDots\"\r\n        color=\"#00BFFF\"\r\n        height=\"30\"\t\r\n        width=\"30\"\r\n        \r\n     />   \r\n    }\r\n    else{\r\n        return(\r\n          <input type=\"button\" className=\"btn btn-primary ml-3\" onClick={this.btnDownloadCsv} value=\"CSV Download\"></input>\r\n        )\r\n    }\r\n  }\r\n\r\n  renderBtnDisburseDate =()=>{\r\n    if(this.state.disburse){\r\n      return(\r\n      <Button disableElevation color=\"primary\" onClick={this.ubahTanggalPencairanBtn}>   \r\n        <Loader \r\n          type=\"ThreeDots\"\r\n          color=\"#00BFFF\"\r\n          height=\"30\"\t\r\n          width=\"30\"\r\n        />       \r\n      </Button>  \r\n      )\r\n    }else{\r\n      return(\r\n        <Button disableElevation color=\"primary\" onClick={this.ubahTanggalPencairanBtn}><b>Simpan</b></Button>    \r\n\r\n      )\r\n    }\r\n  }\r\n    \r\n  render() {\r\n    if(getTokenClient() && getTokenAuth()){\r\n      \r\n      return (\r\n        <div style={{padding:0}}>\r\n\r\n        <Modal isOpen={this.state.downloadModal} className={this.props.className}>\r\n          <ModalHeader toggle={this.toggle}>Jumlah Download CSV: {this.state.checkedData && this.state.checkedData[0] && this.state.checkedData[0] === 'all' ? this.state.total_data : this.state.checkedData.length} item(s)</ModalHeader>\r\n          <ModalBody>\r\n          <CSVLink \r\n            headers={headerCsv}\r\n            data={this.state.downloadDataCSV} \r\n            filename={`Report Loan Telah Disetujui_${this.formatSearchingDate(new Date()).substring(0,10)}.csv`}\r\n          > \r\n            Click Here to Download CSV \r\n          </CSVLink>\r\n          </ModalBody>\r\n          <ModalFooter>\r\n            <Button disableElevation color=\"secondary\" onClick={this.btnCancelModalDownload}><b>Close</b></Button>\r\n          </ModalFooter>\r\n        </Modal>\r\n      \r\n        <Modal isOpen={this.state.modal} className={this.props.className}>\r\n          <ModalHeader toggle={this.toggle}>Ubah Tanggal Pencairan</ModalHeader>\r\n          <ModalBody>\r\n\r\n            <DatePicker\r\n              className=\"ml-3\"\r\n              format=\"yyyy-MM-dd\"\r\n              onChange={this.handleTanggalPencairan}\r\n              value={this.state.ubahTanggalPencairan}\r\n              clearIcon={null}\r\n            /> \r\n            \r\n                  \r\n            \r\n          </ModalBody>\r\n          <ModalFooter>\r\n\r\n            {this.renderBtnDisburseDate()}\r\n            <Button disableElevation color=\"secondary\" onClick={()=>this.setState({modal:false})}><b>Tutup</b></Button>\r\n          </ModalFooter>\r\n        </Modal>\r\n\r\n       \r\n          < TableComponent\r\n            id={\"id\"}\r\n            title={'Pinjaman Disetujui - List'}\r\n            errorMessage={this.state.errorMessage}\r\n            checkBoxAction={this.handleCheckBox}\r\n            searchDate={\r\n              {\r\n                value:[this.state.startDate, this.state.endDate],\r\n                label: 'Tanggal Approval',\r\n                function: [this.handleStartChange, this.handleEndChange],\r\n                button: [\r\n                  {\r\n                    label:'Cari',\r\n                    color:'#20B889',\r\n                    function:this.onBtnSearch\r\n                  },\r\n                  {\r\n                    label:'Reset',\r\n                    color:'#EE6969',\r\n                    function:this.onBtnReset\r\n                  },\r\n                ]\r\n              }\r\n            }\r\n            arrayCheckBox={this.state.checkedData}\r\n            paging={this.state.paging}\r\n            loading={this.state.loading}\r\n            columnData={columnDataUser}\r\n            data={this.state.rows}\r\n            page={this.state.page}\r\n            rowsPerPage={this.state.rowsPerPage}\r\n            totalData={this.state.total_data}\r\n            onChangePage={this.onChangePage}     \r\n            button={\r\n              [\r\n                {\r\n                  label:'Download CSV',\r\n                  color: '#20B889',\r\n                  function:this.btnDownloadCsv\r\n                },\r\n              ]\r\n            }        \r\n            permissionDetail={ checkPermission('lender_loan_request_detail') ? '/permintaanpinjamanDetail/' : null}\r\n          /> \r\n        \r\n        </div>\r\n      );\r\n    } else if (getTokenAuth()){\r\n      return  <Redirect to='/login' />\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProp = (state)=>{\r\n  return{\r\n      role: state.user.role,\r\n      id: state.user.id\r\n  }\r\n}\r\nexport default connect (mapStateToProp)(PinjamanSetuju) ;\r\n"]},"metadata":{},"sourceType":"module"}