{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\components\\\\pencairan\\\\pencairanList.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Loader from 'react-loader-spinner';\nimport { Link } from 'react-router-dom'; // import SubTable from './../subComponent/SubTable'\n\nimport localeInfo from 'rc-pagination/lib/locale/id_ID';\nimport Pagination from 'rc-pagination';\nimport { getPermintaanPinjamanFunction } from '../permintaanPinjaman/saga';\nimport { handleFormatDate, checkPermission } from '../global/globalFunction';\nimport { getTokenClient } from '../index/token';\nimport SearchBar from '../subComponent/SearchBar';\nimport TableComponent from '../subComponent/TableComponent';\nconst columnDataPencairan = [{\n  id: 'id',\n  numeric: false,\n  label: 'ID Pinjaman'\n}, {\n  id: 'owner_name',\n  numeric: false,\n  label: 'Nama Nasabah'\n}, {\n  id: 'disburse_date',\n  numeric: false,\n  label: 'Tanggal Pencairan'\n}, {\n  id: 'status',\n  numeric: false,\n  label: 'Status'\n}];\n\nclass PencairanList extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this.state = {\n      loading: true,\n      listPencairan: [],\n      paging: true,\n      page: 1,\n      rowsPerPage: 10,\n      totalData: 0,\n      search: ''\n    };\n\n    this.refresh = async function () {\n      const param = {\n        disburse_status: 'confirmed',\n        status: 'approved'\n      };\n      param.search_all = this.state.search;\n      param.rows = this.state.rowsPerPage;\n      param.page = this.state.page;\n      const data = await getPermintaanPinjamanFunction(param);\n\n      if (data) {\n        console.log(data);\n\n        if (!data.error) {\n          const listPencairan = data.loanRequest.data;\n\n          for (const key in listPencairan) {\n            listPencairan[key].disburse_date = handleFormatDate(new Date(listPencairan[key].disburse_date));\n\n            if (listPencairan[key].status === 'approved') {\n              listPencairan[key].status = 'Telah Dicairkan';\n            } else {\n              listPencairan[key].status = 'Belum Dicairkan';\n            }\n          }\n\n          this.setState({\n            listPencairan: data.loanRequest.data,\n            totalData: data.loanRequest.total_data,\n            loading: false\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error,\n            loading: false\n          });\n        }\n      }\n    };\n\n    this.onChangePage = (current, pageSize) => {\n      this.setState({\n        loading: true,\n        page: current\n      }, () => {\n        this.refresh();\n      });\n    };\n\n    this.changeSearch = e => {\n      this.setState({\n        loading: true,\n        page: 1,\n        search: e.target.value\n      }, () => {\n        this.refresh();\n      });\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.refresh();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    if (getTokenClient()) {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Pencairan - Loan Telah Dicairkan\")), React.createElement(\"div\", {\n        className: \"col-8\",\n        style: {\n          color: \"red\",\n          fontSize: \"15px\",\n          textAlign: 'left'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, this.state.errorMessage), React.createElement(\"div\", {\n        className: \"col-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        id: \"search\",\n        value: this.state.search,\n        placeholder: \"Search ID Nasabah, Nama Nasabah\",\n        onChange: this.changeSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(TableComponent, {\n        id: \"id\",\n        paging: this.state.paging,\n        loading: this.state.loading,\n        columnData: columnDataPencairan,\n        data: this.state.listPencairan,\n        page: this.state.page,\n        rowsPerPage: this.state.rowsPerPage,\n        totalData: this.state.totalData,\n        onChangePage: this.onChangePage,\n        permissionDetail: checkPermission('lender_loan_request_detail') ? '/pencairanDetail/' : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }));\n    }\n\n    if (!getTokenClient()) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default PencairanList;","map":{"version":3,"sources":["C:\\Users\\pc\\Desktop\\asira_fe\\src\\components\\pencairan\\pencairanList.js"],"names":["React","Redirect","Loader","Link","localeInfo","Pagination","getPermintaanPinjamanFunction","handleFormatDate","checkPermission","getTokenClient","SearchBar","TableComponent","columnDataPencairan","id","numeric","label","PencairanList","Component","_isMounted","state","loading","listPencairan","paging","page","rowsPerPage","totalData","search","refresh","param","disburse_status","status","search_all","rows","data","console","log","error","loanRequest","key","disburse_date","Date","setState","total_data","errorMessage","onChangePage","current","pageSize","changeSearch","e","target","value","componentDidMount","componentWillUnmount","render","color","fontSize","textAlign"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport Loader from 'react-loader-spinner'\r\nimport {Link} from 'react-router-dom'\r\n// import SubTable from './../subComponent/SubTable'\r\nimport localeInfo from 'rc-pagination/lib/locale/id_ID'\r\nimport Pagination from 'rc-pagination';\r\nimport { getPermintaanPinjamanFunction } from '../permintaanPinjaman/saga';\r\nimport { handleFormatDate, checkPermission } from '../global/globalFunction';\r\nimport { getTokenClient } from '../index/token';\r\nimport SearchBar from '../subComponent/SearchBar'\r\nimport TableComponent from '../subComponent/TableComponent'\r\n\r\n\r\n\r\nconst columnDataPencairan = [\r\n    {\r\n        id: 'id',\r\n        numeric: false,\r\n        label: 'ID Pinjaman',\r\n    },\r\n    {\r\n        id: 'owner_name',\r\n        numeric: false,\r\n        label: 'Nama Nasabah',\r\n    },\r\n    {\r\n        id: 'disburse_date',\r\n        numeric: false,\r\n        label: 'Tanggal Pencairan',\r\n    },\r\n    {\r\n        id: 'status',\r\n        numeric: false,\r\n        label: 'Status',\r\n    },\r\n]\r\n\r\nclass PencairanList extends React.Component{\r\n    _isMounted = false;\r\n\r\n    state = {\r\n        loading:true, \r\n        listPencairan: [],\r\n        paging: true,\r\n        page: 1,\r\n        rowsPerPage: 10,\r\n        totalData: 0,\r\n        search: '',\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted = true;\r\n        this.refresh()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    refresh = async function(){\r\n        const param = {\r\n            disburse_status: 'confirmed',\r\n            status: 'approved',\r\n        };\r\n\r\n        param.search_all = this.state.search;\r\n        param.rows = this.state.rowsPerPage;\r\n        param.page = this.state.page;\r\n\r\n        const data = await getPermintaanPinjamanFunction(param);\r\n\r\n        if(data) {\r\n            console.log(data)\r\n            if(!data.error) {\r\n                const listPencairan = data.loanRequest.data;\r\n\r\n                for(const key in listPencairan) {\r\n                    listPencairan[key].disburse_date = handleFormatDate(new Date(listPencairan[key].disburse_date))\r\n                    if(listPencairan[key].status === 'approved') {\r\n                        listPencairan[key].status = 'Telah Dicairkan'\r\n                    } else {\r\n                        listPencairan[key].status = 'Belum Dicairkan'\r\n                    }\r\n                }\r\n\r\n                this.setState({\r\n                    listPencairan: data.loanRequest.data ,\r\n                    totalData: data.loanRequest.total_data,\r\n                    loading: false,\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    errorMessage: data.error,\r\n                    loading: false,\r\n                })\r\n            }      \r\n        }\r\n    }\r\n\r\n    onChangePage = (current, pageSize) => {\r\n        this.setState({\r\n            loading:true,\r\n            page:current,\r\n        }, () => {\r\n            this.refresh();\r\n        })\r\n    }\r\n    \r\n    changeSearch = (e) => {\r\n        this.setState({\r\n            loading:true,\r\n            page: 1,\r\n            search: e.target.value,\r\n        }, () => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    render(){\r\n        \r\n        \r\n        if(getTokenClient()){\r\n            return(\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <h2 className=\"mt-3\">Pencairan - Loan Telah Dicairkan</h2>\r\n                        </div>\r\n                        <div className=\"col-8\" style={{color:\"red\",fontSize:\"15px\",textAlign:'left'}}>\r\n                            {this.state.errorMessage}\r\n                        </div>  \r\n                        <div className=\"col-4\">\r\n                            <SearchBar\r\n                                id=\"search\"\r\n                                value={this.state.search}\r\n                                placeholder=\"Search ID Nasabah, Nama Nasabah\"\r\n                                onChange={this.changeSearch} \r\n                            />\r\n                        </div>  \r\n                    </div>\r\n                   <hr/>\r\n\r\n                   < TableComponent\r\n                        id={\"id\"}\r\n                        paging={this.state.paging}\r\n                        loading={this.state.loading}\r\n                        columnData={columnDataPencairan}\r\n                        data={this.state.listPencairan}\r\n                        page={this.state.page}\r\n                        rowsPerPage={this.state.rowsPerPage}\r\n                        totalData={this.state.totalData}\r\n                        onChangePage={this.onChangePage}             \r\n                        permissionDetail={ checkPermission('lender_loan_request_detail') ? '/pencairanDetail/' : null}\r\n                    />\r\n\r\n                  \r\n                </div>\r\n            )\r\n        }\r\n        if(!getTokenClient()){\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport default PencairanList;"]},"metadata":{},"sourceType":"module"}