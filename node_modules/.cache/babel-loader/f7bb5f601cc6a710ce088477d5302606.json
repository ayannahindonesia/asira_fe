{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\components\\\\index\\\\changePassword.js\";\nimport React from 'react';\nimport { Grid, Button, TextField } from '@material-ui/core';\nimport './../../support/css/login.css';\nimport { Redirect } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport { changePasswordFunction, changeFirstLoginFunction } from './saga';\nimport Loader from 'react-loader-spinner';\n\nclass changePassword extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this.state = {\n      loading: false,\n      errorMessage: '',\n      diKlik: false,\n      password1: '',\n      password2: ''\n    };\n\n    this.btnChangePassword = () => {\n      this.setState({\n        loading: true\n      });\n      const password1 = this.state.password1;\n      const password2 = this.state.password2;\n\n      if (password1.toLowerCase() !== password2.toLowerCase()) {\n        this.setState({\n          errorMessage: \"Password tidak sesuai - Harap periksa kembali\",\n          loading: false\n        });\n      } else if (password1.trim() === '' || password2.trim() === '') {\n        this.setState({\n          errorMessage: \"Field ada yang kosong - Harap periksa kembali\",\n          loading: false\n        });\n      } else {\n        if (!this.props.type) {\n          const arr = window.location.href.split(\"?\");\n\n          if (arr.length > 1) {\n            const token = arr[1].slice(arr[1].indexOf('=') + 1, arr[1].length);\n            const param = {\n              token,\n              password: password1\n            };\n            this.changePass(param);\n          } else {\n            this.setState({\n              errorMessage: \"Token kosong/ Invalid\"\n            });\n          }\n        } else {\n          const param = {\n            password: password1\n          };\n          this.changePass(param);\n        }\n      }\n    };\n\n    this.handleChangeTextField = e => {\n      const label = e.target.id;\n      this.setState({\n        [label]: e.target.value\n      });\n    };\n\n    this.changePass = async function (param) {\n      const data = this.props.type && this.props.type === 'firstlogin' ? await changeFirstLoginFunction(param) : await changePasswordFunction(param);\n\n      if (data) {\n        if (!data.error) {\n          localStorage.clear();\n          swal(\"Berhasil\", \"Password berhasil dirubah\", \"success\");\n          this._isMounted && this.setState({\n            errorMessage: null,\n            diKlik: true\n          });\n        } else {\n          this._isMounted && this.setState({\n            errorMessage: data.error,\n            loading: false\n          });\n        }\n      }\n    };\n\n    this.renderBtnOrLoading = () => {\n      if (this.state.loading) {\n        return React.createElement(Button, {\n          color: \"primary\",\n          variant: \"contained\",\n          style: {\n            backgroundColor: '#20B889',\n            width: '70%',\n            color: 'white'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(Loader, {\n          type: \"ThreeDots\",\n          color: \"#00BFFF\",\n          height: \"10\",\n          width: \"10\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(Button, {\n          variant: \"contained\",\n          style: {\n            backgroundColor: '#20B889',\n            width: '70%',\n            color: 'white'\n          },\n          onClick: this.btnChangePassword,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, \"Ubah Password\");\n      }\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    this.setState({\n      errorMessage: newProps.error\n    });\n  }\n\n  render() {\n    if (this.state.diKlik) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(Grid, {\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      className: \"loginContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 12,\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: require('./../../icons/LogoAsira.png'),\n      alt: \"\",\n      style: {\n        width: '60%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 12,\n      className: \"loginBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 12,\n      style: {\n        marginTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Ubah Password \"), React.createElement(\"div\", {\n      style: {\n        color: \"red\",\n        fontSize: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, this.state.errorMessage)), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 12,\n      style: {\n        marginTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      id: 'password1',\n      type: \"password\",\n      size: \"small\",\n      margin: \"dense\",\n      variant: \"outlined\",\n      style: {\n        width: \"70%\"\n      },\n      label: 'Password Baru',\n      value: this.state.password1,\n      onChange: this.handleChangeTextField,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 12,\n      style: {\n        marginTop: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      id: 'password2',\n      type: \"password\",\n      size: \"small\",\n      margin: \"dense\",\n      variant: \"outlined\",\n      style: {\n        width: \"70%\"\n      },\n      label: 'Konfirmasi Password Baru',\n      onKeyPress: this.handleEnter,\n      value: this.state.password2,\n      onChange: this.handleChangeTextField,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 12,\n      style: {\n        marginTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, this.renderBtnOrLoading()), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 12,\n      style: {\n        marginTop: 20,\n        marginBottom: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: require('./../../icons/powered.svg'),\n      alt: \"\",\n      style: {\n        width: '30%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    })))))), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default changePassword;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_fe/src/components/index/changePassword.js"],"names":["React","Grid","Button","TextField","Redirect","swal","changePasswordFunction","changeFirstLoginFunction","Loader","changePassword","Component","_isMounted","state","loading","errorMessage","diKlik","password1","password2","btnChangePassword","setState","toLowerCase","trim","props","type","arr","window","location","href","split","length","token","slice","indexOf","param","password","changePass","handleChangeTextField","e","label","target","id","value","data","error","localStorage","clear","renderBtnOrLoading","backgroundColor","width","color","componentDidMount","componentWillUnmount","UNSAFE_componentWillReceiveProps","newProps","render","textAlign","require","marginTop","fontSize","handleEnter","marginBottom"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Grid, Button, TextField } from '@material-ui/core'\r\nimport './../../support/css/login.css'\r\nimport { Redirect  } from 'react-router-dom'\r\nimport swal from 'sweetalert'\r\nimport { changePasswordFunction, changeFirstLoginFunction} from './saga'\r\n\r\nimport Loader from 'react-loader-spinner'\r\n\r\nclass changePassword extends React.Component{\r\n    _isMounted = false\r\n\r\n    state = {\r\n        loading:false,\r\n        errorMessage:'',\r\n        diKlik:false,password1:'',password2:''\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted=true\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this._isMounted=false\r\n    }\r\n    UNSAFE_componentWillReceiveProps(newProps){\r\n        this.setState({errorMessage:newProps.error})\r\n    }\r\n    btnChangePassword = ()=>{   \r\n    this.setState({loading:true})\r\n\r\n    const password1 = this.state.password1\r\n    const password2 = this.state.password2\r\n\r\n    if(password1.toLowerCase() !== password2.toLowerCase()){\r\n        this.setState({errorMessage:\"Password tidak sesuai - Harap periksa kembali\",loading:false})\r\n    }else if(password1.trim()==='' || password2.trim()===''){\r\n        this.setState({errorMessage:\"Field ada yang kosong - Harap periksa kembali\",loading:false})\r\n    }else {\r\n        \r\n        if(!this.props.type) {\r\n            const arr =  window.location.href.split(\"?\")\r\n\r\n            if (arr.length>1){\r\n                const token = arr[1].slice(arr[1].indexOf('=')+1,arr[1].length)\r\n                \r\n                const param = {\r\n                    token,\r\n                    password:password1\r\n                }\r\n                this.changePass(param)\r\n            }else{\r\n               this.setState({errorMessage:\"Token kosong/ Invalid\"})\r\n            }\r\n        } else {\r\n            const param = {\r\n                password:password1\r\n            }\r\n            this.changePass(param)\r\n        }\r\n        \r\n    }\r\n\r\n    }\r\n    \r\n    handleChangeTextField = (e) => {\r\n        const label = e.target.id;\r\n\r\n        this.setState({\r\n            [label] : e.target.value,\r\n        })\r\n    }\r\n\r\n     changePass = async function (param){\r\n         const data = this.props.type && this.props.type === 'firstlogin' ? await changeFirstLoginFunction(param) : await changePasswordFunction (param)\r\n         if(data){\r\n             if(!data.error){\r\n                localStorage.clear();\r\n                swal(\"Berhasil\",\"Password berhasil dirubah\",\"success\")\r\n                this._isMounted && this.setState({errorMessage:null,diKlik:true})\r\n             }else{\r\n                this._isMounted && this.setState({errorMessage:data.error,loading:false})\r\n             }\r\n         }\r\n\r\n     }\r\n    renderBtnOrLoading =()=>{\r\n        if (this.state.loading){\r\n            return ( \r\n                <Button color=\"primary\"\r\n                variant='contained'\r\n                style={{backgroundColor: '#20B889', width:'70%', color:'white'}}\r\n                >\r\n                    <Loader \r\n                    type=\"ThreeDots\"\r\n                    color=\"#00BFFF\"\r\n                    height=\"10\"\t\r\n                    width=\"10\"\r\n                />   \r\n                </Button>\r\n            );\r\n        }\r\n        else{\r\n            return(\r\n                <Button\r\n                variant='contained'\r\n                style={{backgroundColor: '#20B889', width:'70%', color:'white'}}\r\n                onClick={this.btnChangePassword}>\r\n                    Ubah Password\r\n                </Button>\r\n            )\r\n        }\r\n    }\r\n\r\n    render(){\r\n        if(this.state.diKlik){\r\n            return <Redirect to='/'/>            \r\n        }\r\n        return(\r\n            <Grid container>\r\n                    <Grid item xs={12} sm={4}>\r\n                        \r\n                    </Grid>\r\n                    <Grid item xs={12} sm={4}>\r\n                        <Grid container className='loginContainer'>\r\n                            <Grid item xs={12} sm={12} style={{textAlign:'center'}}>\r\n                                <img src={require('./../../icons/LogoAsira.png')} alt='' style={{width:'60%'}} />\r\n                            </Grid>\r\n                            <Grid item xs={12} sm={12}  className='loginBox'>\r\n                                <Grid container>\r\n                                    <Grid item xs={12} sm={12} style={{marginTop:20}}>\r\n                                        <h5>Ubah Password </h5>\r\n                                        <div style={{color:\"red\",fontSize:\"10px\"}}>\r\n                                                {this.state.errorMessage}\r\n                                        </div>\r\n                                    </Grid>\r\n                                    <Grid item xs={12} sm={12} style={{marginTop:20}}>\r\n                                        <TextField\r\n                                            id={'password1'}\r\n                                            type='password'\r\n                                            size=\"small\"\r\n                                            margin=\"dense\"\r\n                                            variant='outlined'\r\n                                            style={{width:\"70%\"}}\r\n                                            label={'Password Baru'}\r\n                                            value={this.state.password1}\r\n                                            onChange={this.handleChangeTextField}\r\n                                        /> \r\n                                    </Grid>\r\n                                    <Grid item xs={12} sm={12} style={{marginTop:10}}>\r\n                                        <TextField\r\n                                            id={'password2'}\r\n                                            type='password'\r\n                                            size=\"small\"\r\n                                            margin=\"dense\"\r\n                                            variant='outlined'\r\n                                            style={{width:\"70%\"}}\r\n                                            label={'Konfirmasi Password Baru'}\r\n                                            onKeyPress={this.handleEnter}\r\n                                            value={this.state.password2}\r\n                                            onChange={this.handleChangeTextField}\r\n                                        />  \r\n                                        \r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={12} sm={12} style={{marginTop:20}}>\r\n                                        {this.renderBtnOrLoading()}\r\n                                        \r\n                                    </Grid>\r\n                                    <Grid item xs={12} sm={12} style={{marginTop:20, marginBottom:20}}>\r\n                                        <img src={require('./../../icons/powered.svg')} alt='' style={{width:'30%'}} />\r\n                                    </Grid>\r\n                                </Grid>\r\n                                \r\n                            </Grid>\r\n                        </Grid>\r\n                        \r\n                    </Grid>\r\n                    <Grid item xs={12} sm={4}>\r\n                        \r\n                    </Grid>\r\n\r\n                  \r\n                </Grid>\r\n        )\r\n    }\r\n}\r\n\r\nexport default changePassword;"]},"metadata":{},"sourceType":"module"}