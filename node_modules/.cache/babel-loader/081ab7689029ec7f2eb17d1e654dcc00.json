{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\components\\\\layanan\\\\layanan.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport './../../support/css/pagination.css';\nimport { getAllLayananListFunction } from './saga';\nimport 'moment/locale/id';\nimport { getTokenClient, getTokenAuth } from '../index/token';\nimport TableComponent from './../subComponent/TableComponent';\nimport { checkPermission } from '../global/globalFunction';\nvar columnDataUser = [{\n  id: 'id',\n  numeric: false,\n  label: 'ID'\n}, {\n  id: 'name',\n  numeric: false,\n  label: 'Nama Layanan'\n}, {\n  id: 'status',\n  numeric: false,\n  label: 'Status'\n}];\n\nvar Layanan = /*#__PURE__*/function (_React$Component) {\n  _inherits(Layanan, _React$Component);\n\n  var _super = _createSuper(Layanan);\n\n  function Layanan() {\n    var _this;\n\n    _classCallCheck(this, Layanan);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this._isMounted = false;\n    _this.state = {\n      rows: [],\n      searchRows: '',\n      paging: true,\n      page: 1,\n      rowsPerPage: 10,\n      isEdit: false,\n      total_data: 0,\n      last_page: 1 //loading:true,\n\n    };\n    _this.getLayananList = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var param, hasil, data, dataNasabah, key;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              param = {\n                rows: this.state.rowsPerPage,\n                page: this.state.page\n              };\n              hasil = this.state.searchRows.toLowerCase();\n\n              if (hasil) {\n                param.search_all = hasil;\n              }\n\n              _context.next = 5;\n              return getAllLayananListFunction(param);\n\n            case 5:\n              data = _context.sent;\n              dataNasabah = data.layananList.data;\n\n              for (key in dataNasabah) {\n                dataNasabah[key].status = dataNasabah[key].status === 'active' ? \"Aktif\" : \"Tidak Aktif\";\n              }\n\n              if (data) {\n                if (!data.error) {\n                  this._isMounted && this.setState({\n                    loading: false,\n                    rows: dataNasabah,\n                    rowsPerPage: data.layananList.rows,\n                    total_data: data.layananList.total_data,\n                    last_page: data.layananList.last_page,\n                    page: data.layananList.current_page\n                  });\n                } else {\n                  this._isMounted && this.setState({\n                    errorMessage: data.error\n                  });\n                }\n              }\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.onBtnSearch = function (e) {\n      _this.setState({\n        loading: true,\n        searchRows: e.target.value,\n        page: 1\n      }, function () {\n        if (_this.state.paging) {\n          _this.getLayananList();\n        }\n      });\n    };\n\n    _this.onChangePage = function (current) {\n      _this.setState({\n        loading: true,\n        page: current\n      }, function () {\n        if (_this.state.paging) {\n          _this.getLayananList();\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Layanan, [{\n    key: \"componentDidMount\",\n    //-----------------------------------NIKO FUNCTION-------------------------------------------------------------\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this._isMounted && this.getLayananList();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    } //Ambil data pertama kali\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (getTokenClient() && getTokenAuth()) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            padding: 0\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(TableComponent, {\n          id: \"id\",\n          title: 'Layanan - List',\n          search: {\n            value: this.state.searchRows,\n            label: 'Search ID, nama Layanan',\n            function: this.onBtnSearch\n          },\n          errorMessage: this.state.errorMessage,\n          paging: this.state.paging,\n          loading: this.state.loading,\n          columnData: columnDataUser,\n          data: this.state.rows,\n          page: this.state.page,\n          rowsPerPage: this.state.rowsPerPage,\n          totalData: this.state.total_data,\n          onChangePage: this.onChangePage,\n          permissionDetail: checkPermission('lender_service_list') ? '/layananDetail/' : null,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 11\n          }\n        }));\n      } else if (getTokenAuth()) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/login\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }\n        });\n      }\n    }\n  }]);\n\n  return Layanan;\n}(React.Component);\n\nexport default Layanan;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_fe/src/components/layanan/layanan.js"],"names":["React","Redirect","getAllLayananListFunction","getTokenClient","getTokenAuth","TableComponent","checkPermission","columnDataUser","id","numeric","label","Layanan","_isMounted","state","rows","searchRows","paging","page","rowsPerPage","isEdit","total_data","last_page","getLayananList","param","hasil","toLowerCase","search_all","data","dataNasabah","layananList","key","status","error","setState","loading","current_page","errorMessage","onBtnSearch","e","target","value","onChangePage","current","padding","function","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Redirect } from 'react-router-dom'\r\nimport './../../support/css/pagination.css'\r\nimport { getAllLayananListFunction } from './saga'\r\nimport 'moment/locale/id';\r\nimport { getTokenClient,getTokenAuth } from '../index/token'\r\nimport TableComponent from './../subComponent/TableComponent'\r\nimport { checkPermission } from '../global/globalFunction';\r\n\r\nconst columnDataUser = [\r\n  {\r\n      id: 'id',\r\n      numeric: false,\r\n      label: 'ID',\r\n  },\r\n  {\r\n      id: 'name',\r\n      numeric: false,\r\n      label: 'Nama Layanan',\r\n  },\r\n  {\r\n      id: 'status',\r\n      numeric: false,\r\n      label: 'Status',\r\n  }\r\n]\r\n\r\nclass Layanan extends React.Component {\r\n  \r\n  _isMounted = false\r\n  state = {\r\n    rows: [], \r\n    searchRows:'',\r\n    paging:true,\r\n    page: 1,\r\n    rowsPerPage: 10,\r\n    isEdit: false,\r\n    total_data:0,\r\n    last_page:1,\r\n    //loading:true,\r\n  };\r\n  //-----------------------------------NIKO FUNCTION-------------------------------------------------------------\r\n  componentDidMount(){\r\n    this._isMounted=true\r\n   this._isMounted && this.getLayananList()\r\n  }\r\n  componentWillUnmount(){\r\n    this._isMounted=false\r\n  }\r\n  \r\n  //Ambil data pertama kali\r\n  getLayananList = async function(){\r\n    const param ={\r\n      rows:this.state.rowsPerPage,\r\n      page:this.state.page\r\n    }\r\n    let hasil = this.state.searchRows.toLowerCase()\r\n\r\n    if(hasil){\r\n      param.search_all = hasil\r\n    }\r\n    const data = await getAllLayananListFunction(param)\r\n    const dataNasabah = data.layananList.data;\r\n\r\n    for (const key in dataNasabah){\r\n        dataNasabah[key].status = dataNasabah[key].status ==='active'?\"Aktif\":\"Tidak Aktif\"\r\n    }\r\n\r\n    if(data){\r\n      if(!data.error){\r\n        this._isMounted && this.setState({loading:false,\r\n          rows:dataNasabah,\r\n          rowsPerPage:data.layananList.rows,\r\n          total_data:data.layananList.total_data,\r\n          last_page:data.layananList.last_page,\r\n          page:data.layananList.current_page})\r\n      }else{\r\n        this._isMounted && this.setState({errorMessage:data.error})\r\n      }\r\n    }\r\n  }\r\n\r\n  onBtnSearch = (e)=>{\r\n    this.setState({loading:true,searchRows:e.target.value,page:1},()=>{\r\n      if(this.state.paging){\r\n        this.getLayananList()\r\n    }\r\n    })\r\n  }\r\n  \r\n  onChangePage = (current) => {\r\n    this.setState({loading:true,page:current},()=>{\r\n      if(this.state.paging){\r\n        this.getLayananList()\r\n      }\r\n    })\r\n  }\r\n  \r\n  render() {\r\n    if(getTokenClient()&&getTokenAuth()){\r\n      return (\r\n        <div style={{padding:0}}>\r\n          < TableComponent\r\n            id={\"id\"}\r\n            title={'Layanan - List'}\r\n            search={\r\n              {\r\n                value: this.state.searchRows,\r\n                label: 'Search ID, nama Layanan',\r\n                function: this.onBtnSearch,\r\n              }\r\n            }\r\n            errorMessage={this.state.errorMessage}\r\n            paging={this.state.paging}\r\n            loading={this.state.loading}\r\n            columnData={columnDataUser}\r\n            data={this.state.rows}\r\n            page={this.state.page}\r\n            rowsPerPage={this.state.rowsPerPage}\r\n            totalData={this.state.total_data}\r\n            onChangePage={this.onChangePage}             \r\n            permissionDetail={ checkPermission('lender_service_list') ? '/layananDetail/' : null}\r\n          /> \r\n        </div>\r\n      );\r\n    }\r\n    else if(getTokenAuth()){\r\n      return  <Redirect to='/login' />\r\n    }\r\n  }\r\n}\r\n\r\nexport default (Layanan) ;"]},"metadata":{},"sourceType":"module"}