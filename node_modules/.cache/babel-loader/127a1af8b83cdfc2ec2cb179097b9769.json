{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\components\\\\calonNasabah\\\\calonNasabahList.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { getAllBorrowerFunction } from './saga';\nimport { checkPermission, handleFormatDate } from '../global/globalFunction';\nimport { getTokenClient } from '../index/token';\nimport TableComponent from '../subComponent/TableComponent';\nvar columnDataUser = [{\n  id: 'id',\n  numeric: false,\n  label: 'ID Nasabah'\n}, {\n  id: 'fullname',\n  numeric: false,\n  label: 'Nama Nasabah'\n}, {\n  id: 'category',\n  numeric: false,\n  label: 'Kategori'\n}, {\n  id: 'created_at',\n  numeric: false,\n  label: 'Tanggal Registrasi'\n}];\n\nvar CalonNasabahList = /*#__PURE__*/function (_React$Component) {\n  _inherits(CalonNasabahList, _React$Component);\n\n  var _super = _createSuper(CalonNasabahList);\n\n  function CalonNasabahList(props) {\n    var _this;\n\n    _classCallCheck(this, CalonNasabahList);\n\n    _this = _super.call(this, props);\n    _this._isMounted = false;\n    _this.refresh = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var param, data, dataListUser, key;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              param = {};\n              param.search_all = this.state.search;\n              param.rows = this.state.rowsPerPage;\n              param.page = this.state.page;\n              _context.next = 6;\n              return getAllBorrowerFunction(param);\n\n            case 6:\n              data = _context.sent;\n\n              if (data) {\n                if (!data.error) {\n                  dataListUser = data.dataUser || [];\n\n                  if (dataListUser.length !== 0) {\n                    for (key in dataListUser) {\n                      dataListUser[key].created_at = dataListUser[key].created_at && handleFormatDate(dataListUser[key].created_at);\n                      dataListUser[key].category = this.isCategoryExist(dataListUser[key].category);\n                    }\n                  }\n\n                  this._isMounted && this.setState({\n                    errorMessage: '',\n                    listUser: dataListUser,\n                    totalData: data.totalData,\n                    loading: false\n                  });\n                } else {\n                  this._isMounted && this.setState({\n                    errorMessage: data.error,\n                    loading: false\n                  });\n                }\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.isCategoryExist = function (category) {\n      if (category && category.toString().toLowerCase() === 'agent') {\n        return 'Agen';\n      } else if (category && category.toString().toLowerCase() === 'account_executive') {\n        return 'Account Executive';\n      }\n\n      return 'Personal';\n    };\n\n    _this.onChangePage = function (current) {\n      _this.setState({\n        loading: true,\n        page: current\n      }, function () {\n        if (_this.state.paging) {\n          _this.refresh();\n        }\n\n        ;\n      });\n    };\n\n    _this.changeSearch = function (e) {\n      _this.setState({\n        loading: true,\n        page: 1,\n        search: e.target.value\n      }, function () {\n        _this.refresh();\n      });\n    };\n\n    _this.state = {\n      paging: true,\n      loading: true,\n      listUser: [],\n      page: 1,\n      rowsPerPage: 10,\n      totalData: 0,\n      search: ''\n    };\n    return _this;\n  }\n\n  _createClass(CalonNasabahList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this._isMounted && this.refresh();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (getTokenClient()) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            padding: 0\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(TableComponent, {\n          id: \"id\",\n          errorMessage: this.state.errorMessage,\n          title: 'Calon Nasabah - List',\n          search: {\n            value: this.state.search,\n            label: 'Search ID, Nama Nasabah',\n            function: this.changeSearch\n          },\n          paging: this.state.paging,\n          loading: this.state.loading,\n          columnData: columnDataUser,\n          data: this.state.listUser,\n          page: this.state.page,\n          rowsPerPage: this.state.rowsPerPage,\n          totalData: this.state.totalData,\n          onChangePage: this.onChangePage,\n          permissionDetail: checkPermission('lender_borrower_list_detail') ? '/detailCalonNasabah/' : null,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 21\n          }\n        }));\n      }\n\n      if (!getTokenClient()) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/login\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 17\n          }\n        });\n      }\n    }\n  }]);\n\n  return CalonNasabahList;\n}(React.Component);\n\nexport default CalonNasabahList;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_fe/src/components/calonNasabah/calonNasabahList.js"],"names":["React","Redirect","getAllBorrowerFunction","checkPermission","handleFormatDate","getTokenClient","TableComponent","columnDataUser","id","numeric","label","CalonNasabahList","props","_isMounted","refresh","param","search_all","state","search","rows","rowsPerPage","page","data","error","dataListUser","dataUser","length","key","created_at","category","isCategoryExist","setState","errorMessage","listUser","totalData","loading","toString","toLowerCase","onChangePage","current","paging","changeSearch","e","target","value","padding","function","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport {getAllBorrowerFunction} from './saga'\r\nimport { checkPermission, handleFormatDate } from '../global/globalFunction';\r\nimport { getTokenClient } from '../index/token'\r\nimport TableComponent from '../subComponent/TableComponent'\r\n\r\n\r\nconst columnDataUser = [\r\n    {\r\n        id: 'id',\r\n        numeric: false,\r\n        label: 'ID Nasabah',\r\n    },\r\n    {\r\n        id: 'fullname',\r\n        numeric: false,\r\n        label: 'Nama Nasabah',\r\n    },\r\n    {\r\n        id: 'category',\r\n        numeric: false,\r\n        label: 'Kategori',\r\n    },\r\n    { id: 'created_at', numeric: false, label: 'Tanggal Registrasi'},\r\n]\r\n\r\nclass CalonNasabahList extends React.Component{\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            paging:true,\r\n            loading:true, \r\n            listUser: [],\r\n            page: 1,\r\n            rowsPerPage: 10,\r\n            totalData: 0,\r\n            search: '',\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted = true;\r\n        this._isMounted && this.refresh()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    refresh = async function(){\r\n        const param = {};\r\n        param.search_all = this.state.search;\r\n\r\n        param.rows = this.state.rowsPerPage;\r\n        param.page = this.state.page;\r\n\r\n        const data = await getAllBorrowerFunction(param);\r\n\r\n        if(data) {\r\n            if(!data.error) {\r\n                const dataListUser = data.dataUser || [];\r\n\r\n                if(dataListUser.length !== 0) {\r\n                    for(const key in dataListUser) {\r\n                        dataListUser[key].created_at = dataListUser[key].created_at && handleFormatDate(dataListUser[key].created_at)\r\n                        dataListUser[key].category = this.isCategoryExist(dataListUser[key].category) \r\n                    }\r\n                }\r\n\r\n                this._isMounted && this.setState({\r\n                    errorMessage:'',\r\n                    listUser: dataListUser,\r\n                    totalData: data.totalData,\r\n                    loading: false,\r\n                })\r\n            } else {\r\n                this._isMounted && this.setState({\r\n                    errorMessage: data.error,\r\n                    loading: false,\r\n                })\r\n            }      \r\n        }\r\n    }\r\n\r\n    isCategoryExist = (category) => {\r\n        if(category && category.toString().toLowerCase() === 'agent') {\r\n          return 'Agen'\r\n        } else if(category && category.toString().toLowerCase() === 'account_executive') {\r\n          return 'Account Executive'\r\n        } \r\n  \r\n        return 'Personal';\r\n    }\r\n\r\n    onChangePage = (current) => {\r\n        this.setState({\r\n            loading:true,\r\n            page:current,\r\n        }, () => {\r\n            if(this.state.paging) {\r\n                this.refresh()\r\n            };\r\n        })\r\n    }\r\n\r\n    changeSearch = (e) => {\r\n        this.setState({\r\n            loading:true,\r\n            page: 1,\r\n            search: e.target.value,\r\n        }, () => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    render(){\r\n\r\n        if(getTokenClient()){\r\n            return(\r\n                <div style={{padding:0}}>\r\n                    \r\n                    < TableComponent\r\n                        id={\"id\"}\r\n                        errorMessage={this.state.errorMessage}\r\n                        title={'Calon Nasabah - List'}\r\n                        search={\r\n                            {\r\n                              value: this.state.search,\r\n                              label: 'Search ID, Nama Nasabah',\r\n                              function: this.changeSearch,\r\n                            }\r\n                          }\r\n                        paging={this.state.paging}\r\n                        loading={this.state.loading}\r\n                        columnData={columnDataUser}\r\n                        data={this.state.listUser}\r\n                        page={this.state.page}\r\n                        rowsPerPage={this.state.rowsPerPage}\r\n                        totalData={this.state.totalData}\r\n                        onChangePage={this.onChangePage}             \r\n                        permissionDetail={ checkPermission('lender_borrower_list_detail') ? '/detailCalonNasabah/' : null}\r\n                    />\r\n\r\n                  \r\n                </div>\r\n            )\r\n        }\r\n        if(!getTokenClient()){\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport default CalonNasabahList;"]},"metadata":{},"sourceType":"module"}