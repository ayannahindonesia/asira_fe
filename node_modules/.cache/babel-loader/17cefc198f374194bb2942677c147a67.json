{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport axios from 'axios';\nimport jsonWebToken from 'jsonwebtoken';\nimport { serverUrl, serverUrlBorrower } from '../url';\nimport { setTokenClient, setTokenBorrower, getTokenAuth, getTokenClient } from './token';\nexport function postLoginBankDashboardFunction(param, next, nextProfile) {\n  return _regeneratorRuntime.async(function postLoginBankDashboardFunction$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.abrupt(\"return\", new Promise(function _callee(resolve) {\n            var tokenAuth, config, newLink, logindata;\n            return _regeneratorRuntime.async(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    tokenAuth = getTokenAuth();\n                    config = {\n                      headers: {\n                        'Authorization': \"Bearer \" + tokenAuth\n                      }\n                    };\n                    newLink = serverUrl + \"client/lender_login\";\n                    logindata = {\n                      key: param.key,\n                      password: param.password\n                    };\n                    axios.post(newLink, logindata, config).then(function (res) {\n                      param.dataTokenLender = res.data.token;\n                      delete param.password;\n                      setTokenClient(res.data.token, new Date().getTime() + res.data.expires_in * 1000);\n\n                      if (next) {\n                        resolve(next(param, nextProfile));\n                      }\n\n                      resolve(param);\n                    }).catch(function (err) {\n                      var error = err.response && err.response.data && err.response.data.message && \"Error : \".concat(err.response.data.message.toString().toUpperCase());\n                      param.error = error;\n                      resolve(param);\n                    });\n\n                  case 5:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            });\n          }));\n\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\nexport function getTokenBorrowerFunction(param, next) {\n  return _regeneratorRuntime.async(function getTokenBorrowerFunction$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          return _context4.abrupt(\"return\", new Promise(function _callee2(resolve) {\n            var newLink, logindata;\n            return _regeneratorRuntime.async(function _callee2$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    newLink = serverUrlBorrower + \"clientauth\";\n                    logindata = {\n                      auth: {\n                        username: 'androkey',\n                        password: 'androsecret'\n                      }\n                    };\n                    axios.get(newLink, logindata).then(function (res) {\n                      param.dataTokenBorrower = res.data.token;\n                      setTokenBorrower(res.data.token);\n\n                      if (next) {\n                        resolve(next(param));\n                      }\n\n                      resolve(param);\n                    }).catch(function (err) {\n                      var error = err.response && err.response.data && err.response.data.message && \"Error : \".concat(err.response.data.message.toString().toUpperCase());\n                      param.error = error;\n                      resolve(param);\n                    });\n\n                  case 3:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            });\n          }));\n\n        case 1:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n}\nexport function getUserProfileFunction(param, next) {\n  return _regeneratorRuntime.async(function getUserProfileFunction$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          return _context6.abrupt(\"return\", new Promise(function _callee3(resolve) {\n            var newLink, config;\n            return _regeneratorRuntime.async(function _callee3$(_context5) {\n              while (1) {\n                switch (_context5.prev = _context5.next) {\n                  case 0:\n                    newLink = serverUrl + 'lender/profile';\n                    config = {\n                      headers: {\n                        'Authorization': \"Bearer \" + getTokenClient()\n                      }\n                    };\n                    axios.get(newLink, config).then(function (res) {\n                      var token = jsonWebToken.verify(param.dataTokenLender, 'sXQ8jUMpueOvN5P3cdCR');\n                      token.name = res.data && res.data.name;\n                      token.image = res.data && res.data.image;\n                      token.firstLogin = res.data && res.data.first_login;\n                      param.dataPermission = token;\n\n                      if (next) {\n                        resolve(next(param));\n                      }\n\n                      resolve(param);\n                    }).catch(function (err) {\n                      var error = err.response && err.response.data && err.response.data.message && \"Error : \".concat(err.response.data.message.toString().toUpperCase());\n                      param.error = error;\n                      resolve(param);\n                    });\n\n                  case 3:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }\n            });\n          }));\n\n        case 1:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  });\n}\nexport function sendEmailFunction(param, next) {\n  return _regeneratorRuntime.async(function sendEmailFunction$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          return _context8.abrupt(\"return\", new Promise(function _callee4(resolve) {\n            var tokenAuth, config;\n            return _regeneratorRuntime.async(function _callee4$(_context7) {\n              while (1) {\n                switch (_context7.prev = _context7.next) {\n                  case 0:\n                    tokenAuth = getTokenAuth();\n                    config = {\n                      headers: {\n                        'Authorization': \"Bearer \" + tokenAuth\n                      }\n                    };\n                    axios.post(serverUrl + 'client/forgotpassword', param, config).then(function (res) {\n                      if (next) {\n                        resolve(next(param));\n                      }\n\n                      resolve(res);\n                    }).catch(function (err) {\n                      var error = err.response && err.response.data && err.response.data.message && \"Error : \".concat(err.response.data.message.toString().toUpperCase()) || err.toString();\n                      param.error = error;\n                      resolve(param);\n                    });\n\n                  case 3:\n                  case \"end\":\n                    return _context7.stop();\n                }\n              }\n            });\n          }));\n\n        case 1:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  });\n}\nexport function changePasswordFunction(param, next) {\n  return _regeneratorRuntime.async(function changePasswordFunction$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          return _context10.abrupt(\"return\", new Promise(function _callee5(resolve) {\n            var tokenAuth, config;\n            return _regeneratorRuntime.async(function _callee5$(_context9) {\n              while (1) {\n                switch (_context9.prev = _context9.next) {\n                  case 0:\n                    tokenAuth = getTokenAuth();\n                    config = {\n                      headers: {\n                        'Authorization': \"Bearer \" + tokenAuth\n                      }\n                    };\n                    axios.post(serverUrl + 'client/resetpassword', param, config).then(function (res) {\n                      if (next) {\n                        resolve(next(param));\n                      }\n\n                      resolve(res);\n                    }).catch(function (err) {\n                      var error = err.response && err.response.data && err.response.data.message && \"Error : \".concat(err.response.data.message.toString().toUpperCase()) || err.toString();\n                      param.error = error;\n                      resolve(param);\n                    });\n\n                  case 3:\n                  case \"end\":\n                    return _context9.stop();\n                }\n              }\n            });\n          }));\n\n        case 1:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  });\n}\nexport function changeFirstLoginFunction(param, next) {\n  return _regeneratorRuntime.async(function changeFirstLoginFunction$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          return _context12.abrupt(\"return\", new Promise(function _callee6(resolve) {\n            var tokenClient, config;\n            return _regeneratorRuntime.async(function _callee6$(_context11) {\n              while (1) {\n                switch (_context11.prev = _context11.next) {\n                  case 0:\n                    tokenClient = getTokenClient();\n                    config = {\n                      headers: {\n                        'Authorization': \"Bearer \" + tokenClient\n                      }\n                    };\n                    axios.post(serverUrl + 'lender/first_login', param, config).then(function (res) {\n                      if (next) {\n                        resolve(next(param));\n                      }\n\n                      resolve(res);\n                    }).catch(function (err) {\n                      var error = err.response && err.response.data && err.response.data.message && \"Error : \".concat(err.response.data.message.toString().toUpperCase()) || err.toString();\n                      param.error = error;\n                      resolve(param);\n                    });\n\n                  case 3:\n                  case \"end\":\n                    return _context11.stop();\n                }\n              }\n            });\n          }));\n\n        case 1:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  });\n}","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_fe/src/components/index/saga.js"],"names":["axios","jsonWebToken","serverUrl","serverUrlBorrower","setTokenClient","setTokenBorrower","getTokenAuth","getTokenClient","postLoginBankDashboardFunction","param","next","nextProfile","Promise","resolve","tokenAuth","config","headers","newLink","logindata","key","password","post","then","res","dataTokenLender","data","token","Date","getTime","expires_in","catch","err","error","response","message","toString","toUpperCase","getTokenBorrowerFunction","auth","username","get","dataTokenBorrower","getUserProfileFunction","verify","name","image","firstLogin","first_login","dataPermission","sendEmailFunction","changePasswordFunction","changeFirstLoginFunction","tokenClient"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport jsonWebToken from 'jsonwebtoken'\r\nimport {serverUrl, serverUrlBorrower} from '../url'\r\nimport { setTokenClient, setTokenBorrower, getTokenAuth, getTokenClient } from './token'\r\n\r\nexport async function postLoginBankDashboardFunction (param, next, nextProfile) {\r\n    return new Promise(async (resolve)=>{\r\n        const tokenAuth = getTokenAuth();\r\n\r\n        const config = {\r\n            headers: {'Authorization': \"Bearer \" + tokenAuth}\r\n        };\r\n\r\n        let newLink = serverUrl+`client/lender_login`;  \r\n        const logindata ={key: param.key,password: param.password};\r\n          \r\n        axios.post(newLink, logindata, config)\r\n        .then((res)=>{\r\n            param.dataTokenLender = res.data.token;\r\n            delete param.password;\r\n\r\n            setTokenClient(res.data.token, new Date().getTime() + (res.data.expires_in*1000))\r\n\r\n            if(next){\r\n                resolve(next(param, nextProfile))\r\n            }\r\n            resolve(param)\r\n        })\r\n        .catch((err)=>{\r\n            const error = err.response && err.response.data && err.response.data.message && `Error : ${err.response.data.message.toString().toUpperCase()}`\r\n            param.error = error;\r\n            resolve(param);\r\n        })\r\n    })\r\n    \r\n}\r\n\r\nexport async function getTokenBorrowerFunction (param, next) {\r\n    return new Promise(async (resolve)=>{\r\n        let newLink = serverUrlBorrower +`clientauth`;  \r\n        const logindata = {\r\n            auth: {\r\n                username : 'androkey',\r\n                password : 'androsecret'\r\n            }\r\n        };\r\n          \r\n        axios.get(newLink, logindata)\r\n        .then((res)=>{          \r\n            param.dataTokenBorrower = res.data.token;\r\n\r\n            setTokenBorrower(res.data.token);\r\n\r\n            if(next){\r\n                resolve(next(param))\r\n            }\r\n            resolve(param)\r\n        })\r\n        .catch((err)=>{\r\n            const error = err.response && err.response.data && err.response.data.message && `Error : ${err.response.data.message.toString().toUpperCase()}`\r\n            param.error = error;\r\n            resolve(param);\r\n        })\r\n    })\r\n    \r\n}\r\n\r\nexport async function getUserProfileFunction(param, next) {\r\n    return new Promise(async (resolve) => {    \r\n       \r\n        const newLink = serverUrl + 'lender/profile'\r\n\r\n        const config = {\r\n            headers: {'Authorization': \"Bearer \" + getTokenClient()}\r\n        };\r\n\r\n        axios.get(newLink, config).then((res)=>{       \r\n            var token = jsonWebToken.verify(param.dataTokenLender,'sXQ8jUMpueOvN5P3cdCR');\r\n            token.name = res.data && res.data.name;\r\n            token.image = res.data && res.data.image;\r\n            token.firstLogin = res.data && res.data.first_login;\r\n\r\n            param.dataPermission = token;\r\n\r\n\r\n            if(next){\r\n                resolve(next(param))\r\n            }\r\n            resolve(param)\r\n        }).catch((err)=>{\r\n            const error = err.response && err.response.data && err.response.data.message && `Error : ${err.response.data.message.toString().toUpperCase()}`\r\n            param.error = error;\r\n            resolve(param);\r\n        })\r\n        \r\n    });\r\n    \r\n}\r\n\r\n\r\nexport async function sendEmailFunction (param,next){\r\n    return new Promise(async (resolve)=>{\r\n        const tokenAuth = getTokenAuth();\r\n\r\n        const config = {\r\n            headers: {'Authorization': \"Bearer \" + tokenAuth}\r\n        };\r\n        axios.post(serverUrl+'client/forgotpassword',param,config)\r\n        .then((res)=>{\r\n            if(next){\r\n                resolve(next(param))\r\n            }\r\n            resolve(res)\r\n        })\r\n        .catch((err)=>{\r\n            const error =( err.response && err.response.data && err.response.data.message && `Error : ${err.response.data.message.toString().toUpperCase()}`)|| err.toString()\r\n            param.error = error;\r\n            resolve(param);\r\n        })\r\n\r\n    })\r\n}\r\n\r\nexport async function changePasswordFunction (param,next){\r\n    return new Promise(async(resolve)=>{\r\n        const tokenAuth = getTokenAuth();\r\n\r\n        const config = {\r\n            headers: {'Authorization': \"Bearer \" + tokenAuth}\r\n        };\r\n        axios.post(serverUrl+'client/resetpassword',param,config)\r\n        .then((res)=>{\r\n            if(next){\r\n                resolve(next(param))\r\n            }\r\n            resolve(res)\r\n        })\r\n        .catch((err)=>{\r\n            const error =( err.response && err.response.data && err.response.data.message && `Error : ${err.response.data.message.toString().toUpperCase()}`)|| err.toString()\r\n            param.error = error;\r\n            resolve(param);\r\n        })\r\n    })\r\n}\r\n\r\nexport async function changeFirstLoginFunction (param,next){\r\n    return new Promise(async(resolve)=>{\r\n        const tokenClient = getTokenClient();\r\n\r\n        const config = {\r\n            headers: {'Authorization': \"Bearer \" + tokenClient}\r\n        };\r\n        axios.post(serverUrl+'lender/first_login',param,config)\r\n        .then((res)=>{\r\n            if(next){\r\n                resolve(next(param))\r\n            }\r\n            resolve(res)\r\n        })\r\n        .catch((err)=>{\r\n            const error =( err.response && err.response.data && err.response.data.message && `Error : ${err.response.data.message.toString().toUpperCase()}`)|| err.toString()\r\n            param.error = error;\r\n            resolve(param);\r\n        })\r\n    })\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}