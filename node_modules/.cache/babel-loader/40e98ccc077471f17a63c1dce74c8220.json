{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\components\\\\profileNasabah\\\\profileNasabah.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport Loader from 'react-loader-spinner';\nimport { connect } from 'react-redux';\nimport Cookie from 'universal-cookie';\nimport { Redirect } from 'react-router-dom';\nimport QueryString from 'query-string';\nimport { serverUrl } from '../url';\nimport { Link } from 'react-router-dom';\nimport Pagination from 'rc-pagination';\nimport './../../support/css/pagination.css';\nimport localeInfo from 'rc-pagination/lib/locale/id_ID';\nimport { getAllProfileNasabahFunction } from './saga';\nconst kukie = new Cookie();\nvar config = {\n  headers: {\n    'Authorization': \"Bearer \" + kukie.get('tokenClient')\n  }\n};\n\nclass profileNasabah extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      rows: [],\n      searchRows: null,\n      page: 1,\n      rowsPerPage: 5,\n      isEdit: false,\n      editIndex: Number,\n      totalData: 0,\n      last_page: 1,\n      loading: true,\n      halamanConfig: \"orderby=id&sort=ASC&rows=10\"\n    };\n\n    this.pushUrl = () => {\n      var newLink = '/profileNasabah/search';\n      var params = []; //categoryDropdown,search\n\n      if (this.refs.search.value) {\n        params.push({\n          params: 'query',\n          value: this.refs.search.value\n        });\n      }\n\n      for (var i = 0; i < params.length; i++) {\n        if (i === 0) {\n          newLink += '?' + params[i].params + '=' + params[i].value;\n        } else {\n          newLink += '&' + params[i].params + '=' + params[i].value;\n        }\n      }\n\n      this.props.history.push(newLink);\n    };\n\n    this.getLink = () => {\n      var obj = QueryString.parse(this.props.location.search);\n      return obj.query;\n    };\n\n    this.getAllData = () => {\n      config = {\n        headers: {\n          'Authorization': \"Bearer \" + kukie.get('tokenClient')\n        }\n      };\n      let param = {};\n\n      if (this.props.location.search) {\n        var hasil = this.getLink();\n\n        if (!isNaN(hasil)) {\n          param = {\n            id: hasil\n          };\n        } else {\n          param = {\n            fullname: hasil\n          };\n        }\n      }\n\n      this.getProfileNasabah(param);\n    };\n\n    this.getProfileNasabah = async function (param) {\n      const data = await getAllProfileNasabahFunction(param);\n\n      if (data) {\n        console.log(data);\n\n        if (!data.error) {\n          this.setState({\n            loading: false,\n            rows: data.borrowerList.data,\n            rowsPerPage: data.borrowerList.rows,\n            jumlahBaris: null,\n            totalData: data.borrowerList.total_data,\n            last_page: data.borrowerList.last_page,\n            page: data.borrowerList.current_page\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error\n          });\n        }\n      }\n    };\n\n    this.onBtnSearch = () => {\n      var searching = this.refs.search.value;\n      this.setState({\n        loading: true,\n        searchRows: searching\n      });\n      this.pushUrl();\n      var newLink = \"lender/borrower_list?\";\n\n      if (searching) {\n        //search function\n        if (!isNaN(searching)) {\n          newLink += \"id=\".concat(searching, \"&\").concat(this.state.halamanConfig);\n        } else {\n          newLink += \"fullname=\".concat(searching, \"&\").concat(this.state.halamanConfig);\n        }\n      } else {\n        newLink += \"\".concat(this.state.halamanConfig);\n      }\n\n      axios.get(serverUrl + newLink, config).then(res => {\n        this.setState({\n          loading: false,\n          rows: res.data.data,\n          searchRows: null,\n          rowsPerPage: res.data.rows,\n          totalData: res.data.total_data\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onChangePage = (current, pageSize) => {\n      this.setState({\n        loading: true\n      });\n      console.log('onChange:current=', current);\n      console.log('onChange:pageSize=', pageSize);\n      var searching = this.refs.search.value;\n      var newLink = \"lender/borrower_list?\";\n\n      if (searching) {\n        //search function\n        if (!isNaN(searching)) {\n          newLink += \"id=\".concat(searching, \"&\").concat(this.state.halamanConfig, \"&page=\").concat(current);\n        } else {\n          newLink += \"fullname=\".concat(searching, \"&\").concat(this.state.halamanConfig, \"&page=\").concat(current);\n        }\n      } else {\n        newLink += \"\".concat(this.state.halamanConfig, \"&page=\").concat(current);\n      }\n\n      axios.get(serverUrl + newLink, config).then(res => {\n        console.log(res.data);\n        this.setState({\n          loading: false,\n          rows: res.data.data,\n          rowsPerPage: res.data.rows,\n          page: current,\n          totalData: res.data.total_data\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.renderJSX = () => {\n      if (this.state.loading) {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          align: \"center\",\n          colSpan: 6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(Loader, {\n          type: \"Circles\",\n          color: \"#00BFFF\",\n          height: \"40\",\n          width: \"40\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        })));\n      } else {\n        if (this.state.rows.length === 0) {\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 170\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            align: \"center\",\n            colSpan: 6,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171\n            },\n            __self: this\n          }, \"Data empty\"));\n        } else {\n          var jsx = this.state.rows.map((val, index) => {\n            return React.createElement(\"tr\", {\n              key: index,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 177\n              },\n              __self: this\n            }, React.createElement(\"td\", {\n              align: \"center\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 178\n              },\n              __self: this\n            }, this.state.page > 0 ? index + 1 + this.state.rowsPerPage * (this.state.page - 1) : index + 1), React.createElement(\"td\", {\n              align: \"center\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 179\n              },\n              __self: this\n            }, val.id), React.createElement(\"td\", {\n              align: \"center\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 180\n              },\n              __self: this\n            }, val.fullname), React.createElement(\"td\", {\n              align: \"center\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 181\n              },\n              __self: this\n            }, val.created_time.substr(0, val.created_time.indexOf('T'))), React.createElement(\"td\", {\n              align: \"center\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 183\n              },\n              __self: this\n            }, React.createElement(Link, {\n              style: {\n                textDecoration: \"none\"\n              },\n              to: \"/profileNasabahDetail/\".concat(val.id),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 184\n              },\n              __self: this\n            }, React.createElement(\"input\", {\n              type: \"button\",\n              className: \"btn btn-primary\",\n              value: \"Details\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 185\n              },\n              __self: this\n            }))));\n          });\n          return jsx;\n        }\n      }\n    };\n  }\n\n  //-----------------------------------NIKO FUNCTION-------------------------------------------------------------\n  componentDidMount() {\n    this.getAllData();\n  }\n\n  render() {\n    if (kukie.get(\"tokenClient\") && kukie.get(\"token\")) {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Nasabah - List\")), React.createElement(\"div\", {\n        className: \"col-5 mt-3 ml-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        ref: \"search\",\n        placeholder: \"Search..\",\n        style: {\n          width: \"150px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"input-group-addon ml-2\",\n        style: {\n          border: \"1px solid grey\",\n          width: \"35px\",\n          height: \"35px\",\n          paddingTop: \"2px\",\n          borderRadius: \"4px\",\n          paddingLeft: \"2px\",\n          marginTop: \"6px\",\n          cursor: \"pointer\"\n        },\n        onClick: this.onBtnSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-search\",\n        style: {\n          fontSize: \"28px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }))))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), React.createElement(\"table\", {\n        className: \"table table-hover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"table-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Id Nasabah\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"Nama Nasabah\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"Tanggal Registrasi\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, \"Action\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, this.renderJSX())), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }), React.createElement(\"nav\", {\n        className: \"navbar\",\n        style: {\n          float: \"right\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        className: \"ant-pagination\",\n        showTotal: (total, range) => \"\".concat(range[0], \" - \").concat(range[1], \" of \").concat(total, \" items\"),\n        total: this.state.totalData,\n        pageSize: this.state.rowsPerPage,\n        onChange: this.onChangePage,\n        locale: localeInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      })));\n    } else if (kukie.get(\"token\")) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nconst mapStateToProp = state => {\n  return {\n    id: state.user.id\n  };\n};\n\nexport default connect(mapStateToProp)(profileNasabah);","map":{"version":3,"sources":["C:\\Users\\pc\\Desktop\\asira_fe\\src\\components\\profileNasabah\\profileNasabah.js"],"names":["React","axios","Loader","connect","Cookie","Redirect","QueryString","serverUrl","Link","Pagination","localeInfo","getAllProfileNasabahFunction","kukie","config","headers","get","profileNasabah","Component","state","rows","searchRows","page","rowsPerPage","isEdit","editIndex","Number","totalData","last_page","loading","halamanConfig","pushUrl","newLink","params","refs","search","value","push","i","length","props","history","getLink","obj","parse","location","query","getAllData","param","hasil","isNaN","id","fullname","getProfileNasabah","data","console","log","error","setState","borrowerList","jumlahBaris","total_data","current_page","errorMessage","onBtnSearch","searching","then","res","catch","err","onChangePage","current","pageSize","renderJSX","jsx","map","val","index","created_time","substr","indexOf","textDecoration","componentDidMount","render","width","border","height","paddingTop","borderRadius","paddingLeft","marginTop","cursor","fontSize","float","total","range","mapStateToProp","user"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios'\r\nimport Loader from 'react-loader-spinner'\r\nimport {connect } from 'react-redux'\r\nimport Cookie from 'universal-cookie'\r\nimport { Redirect } from 'react-router-dom'\r\nimport QueryString from 'query-string'\r\nimport {serverUrl} from '../url'\r\nimport {Link} from 'react-router-dom'\r\nimport Pagination from 'rc-pagination';\r\nimport './../../support/css/pagination.css'\r\nimport localeInfo from 'rc-pagination/lib/locale/id_ID'\r\nimport {getAllProfileNasabahFunction} from './saga'\r\nconst kukie = new Cookie()\r\nvar config = {\r\n  headers: {'Authorization': \"Bearer \" + kukie.get('tokenClient')}\r\n};\r\n\r\n\r\nclass profileNasabah extends React.Component {\r\n  state = {\r\n    rows: [], searchRows:null,\r\n    page: 1,\r\n    rowsPerPage: 5,\r\n    isEdit: false,\r\n    editIndex:Number,\r\n    totalData:0,\r\n    last_page:1,\r\n    loading:true,\r\n    halamanConfig:`orderby=id&sort=ASC&rows=10`\r\n  };\r\n\r\n  //-----------------------------------NIKO FUNCTION-------------------------------------------------------------\r\ncomponentDidMount(){\r\n    this.getAllData()\r\n}\r\n\r\npushUrl = ()=>{\r\n    var newLink ='/profileNasabah/search'\r\n    var params =[]\r\n    //categoryDropdown,search\r\n    if(this.refs.search.value){\r\n        params.push({\r\n            params:'query',\r\n            value:this.refs.search.value\r\n        })\r\n    }\r\n    \r\n\r\n    for (var i=0;i<params.length;i++){\r\n        if(i===0){\r\n            newLink += '?'+params[i].params+ '='+ params[i].value\r\n        }else{\r\n            newLink += '&'+params[i].params+ '='+ params[i].value\r\n        }\r\n    }\r\n    this.props.history.push(newLink)\r\n}\r\n//GET LINK\r\ngetLink = ()=>{\r\n  var obj = QueryString.parse(this.props.location.search)\r\n return obj.query \r\n}\r\n  \r\n  //Ambil data pertama kali\r\ngetAllData = ()=>{\r\n  config = {\r\n    headers: {'Authorization': \"Bearer \" + kukie.get('tokenClient')}\r\n  };\r\n    let param={}\r\n    if (this.props.location.search){\r\n      var hasil = this.getLink()\r\n      if(!isNaN(hasil)){\r\n        param ={\r\n          id:hasil }\r\n      }else{\r\n        param ={\r\n          fullname:hasil\r\n        }\r\n      }\r\n    }\r\n\r\n    this.getProfileNasabah(param)\r\n}\r\n\r\n  getProfileNasabah = async function(param){\r\n    const data = await getAllProfileNasabahFunction(param)\r\n\r\n    if(data){\r\n      console.log(data)\r\n      if(!data.error){\r\n        this.setState({loading:false,rows:data.borrowerList.data,rowsPerPage:data.borrowerList.rows,jumlahBaris:null,totalData:data.borrowerList.total_data,\r\n          last_page:data.borrowerList.last_page,page:data.borrowerList.current_page})\r\n      }else{\r\n        this.setState({errorMessage:data.error})\r\n      }\r\n    }\r\n  }\r\n\r\n  onBtnSearch = ()=>{\r\n    var searching = this.refs.search.value\r\n    this.setState({loading:true,searchRows:searching})\r\n    this.pushUrl()\r\n    var newLink=`lender/borrower_list?`\r\n    if(searching){\r\n      //search function\r\n      if(!isNaN(searching)){\r\n        newLink +=`id=${searching}&${this.state.halamanConfig}`\r\n      }else{\r\n        newLink +=`fullname=${searching}&${this.state.halamanConfig}`\r\n      }\r\n    }else{\r\n        newLink+=`${this.state.halamanConfig}`\r\n    }\r\n    axios.get(serverUrl+newLink,config)\r\n    .then((res)=>{\r\n        this.setState({loading:false,rows:res.data.data,searchRows:null,rowsPerPage:res.data.rows,totalData:res.data.total_data})\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err)\r\n    })\r\n  }\r\n // rpp =5\r\n // p = 3\r\n // index = 11\r\n onChangePage = (current, pageSize) => {\r\n  this.setState({loading:true})\r\n  console.log('onChange:current=', current);\r\n  console.log('onChange:pageSize=', pageSize);\r\n  var searching = this.refs.search.value\r\n\r\n  var newLink=`lender/borrower_list?`\r\n  if(searching){\r\n    //search function\r\n    if(!isNaN(searching)){\r\n      newLink +=`id=${searching}&${this.state.halamanConfig}&page=${current}`\r\n    }else{\r\n      newLink +=`fullname=${searching}&${this.state.halamanConfig}&page=${current}`\r\n    }\r\n  }else{\r\n      newLink+=`${this.state.halamanConfig}&page=${current}`\r\n  }\r\n  axios.get(serverUrl+newLink,config)\r\n  .then((res)=>{\r\n      console.log(res.data)\r\n      this.setState({loading:false,rows:res.data.data,rowsPerPage:res.data.rows,page:current,totalData:res.data.total_data})\r\n  })\r\n  .catch((err)=>{\r\n      console.log(err)\r\n  })\r\n}\r\n  \r\nrenderJSX = ()=>{\r\n    if (this.state.loading){\r\n      return  (\r\n        <tr>\r\n          <td align=\"center\" colSpan={6}>\r\n                <Loader \r\n            type=\"Circles\"\r\n            color=\"#00BFFF\"\r\n            height=\"40\"\t\r\n            width=\"40\"\r\n        />   \r\n          </td>\r\n        </tr>\r\n      )\r\n  }else{\r\n    if (this.state.rows.length===0){\r\n      return(\r\n        <tr>\r\n          <td align=\"center\" colSpan={6}>Data empty</td>\r\n        </tr>\r\n      )\r\n    }else{\r\n      var jsx = this.state.rows.map((val,index)=>{\r\n        return (\r\n        <tr key={index}>\r\n            <td align=\"center\">{this.state.page >0 ? index+1 + (this.state.rowsPerPage*(this.state.page -1)) : index+1}</td>\r\n            <td align=\"center\">{val.id}</td>\r\n            <td align=\"center\">{val.fullname}</td>\r\n            <td align=\"center\">{val.created_time.substr(0, val.created_time.indexOf('T'))}</td>\r\n            {/* <TableCell align=\"center\">{val.status}</TableCell> */}\r\n            <td align=\"center\">\r\n            <Link style={{textDecoration:\"none\"}} to={`/profileNasabahDetail/${val.id}`}>\r\n                <input type=\"button\" className=\"btn btn-primary\" value=\"Details\"/>\r\n            </Link>\r\n            </td>\r\n        </tr>\r\n        )\r\n    })\r\n     return jsx;\r\n    }\r\n  }\r\n}\r\n\r\nrender() {\r\nif(kukie.get(\"tokenClient\")&&kukie.get(\"token\")){\r\n    return (\r\n        <div className=\"container\">\r\n         <div className=\"row\">\r\n                        <div className=\"col-6\">\r\n                             <h2 className=\"mt-3\">Nasabah - List</h2>\r\n                        </div>\r\n                        <div className=\"col-5 mt-3 ml-5\">\r\n                        <div className=\"input-group\">\r\n                            <input type=\"text\" className=\"form-control\" ref=\"search\" placeholder=\"Search..\" style={{width:\"150px\"}} />\r\n                            <span className=\"input-group-addon ml-2\" style={{border:\"1px solid grey\",width:\"35px\",height:\"35px\",paddingTop:\"2px\",borderRadius:\"4px\",paddingLeft:\"2px\",marginTop:\"6px\",cursor:\"pointer\"}} onClick={this.onBtnSearch}> \r\n                            <i className=\"fas fa-search\" style={{fontSize:\"28px\"}} ></i></span>\r\n                        </div>\r\n                        </div>\r\n          </div>\r\n        <hr></hr>\r\n          <table className=\"table table-hover\">\r\n          <thead className=\"table-warning\">\r\n              <tr>\r\n                  <th className=\"text-center\" scope=\"col\">#</th>\r\n                  <th className=\"text-center\" scope=\"col\">Id Nasabah</th>\r\n                  <th className=\"text-center\" scope=\"col\">Nama Nasabah</th>\r\n                  <th  className=\"text-center\" scope=\"col\">Tanggal Registrasi</th>\r\n                  {/* <TableCell align=\"center\">Status Nasabah</TableCell> */}\r\n                  <th  className=\"text-center\" scope=\"col\">Action</th>\r\n                 \r\n              </tr>     \r\n          </thead>\r\n            <tbody>\r\n              {this.renderJSX()}\r\n            </tbody>  \r\n          </table>\r\n                <hr/>\r\n                <nav className=\"navbar\" style={{float:\"right\"}}> \r\n                <Pagination className=\"ant-pagination\"  \r\n                showTotal={(total, range) => `${range[0]} - ${range[1]} of ${total} items`}\r\n                total={this.state.totalData}\r\n                pageSize={this.state.rowsPerPage}\r\n                onChange={this.onChangePage}\r\n                locale={localeInfo}\r\n                />\r\n          </nav>\r\n        </div>\r\n    );\r\n}else if (kukie.get(\"token\")){\r\n  return  <Redirect to='/login' />\r\n}\r\n}\r\n}\r\n\r\nconst mapStateToProp = (state)=>{\r\n  return{     \r\n      id: state.user.id\r\n  }\r\n}\r\nexport default connect (mapStateToProp)(profileNasabah) ;"]},"metadata":{},"sourceType":"module"}