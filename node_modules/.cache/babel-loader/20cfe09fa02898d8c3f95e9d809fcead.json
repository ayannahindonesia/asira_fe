{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_fe\\\\src\\\\App.js\";\nimport React from 'react';\nimport './App.css';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { keepLogin } from './1.actions';\nimport { serverUrl } from './components/url';\nimport Login from './components/index/login';\nimport ScrollTop from './components/scrollToTop';\nimport axios from 'axios';\nimport { getTokenClient, setTokenAuth, getProfileUser, getTokenAuth } from './components/index/token';\nimport { Grid } from '@material-ui/core';\nimport Drawer from './components/subComponent/Drawer';\nimport ChangePassword from './components/index/changePassword';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loading: true,\n      tokenClient: null,\n      Token: null\n    };\n\n    _this.getAuth = function () {\n      var url = serverUrl + \"clientauth\";\n      axios.get(url, {\n        auth: {\n          username: 'reactkey',\n          password: 'reactsecret'\n        }\n      }).then(function (res) {\n        setTokenAuth(res.data.token);\n\n        _this.setState({\n          loading: false\n        });\n      }).catch(function (err) {\n        console.log(err.toString());\n        setTimeout(function () {\n          alert(\"Coba reload halaman/ cek koneksi internet\");\n        }, 5000);\n      });\n    };\n\n    _this.checkUbahPasswordLink = function (path, token) {\n      var flag = false;\n\n      if (path && token) {\n        if (path.split('/')[1] && path.split('/')[1] === 'ubahpassword' && token.split('token=')[1] && token.split('token=')[1].length !== 0) {\n          flag = true;\n        }\n      }\n\n      return flag;\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getAuth();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      console.log('hit');\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      // if(nextProps.location.pathname === '/' && !getTokenAuth()) {\n      // }\n      if (!getTokenAuth()) {\n        this.getAuth();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loading) {\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, \" loading ....\");\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(ScrollTop, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, getTokenClient() && getProfileUser() ? JSON.parse(getProfileUser()).firstLogin ? React.createElement(ChangePassword, {\n        type: \"firstlogin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }) : React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        sm: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Drawer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      })) : this.checkUbahPasswordLink(this.props.location && this.props.location.pathname, this.props.location && this.props.location.search) ? React.createElement(ChangePassword, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }) : React.createElement(Login, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    id: state.user.id\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, {\n  keepLogin: keepLogin\n})(App));","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_fe/src/App.js"],"names":["React","withRouter","connect","keepLogin","serverUrl","Login","ScrollTop","axios","getTokenClient","setTokenAuth","getProfileUser","getTokenAuth","Grid","Drawer","ChangePassword","App","state","loading","tokenClient","Token","getAuth","url","get","auth","username","password","then","res","data","token","setState","catch","err","console","log","toString","setTimeout","alert","checkUbahPasswordLink","path","flag","split","length","nextProps","JSON","parse","firstLogin","props","location","pathname","search","Component","mapStateToProps","id","user"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,SAAR,QAAwB,aAAxB;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AAEA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,EAAyBC,YAAzB,EAAuCC,cAAvC,EAAuDC,YAAvD,QAA0E,0BAA1E;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,OAAOC,MAAP,MAAmB,kCAAnB;AACA,OAAOC,cAAP,MAA2B,mCAA3B;;IAEMC,G;;;;;;;;;;;;;;;;;UACJC,K,GAAO;AAACC,MAAAA,OAAO,EAAG,IAAX;AAAkBC,MAAAA,WAAW,EAAG,IAAhC;AAAuCC,MAAAA,KAAK,EAAG;AAA/C,K;;UAsBPC,O,GAAU,YAAI;AACZ,UAAIC,GAAG,GAAEjB,SAAS,GAAC,YAAnB;AACAG,MAAAA,KAAK,CAACe,GAAN,CAAUD,GAAV,EAAe;AACbE,QAAAA,IAAI,EAAG;AACLC,UAAAA,QAAQ,EAAG,UADN;AAELC,UAAAA,QAAQ,EAAG;AAFN;AADM,OAAf,EAKGC,IALH,CAKQ,UAACC,GAAD,EAAO;AACblB,QAAAA,YAAY,CAACkB,GAAG,CAACC,IAAJ,CAASC,KAAV,CAAZ;;AACA,cAAKC,QAAL,CAAc;AAACb,UAAAA,OAAO,EAAG;AAAX,SAAd;AACD,OARD,EAQGc,KARH,CAQS,UAACC,GAAD,EAAO;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAJ,EAAZ;AACAC,QAAAA,UAAU,CAAC,YAAU;AAAEC,UAAAA,KAAK,CAAC,2CAAD,CAAL;AAAqD,SAAlE,EAAoE,IAApE,CAAV;AACD,OAXD;AAYD,K;;UAEDC,qB,GAAuB,UAACC,IAAD,EAAOV,KAAP,EAAiB;AACtC,UAAIW,IAAI,GAAG,KAAX;;AAEA,UAAGD,IAAI,IAAIV,KAAX,EAAkB;AAChB,YACEU,IAAI,CAACE,KAAL,CAAW,GAAX,EAAgB,CAAhB,KAAsBF,IAAI,CAACE,KAAL,CAAW,GAAX,EAAgB,CAAhB,MAAuB,cAA7C,IACAZ,KAAK,CAACY,KAAN,CAAY,QAAZ,EAAsB,CAAtB,CADA,IAC4BZ,KAAK,CAACY,KAAN,CAAY,QAAZ,EAAsB,CAAtB,EAAyBC,MAAzB,KAAoC,CAFlE,EAGE;AACAF,UAAAA,IAAI,GAAG,IAAP;AACD;AACF;;AACD,aAAOA,IAAP;AACD,K;;;;;;;wCAhDkB;AACjB,WAAKpB,OAAL;AACD;;;yCAEoB;AACnBa,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACD;;;qDAEgCS,S,EAAW;AAC1C;AAEA;AAEA,UAAG,CAAChC,YAAY,EAAhB,EAAoB;AAClB,aAAKS,OAAL;AACD;AAEF;;;6BAkCQ;AAEP,UAAG,KAAKJ,KAAL,CAAWC,OAAd,EAAsB;AACpB,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF;AAGD;;AAEC,aAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,SAAS,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGIT,cAAc,MAAME,cAAc,EAAlC,GACAkC,IAAI,CAACC,KAAL,CAAWnC,cAAc,EAAzB,EAA6BoC,UAA7B,GACE,oBAAC,cAAD;AAAgB,QAAA,IAAI,EAAC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,GAGE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,EAAf;AAAmB,QAAA,EAAE,EAAE,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,GAQA,KAAKR,qBAAL,CAA2B,KAAKS,KAAL,CAAWC,QAAX,IAAuB,KAAKD,KAAL,CAAWC,QAAX,CAAoBC,QAAtE,EAAgF,KAAKF,KAAL,CAAWC,QAAX,IAAuB,KAAKD,KAAL,CAAWC,QAAX,CAAoBE,MAA3H,IACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,GAGE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdN,CADF,CADF,CAFF;AA8BH;;;;EA5FelD,KAAK,CAACmD,S;;AA+FxB,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACpC,KAAD,EAAS;AAC/B,SAAO;AACHqC,IAAAA,EAAE,EAAGrC,KAAK,CAACsC,IAAN,CAAWD;AADb,GAAP;AAID,CALD;;AAOA,eAAepD,UAAU,CAACC,OAAO,CAACkD,eAAD,EAAiB;AAACjD,EAAAA,SAAS,EAATA;AAAD,CAAjB,CAAP,CAAsCY,GAAtC,CAAD,CAAzB","sourcesContent":["import React from 'react';\r\nimport './App.css';\r\nimport {withRouter} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\nimport {keepLogin} from './1.actions'\r\nimport {serverUrl} from './components/url'\r\n\r\nimport Login from './components/index/login'\r\nimport ScrollTop from './components/scrollToTop'\r\nimport axios from 'axios'\r\nimport { getTokenClient, setTokenAuth, getProfileUser, getTokenAuth} from './components/index/token';\r\nimport { Grid } from '@material-ui/core';\r\nimport Drawer from './components/subComponent/Drawer';\r\nimport ChangePassword from './components/index/changePassword'\r\n\r\nclass App extends React.Component {\r\n  state ={loading : true , tokenClient : null , Token : null}\r\n\r\n  componentDidMount(){\r\n    this.getAuth()\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    console.log('hit')\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    // if(nextProps.location.pathname === '/' && !getTokenAuth()) {\r\n      \r\n    // }\r\n\r\n    if(!getTokenAuth()) {\r\n      this.getAuth()\r\n    }\r\n    \r\n  }\r\n\r\n\r\n  getAuth = ()=>{\r\n    var url =serverUrl+\"clientauth\"\r\n    axios.get(url ,{\r\n      auth : {\r\n        username : 'reactkey',\r\n        password : 'reactsecret'\r\n      }\r\n    }).then((res)=>{\r\n      setTokenAuth(res.data.token)\r\n      this.setState({loading : false})\r\n    }).catch((err)=>{\r\n      console.log(err.toString())\r\n      setTimeout(function(){ alert(\"Coba reload halaman/ cek koneksi internet\"); }, 5000);\r\n    })\r\n  }\r\n\r\n  checkUbahPasswordLink= (path, token) => {\r\n    let flag = false;\r\n\r\n    if(path && token) {\r\n      if(\r\n        path.split('/')[1] && path.split('/')[1] === 'ubahpassword' &&\r\n        token.split('token=')[1] && token.split('token=')[1].length !== 0\r\n      ) {\r\n        flag = true;\r\n      }\r\n    }\r\n    return flag\r\n  }\r\n\r\n\r\n  render() {\r\n    \r\n    if(this.state.loading){\r\n      return(\r\n        <p> loading ....</p>\r\n      )\r\n    }\r\n    \r\n      return (\r\n      \r\n        <div>\r\n          <ScrollTop>\r\n            <Grid container>\r\n              \r\n              {\r\n                getTokenClient() && getProfileUser() ? \r\n                JSON.parse(getProfileUser()).firstLogin ?\r\n                  <ChangePassword type='firstlogin'/>\r\n                :\r\n                  <Grid item xs={12} sm={12}>\r\n                    <Drawer/>\r\n                  </Grid>\r\n                : \r\n                this.checkUbahPasswordLink(this.props.location && this.props.location.pathname, this.props.location && this.props.location.search) ?\r\n                  <ChangePassword />\r\n                :\r\n                  <Login />\r\n              }\r\n              \r\n            </Grid>\r\n          </ScrollTop>\r\n        </div>\r\n     \r\n      );\r\n    \r\n  \r\n     \r\n \r\n  }\r\n}\r\n  \r\nconst mapStateToProps = (state)=>{\r\n  return {\r\n      id : state.user.id\r\n\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps,{keepLogin}) (App));\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}